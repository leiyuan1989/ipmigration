
//  This Rule File will check 1P8M, please use TM1(120)/TM2(122) and TV1(121)/TV2(123) as top metal/Via

//****************************************************************  
//  !!!  Please Select Your IO Voltage in your Design First  !!!   
//****************************************************************  
  

//=>  There are 2 kinds of voltage combinations, Please select one according to your own design. 
//=>  Open the mark of selected command ( by remove "//" in front of the command) . 

//=>  The runset default is to check 1.0/1.8/2.5V. It will check PSUB_3c, GT_1c, GT_1e, GT_1f.
//=>  The option can also be 1.0/1.8/3.3V. It will check PSUB_3d, GT_1d.

//=>   1.0V core   :  no DG/TG 
//=>   1.8V        :  DG only
//=>   2.5V/3.3V   :  TG only 
//=>   Over drive  :  TG and OVERPL

//=>  The default Top Metal's min width is 0.40um and the Top Via is 0.36 for "Type_a".
//=>  If you want to check  Ultra Thick Top Metal & Via process, please change to "Type_T".

//=>  Type_a  : For Top Metal wiring level in USG metal minimum pitch W/S = 0.40um/0.40um
//=>  Type_T  : For Ultra Thick Metal wiring level in USG metal minimum pitch W/S = 1.50um/1.50um

 
 
//##############################
//#  <Choice 1>   IO Voltage   #
//##############################

//For 65nm Logic LL 1.0/1.2/1.8/2.5V process or 2.5v overdrive to 3.3v, set this option to 1825;
//For 65nm Logic LL 1.0/1.2/1.8/3.3V process, set this option to 1833;
//Default value is 1825

#DEFINE IO 1825


//#########################################################
//#  <Choice 2>   Top Metal/Via Type_b & Thick Top metal  #
//#########################################################

//Variable define , set top metal & top via type_a (Type_a/Type_T)
//Default:   TM1/TM2 feature size is 0.40 TV1/TV2 feature size is 0.36

#DEFINE Type_a //; Customer can use "Type_T" for Thick Top metal process check 


//##########################################
//#  <Choice 3>   Recommended rules Choice #
//##########################################

/*The rules with the superscript of [R] in DR are recommended rules which require performing DRC runset,
but DRC checking is not gated for recommended rules. Pls consult with process integration engineer if customers have the doubt.*/

#DEFINE Recommended_rules_CHECK YES     //; Please set the value for the switch to "YES" OR "NO" only based on the descriptions above.
                                        //; Default value is "YES" to check recommended rules.
                                        //; Please change the value "YES" into "NO" if recommended rules shouldn't be checked. 

//#########################################
//#  <Choice 4>   Guidelines rules choice #  
//#########################################

/*It's stongly recommended to follow layout guidelines for design. And the guidelines require performing DRC runset,
 but DRC checking is not gated for them.Pls consult with integration engineers if customer has the problem. 
 SMIC spice model and PDK is based on SMIC design rule guidelines.The Guidelines rules are listed as below:
      AA, NW and poly Resistor guidelines 
      Poly E-Fuse guidelines
      HRP guidelines
      LDMOS layout guidelines
      Seal ring layout guidelines
      Guide ring layout guidelines
      Al fuse guidelines
      Fuse repairing alignment mark guidelines*/

#DEFINE Guidelines_rules_CHECK YES      //; Please set the value for the switch to "YES" OR "NO" only based on the descriptions above.
                                        //; Default value is "YES" to check Guidelines rules.
                                        //; Please change the value "YES" into "NO" if Guidelines rules shouldn't be checked.


//###################################
//#  <Choice 5>   ALLOW_V01         #
//###################################

//If DRC needs to allow via size 0.1*0.1, then #DEFINE ALLOW_V01 YES
//If DRC needs to highlight via size 0.1*0.1, then #DEFINE ALLOW_V01 NO
//Default is #DEFINE ALLOW_V01 YES

#DEFINE ALLOW_V01 NO


//##################################
//#  <Choice 6>   BORDER Rules     #
//##################################

/*This section is used only for the designs on which designer does not put seal rings. 
Chip edge BORDER layer and layout pattern rules are defined to avoid any layout pattern extending out to the scribe lane regions.
Designer must draw border layer if they do not put the seal ring in the design.
Border rule is only applied for chip level, IP level doesn't need to follow it.*/

#DEFINE BORDER_CHECK NO    //; Please set the value for the switch to "YES" OR "NO" only based on the descriptions above.
                            //; Default value is "YES" to check BORDER rules.
                            //; Please change the value "YES" into "NO" if BORDER rules shouldn't be checked.
                          



//==============================================================================================================

  VARIABLE PA_su 1.5        //; In Smic LOTA, ALPA will be generated by the formual "(PA su 1.5) + RDL",
                            //; If CTM's LOTA not follows the value "1.5'" of PA grow, please fix it in the opition,
                            //; Be care that the value should not be smaller than 1.5um.


//********************************************************************************       
//                           CALIBRE DRC PROGRAM		         	    
//********************************************************************************       


//=================================================================================
//|                                                                               |
//|  0.065um Calibre DRC rule file for                                            |
//|                                                                               |
//|                                                                               |
//|       SMIC:          65nm Logic Salicide 1.2/1.8/2.5/3.3V Low Leakage and     |
//|                          1.0/1.8/2.5/3.3V Generic Design Rules                |
//|                                                                               |
//|       Doc. No:       TD-LO65-DR-2001   Doc.Rev:14.1R  Tech Dev Rev: 1.9       |
//|                                                                               |
//|                                                                               |
//|                                                                               |
//|                                                                               |
//|       SMIC Technologies                                                       |
//|                                                                               |
//|===============================================================================|
//|                                                                               |
//|    DISCLAIMER                                                                 |
//|                                                                               |
//|   SMIC hereby provides the quality information to you but makes no claims,    |
//| promises or guarantees about the accuracy, completeness, or adequacy of the   |
//| information herein. The information contained herein is provided on an "AS IS"|
//| basis without any warranty, and SMIC assumes no obligation to provide support |
//| of any kind or otherwise maintain the information.                            |
//|                                                                               |
//|   SMIC disclaims any representation that the information does not infringe any|
//| intellectual property rights or proprietary rights of any third parties.SMIC  |
//| makes no other warranty, whether express, implied or statutory as to any      |
//| matter whatsoever, including but not limited to the accuracy or sufficiency of|
//| any information or the merchantability and fitness for a particular purpose.  |
//| Neither SMIC nor any of its representatives shall be liable for any cause of  |
//| action incurred to connect to this service.                                   |
//|                                                                               |
//|===============================================================================|
//|                                                                               |
//|    STATEMENT OF USE AND CONFIDENTIALITY                                       |
//|                                                                               |
//|   The following/attached material contains confidential and proprietary       |
//| information of SMIC. This material is based upon information which SMIC       |
//| considers reliable, but SMIC neither represents nor warrants that such        |
//| information is accurate or complete, and it must not be relied upon as such.  |
//| This information was prepared for informational purposes and is for the use by|
//| SMIC's customer only. SMIC reserves the right to make changes in the          |
//| information at any time without notice.                                       |
//|   No part of this information may be reproduced, transmitted, transcribed,    |
//| stored in a retrieval system, or translated into any human or computer        |
//| language, in any form or by any means, electronic, mechanical, magnetic,      |
//| optical, chemical, manual, or otherwise, without the prior written consent of |
//| SMIC. Any unauthorized use or disclosure of this material is strictly         |
//| prohibited and may be unlawful. By accepting this material, the receiving     |
//| party shall be deemed to have acknowledged, accepted, and agreed to be bound  |
//| by the foregoing limitations and restrictions. Thank you.                     |
//|                                                                               |
//|===============================================================================|
//|                                                                               |
//|   This file includes SVRF/TVF Technology under license by Mentor Graphics     |
//| Corporation.  "SVRF/TVF Technology" shall mean Mentor Graphics' Standard      |
//| Verification Rule Format ("SVRF") and Tcl Verification Format ("TVF")         |
//| proprietary syntaxes for expressing process rules.  You shall not use SVRF/TVF|
//| Technology unless you are a Mentor Graphics customer with a license to use the|
//| applicable Mentor Graphics software. The exact terms of your obligations and  |
//| rights are governed by your respective license.  You shall not use SVRF/TVF   |
//| Technology except: (a) for your internal business purposes and (b) for use    |
//| with Mentor Graphics' Calibre tools. All SVRF/TVF Technology constitutes or   |
//| contains trade secrets and confidential information of Mentor Graphics or its |
//| licensors. You shall not make SVRF/TVF Technology available in any form to any|
//| person other than your employees and on-site contractors, excluding Mentor    |
//| Graphics competitors, whose job performance requires access and who are under |
//| obligations of confidentiality.                                               |
//|                                                                               |
//|===============================================================================|
//|                                                                               |
//| -. Skip the following rules:                                                  |
//|	  1)	  Current Density Rule						  |
//|                                                                               |
//|===============================================================================|
//|                                                                               |
//| Validated with Calibre version      2009.4_16.13                              |
//|                                                                               |
//| Revision History :                                                            |
//|                                                                               |
//|   Rev         Date          Who                      What                     |
//|-------------------------------------------------------------------------------------------------------------------------
//|V3.5.4=V1.9_0R  19-Mar-2012  Hu_Tang 1.delete Convention_FLT_NW,Convention_BAD_INST,PR_1~PR_9
//|                                        delete the codes for old seal ring rules
//|                                        add codes for new seal ring and guard ring rules
//|                                        Add definition for new layer "MARKS"
//|                                        Distinguish datatype for "MARKG" and add new definition "MARKG = MARKGi OR MARKS"
//|                                        modify the definition for V1_slot~V5_slot,V1ia~V5ia,V1~V5,TV1,TV2
//|                                        delete the definition for TV1_slot,TV2_slot,SCT,CT_slot
//|                                        modify Vn_1,TV1_1,TV2_1,UTV2_1,TV2_1,CT_1
//|                                     2.update VTNH_2,VTPH_2,,VTPH_6, VTPH_7, VTNH_6, VTNH_7,LVN_2,LVP_2, 
//|                                     3.update DG_5,DG_4,TG_4,DG_12,TG_5,TG_13,TG_3
//|                                       delete DG_7,TG_8
//|                                       add DG_13,TG_14
//|                                     4.update RDLPA2_5,RDL_2b, RDL_2c
//|                                     5.Change from "NOT EXCLU" into  "NOT INSIDE EXCLU" in layer definition
//|                                     6.delete NC and PC rule codes
//|                                     7.Update DNW.3
//|                                       DNW.6_R rename from DNW_NOTE.1 
//|                                       DNW.7_R rename from DNW_NOTE.2
//|                                     8.update NLL_6_8,NLH_6_8,NLHT_6_8,PLL_6_8,PLH_6_8,PLHT_6_8
//|                                       delete NLL_5,NLH_5,PLH_5,PLL_5,NLHT_5,PLHT_5
//|                                       change NLL_9 rule No to NLL_10
//|                                       change NLL_10 rule No to NLL_11
//|                                       change PLL_9 rule No to PLL_10
//|                                       change PLL_10 rule No to PLL_11
//|                                       change NLH_9 rule No to NLH_10
//|                                       change NLH_10 rule No to NLH_11
//|                                       change PLH_9 rule No to PLH_10
//|                                       change PLH_10 rule No to PLH_11
//|                                       add NLL_12,PLL_12,NLH_12,PLH_12
//|                                       change the rule number for NLH,NLHT,PLH,PLHT rules
//|                                     9.interchange SN.5 and SN.6 rule No, 
//|                                       update SN_6_8,SP_6_8
//|                                       change SP_12 rule No to SP_13
//|                                       update SN_10,SP_5,SN_5
//|                                       add SN_12,SP_12
//|                                     10.delete NW_NOTE.1,NW_NOTE.5
//|                                        add NW_7a,
//|                                        update NW_6,NW_7b
//|                                     11.PSUB_9_R rename from PSUB_note.6 
//|                                        PSUB_10_R rename from PSUB_note.1a/1b
//|                                        PSUB_11_R rename from PSUB_note.2
//|                                        PSUB_12_R rename from PSUB_note.3
//|                                        update PSUB_10,PSUB_12,PSUB_8,PSUB_2
//|                                     12.delete HR,PDRF all codes
//|                                     13.update GT_7a,GT_11,GT_8,
//|                                        add GT_7b_R,GT_7c_R,GT_3c_R
//|                                     14.delete rule EFU.9
//|                                     15.delete 13R HRP_9,HRP_10,HRP_11
//|                                        rename from 13R HRP_2 to 14R HRP_4,
//|                                        rename from 13R HRP_3 to 14R HRP_5
//|                                        rename from 13R HRP_4 to 14R HRP_6
//|                                        rename from 13R HRP_5 to 14R HRP_7
//|                                        rename from 13R HRP_6 to 14R HRP_8
//|                                        rename from 13R HRP_7 to 14R HRP_9
//|                                        rename from 13R HRP_8 to 14R HRP_10
//|                                        add 14R HRP_11,HRP_12,HRP_1,HRP_2,HRP_14
//|                                     16.delete LD.1b,LD.5b,LD_9,LD_12
//|                                        update LD_6,LD_7
//|                                        rename from LD.8 to LD.8a and update the codes.
//|                                        rename from LD.10 to LD.9
//|                                        rename LD_11 from LD_13
//|                                        add LD_8b,LD_10,LD_12
//|                                     17.update RESAA_1,RESAA_7,RESAA_10,RESAA_3,RESAA_5
//|                                        add RESAA_9
//|                                     18.change rule number from RNWAA_* into RESNWAA_*
//|                                        update RESNWAA_7,RESNWAA_8,RESNWAA_9
//|                                        add RESNWAA_11
//|                                        add RESNWAA_10
//|                                     19.change rule number from RNWSTI_* into RESNWST_*
//|                                        update RESNWST_8,RESNWST_6,RESNWST_7,RESNWST_4,
//|                                     20.add RESP1_8,RESP1_9,RESP1_10
//|                                        update RESP1_1,RESP1_3,RESP1_5,RESP1_6
//|                                     21.add layer definition for NPR1 and ESD1
//|                                     22.update AA_10a,AA_2a,
//|                                        add AA_10b_R
//|                                        change rule number AA_Note2 into AA_10c_R.
//|                                     23.remane CT_7->CT_7a,CT_8->7b,
//|                                        update CT_1, CT_2b, CT_10,CT_7a_7b,
//|                                        delete CT_5b
//|                                     24.rename M1_Note4_l/M1_Note4_h ->M1_6e_min_R/M1_6e_max_R
//|                                        delete M1_DUM38
//|                                        rename Mn_Note5_l/M1_Note5_h ->Mn_6e_min_R/M2_6e_max_R
//|                                        delete Mn_DUM38
//|                                        update M1_6b,Mn_6b,M2_4,
//|                                        change the rule number for M1_7
//|                                     25.delete V1_7,V1_8
//|                                        rename V1_3->V1_3a,V1_4->V1_3b,V1_5->V1_5a,V1_6->V1_5b
//|                                        delete Vn_7,Vn_8
//|                                        rename Vn_3->Vn_3a,Vn_4->Vn_3b,Vn_5->Vn_5a,Vn_6->Vn_5b
//|                                        update Vn_Note1
//|                                        rename Vn_11_12_R from Vn_Note1
//|                                     26.All TV1a.*  and TM1a.* rule rename to TV1.* and TM1.* rule
//|                                        rename TV1a.2->TV1.2a,TV1a_3_4_7->TV1_3a_3b,
//|                                        delete TV1a_5_6_8,
//|                                        Add TV1.2b_R,TV1_5
//|                                     27.All TV2a.*  and TM2a.* rule rename to TV2.* and TM2.* rule
//|                                        rename TV2a.2->TV2.2a,TV2a_3_4_7->TV2_3a_3b,
//|                                        delete TV2a_5_6_8,
//|                                        Add TV2.2b_R,TV2_5
//|                                     28.update MTT2 and UTV2 rules
//|                                     29.rename PA_Note* to PA_*_R
//|                                     30.add codes for SRAM rules and dummy check rules.
//|                                     31.delete "* NOT INSIDE INST" in some general rules in order to check SRAM area also.
//|                                     32.distinguish the data type for all layers
//|                                        update the definition for CT,GATE,Vn,TV1,TV2
//|                                     33.FOR SWITCH:
//|                                        delete the switch "ALPA_drawn","Vnote_check","DRC UNSELECT CHECK"
//|                                        add the switch "BORDER_CHECK" for BORDER rules
//|                                        add the switch "Recommended_rules_CHECK" and "Guidelines_rules_CHECK" for recommended rules and guidelines rules
//|                                     34.update the format for the whole runset
//| -------  -------------  -----------  ----------------------------------------------------------------------------------------------------------------------|
//|  3.5.3    29-June-2011   Zhitao Chen Remove "INSIDE OF LAYER NWi" in NW_NOTE.5|
//|                                       Optimize description for choice GBD.    |
//|  3.5.2    24-June-2011   Zhitao Chen Optimize wide metal space check algorithm|
//|  3.5.1    14-June-2011   Zhitao Chen NW_NOTE.6 ==> NW_NOTE.5, 0.25=>0.23 .    |
//|  3.5      11-June-2011   Zhitao Chen Split DFM rules into another runset.     |
//|  3.4      1-June-2011    Zhitao Chen Copied from old file first.              |
//|                                       Then modified for number of metals.     |
//|                                      Remove PI rule. Add RDLPA2_4/5 ALF_7.    |
//|                                      RDL_4 updated.                           |
//|                                      AA_10a and AA_Note2 25% changed to 23%.  |
//|                                      M1/Mn_DUM38 TM1/2_DUM14 added.           |
//|                                      PSUB_NOTE.6 added.                       |
//|                                      Fix confusing of <0.5 and <=0.5 in       |
//|                                       V1_Note and Vn_Note1.                   |
//|                                      Add OPPOSITE option in SN_2 and SP_2.    |
//|                                      Change Vnote_check_No to Vnote_check YES.|
//|                                      NW_NOTE.6 default changed to checked.    |
//|                                      Implement PA_Note1.                      |
//|                                      PA_Note1/2/3 default changed to checked. |
//|                                      DG_12/TG_13 0.24 => 0.33 in SD direction.|
//|                                      Update CT_1 CT_10 RDV_2 for seal ring.   |
//|                                       Add seal ring rules SEAL_*. (GSEAL)     |
//|                                      Exclude MOM in DFM5.                     |
//|                                      Add V1_10/Vn_10.                         |
//|                                      Remove 55nm option.                      |
//|                                                                               |
//|*******************************************************************************|
//|                                                                               |
//| Old File Name: SmicDR13R2R_cal65_mixlog_sali_p1mt10_2tm_10182533_IPlevel.drc  |
//|                                                                               |
//|  3.3      22-April-2011  Zhitao Chen DFM Priority2 default changed to NO.     |
//|                                      Density rules AA_Note2 GT_Note3 relaxed. |
//|                                      M1_2* Mn_2* updated following document.  |
//|                                       Optimize coding of M1_2c and Mn_2c.     |
//|                                      DFM1a_2a implemented, GT_4a renamed GT_4.|
//|                                      Move GT_4b to DFM1b_2b Priority1.        |
//|                                      DFM4 implemented.                        |
//|                                      DFM18 (Priority2) removed. That's because|
//|                                       it's difficult to implement it correctly|
//|                                       which is limited by Calibre DRC tool.   |
//|                                      DFM21 code updated following discussion  |
//|                                       with DFM rule owner Daniel Lu.          |
//|                                      Move TV1a_2b TV2a_2b to DFM22 priority2. |
//|                                      DFM23-25 added as Priority2.             |
//|                                       (more strict rules than NW_4/6/7)       |
//|                                      NW_5 implemented back.                   |
//|                                      Create option ALLOW_V01 default NO.      |
//|                                       It controls whether allow 0.1 sized via.|
//|                                      Update and fix TM1 and TM2 space rules.  |
//|                                      Mn_Note4(n=2...8) renamed to Mn_Note5.   |
//|                                       Coding of LD_13 optimized.              |
//|                                                                               |
//|  3.2      18-April-2011  Zhitao Chen Update E-fuse rules EFU_*.               |
//|                                      Update LDMOS rules LD_1a/b, LD_5a/b.     |
//|                                      GT_11 RESP1_2 updated for HRP false alarm|
//|                                      Mixed signal rules added, except MIM.    |
//|                                        NWRES AA/STI rules are off by default. |
//|                                      TM2DUM_Note2 renamed to TTM2_14.         |
//|                                      Convention_BPMO and BAD_IMP removed.     |
//|                                                                               |
//|*******************************************************************************|
//|                                                                               |
//| Old File Name:  SmicDR13R_cal65_log_sali_p1mt10_2tm_10182533_IPlevel.drc      |
//|                                                                               |
//|  3.1.c    05-April-2011  Zhitao_Chen Add Calibre version for validation above.|
//|                                        Default voltage choice changed to 1825 |
//|                                        Add RESAA_10.                          |
//|                                        PSUB_5/PSUB_NOTE.5 for 65nm/55nm.      |
//|                                        M1_Note4 and Mn_Note4 updated.         |
//|                                        SINGULAR removed from SN_1/2 SP_1/2.   |
//|                                        Description of potential changed to net|
//|                                        Description DG_5/6 TG_6 LD_6 updated.  |
//|                                        RDLPA2_2 10 --> 5. BD_1 BD_2 BD_3 added|
//|                                        INDMY/MARKF/MARKG disables from rules: |
//|                                          TM2a_7, TM2b_8.                      |
//|                                        Max metal width 8-->12.                |
//|                                        TM1a_6 TM1b_6 & M1/Mn density updated. |
//|                                        This is IP level runset, it follows    |
//|                                          stricter value from 10R to 13R.      |
//|                                          See table in attachment of DR doc.   |
//|                                        Top via array rules implemented.       |
//|                                                                               |
//|  3.1.b    09-Mar-2011    Carolyn Y   Modify AADUM_9_19(add "AADUM cross NW is |
//|					   not allow").				  |
//|  3.1.a    25-Feb-2011    Carolyn Y   DR update 13R_v3(temp) :		  |
//|					 1.Modified DNW.3(1.0->0.4),deleted DNW.6.|
//|					 2.Modified AADUM_20_2, PODUM_20_23(add   |
//|					   MARKF&MARKG).			  |
//|					 3.Added PSUB_NOTE.5 for 55nm technology. |
//|					 4.Changed LDAA_? rule NO. to LD_? .	  |	
//|					   Splited LDAA_1->LD_1a&LD_1b,		  |
//|					   Splited LDAA_5->LD_5a&LD_5b.		  |
//|					 5.Added Mn.2b, Modified TM1b_2b/TM2b_2b  | 
//|					   (parallel segment 2um->0.4um).         |
//|					 6.Modified Mn_6a(exclude INDMY area),    |
//|					   Mn_6cMn_6c(exclude INDMY area,30%->40%).|
//|   3.0     15-Feb-2011    Carolyn Y   Merge DFM rules.			  |
//|					 Delete DFM.3, DFM.7, DFM.8.		  |
//|					 Add DFM.21(Priority1).			  |
//|					 Modify LDAA_5(transistors->channel gate) |
//|					 Optimize Vn_Note 			  | 
//|   2.2     19-Nov-2010    Seek Rui    Correct NC_3;                            |
//|                                      Optimize Vn_Note.                        |
//|                                      Optimize Via_slot defination.            |
//|   2.1     29-Oct-2010    Seek Rui    Modify PSUB_NOTE.3,CT_6,GT_5:            |
//|                                         these rules will not report error in  |
//|                                         INDMY area.                           |
//|                                      Delete Vn_Note2.                         |
//|                                      Add a note for "VIRTUAL CONNECT".        |
//|   2.0     07-Oct-2010    Carolyn Y   DR update to 12R :      		  |
//|					 Add GT.Note4 and add a switch for 55nm;  |
//|					    Mn.6b&c; LDMOS rule.		  |
//|					 Modify SAB.1/2(0.36->0.40).		  |
//|					    Vn.4&7(0.025->0.03),Vn.6&8(0.01->0.02)|
//|					    DNW.2(4.0->3.5), DNW.4(1.0->0.4),	  |
//|					    DNW.5(3.0->2.5).			  |
//|					    SAB.1/SAB.2(0.36->0.40).		  |
//|					    HR.5/HR.6/HR.8(add opposite), NLHT.5. |
//|					    AA.4, AA.7, GT.5, NLHT_6_8, PLHT_6_8, |
//|					    Convention_BPMO (exclude LDMOS check).|
//|					 Optimize Vn_slot, GVn.			  |
//|					    The option of IO voltage.		  |
//|*******************************************************************************|
//| Old File Name :  SmicDR11R_cal65_log_sali_p1mt8_2tm_10182533.drc              |
//|   1.3     03-Sep-2010    Seek Rui    Correct Vn.Note2.                        |
//|   1.2     28-Jul-2010    Seek Rui    Add SRAM block layer EXDRC.              |
//|                                      Update ALPA rules for short violation,   |
//|                                         and set opition for ALPA check.       |
//|                                      Modify on GT_6, no need to check for     |
//|                                                             L shape poly.     |
//|                                      Merge Vn_Note1a & Vn_Note1b to Vn_Note.  |
//|   1.1     20-Jul-2010    Seek Rui    Modify the runset grid 0.005->0.001.     |
//|                                      Set opition for Vn Note check, default off|
//|                                      Opitimize on Vn.Note, wide metal with    |
//|                                        no via will also reported by this rule.|
//|   1.0     16-Jul-2010    Seek Rui    Opitimize AA_2b: Avoide false error      |
//|                                                   coursed by AA crossing DG/TG|
//|                                                TTM2_10: Redefine the active   |
//|                                                         device and native     |
//|                                                         device for this check.|
//|                                     Modify with DR update to 11R:             |
//|                                      Layer EXCLU will be regard as NO DRC area|
//|                                      Add layers:                              |
//|                                              HR(34:0),EFUSE(81:2),VARJUN(94:0)|
//|                                           PDRF(104:0),DMPNP(134:0),DSTR(138:0)|
//|                                              M1R(171:0)~M8R(178:0),TM1R(201:0)|
//|                                                       TM2R(202:0),MARKG(189:0)|
//|                                                    MOMDMY(211:1), DTDMY(191:3)|
//|                                      Opitimize defination:                    |
//|                                        HVNW: NW INTERACT TG->NW NOT OUTSIDE TG|
//|                                        MVNW: NW INTERACT DG->NW NOT OUTSIDE DG|
//|                                        EFU : GT INTERACT GTFUSE->GT INTERACT EFUSE |
//|                                        GMn : Mn TOUCH HMn->(Mn TOUCH HMn) AND MARKG|
//|                                      Add rules:                               |
//|                                        DNW_6,DNW_NOTE.2,PSUB_NOTE.3,          |
//|                                        VTNH_8,VTPH_8,LVN_8,LVP_8,DG_7,DG_8,   |
//|                                        DG_9,DG_10,DG_11,DG_12,TG_8,TG_9,TG_10 |
//|                                        TG_11,TG_12,TG_13,GT.13;               |
//|                                        HR rules, PDRF rules;
//|                                        ALPA rules, and set a opition for it;  |
//|                                        V1_Note.a,V1_Note.b,Vn_Note1.a,        |
//|                                        Vn_Note1.b,Vn_Note2,                   |
//|                                        RDV_5,RDL_4
//|                                      Modify rules:                            |
//|                                        AA_2a : 0.12->0.11;                    |
//|                                        NW_1/NW_3: 0.32->0.36;                 |
//|                                        NW_6/NW_7: 0.47->0.72;                 |
//|                                        PSUB_1/PSUB_4: 0.32->0.36;             |
//|                                        VTNH_6/VTNH_7: 0.20->0.185;            |
//|                                        VTPH_6/VTPH_7: 0.20->0.185;            |
//|                                        LVN_6/LVN_7: 0.20->0.185;              |
//|                                        LVP_6/LVN_7: 0.20->0.185;              |
//|                                        DG_4/TG_4:Check poly direction enclose;|
//|                                        DG_5/TG_5:Check pattern outside DTDMY; |
//|                                        GT_5: 0.12->0.115;                     | 
//|                                        GT_6: 0.10->0.14;                      |
//|                                        GT_11: Check excpet MOM area;          |
//|                                        NLL_8/NLH_8/NLHT_8/PLL_8/PLH_8/PLHT_8/ |
//|                                        SN_8/SP_8: 0.17->0.16;                 |
//|                                        CT_5: 0.03->0.015;                     |
//|                                        CT_6: 0.02->0.01;                      |
//|                                        Vn.2b: vias' space < 0.15um will be    |
//|                                               regarded as via array.          |
//|                                        RDL_1: 1.5->3.0;                       |
//|                                        RDL_2a: 1.5->2.0;                      |
//|                                        PSUB_Note2/Mn_Note4/TTM2_10:           |
//|                                               No need check for inductor area;|
//|                                      Delete rules:                            |
//|                                        NW_NOTE.5;                             |
//|*******************************************************************************|
//| Old File Name :  SmicDR10R_cal65_log_sali_p1mt8_2tm_10182533.drc              |
//|   1.1     18-Mar-2010     Seek Rui   Add a opition for NW_NOTE.6,             |
//|                                          default to not check.                |
//|   1.0     12-Mar-2010     Seek Rui   Delete AADUM_24,PODUM_19,PODUM_21,       |
//|                                             PODUM_28,MnDUM_6,MnDUM_8,TM1DUM_6 |
//|                                             TM1DUM_8,TM2DUM_6,TM2DUM_8,       |
//|                                             TM2DUM_Note1.                     |
//|                                      Add TTM2_5,TTM2_10,TTM2_13.              |
//|                                      Modify PA_Note2, NW_3, NW_4:             |
//|                                             Waive corner error.               |
//|                                      Modify TV1b_9,TV2b_9:                    |
//|                                             Waive error in Lmark/Fuse_GR area.|
//|   0.3     05-Mar-2010    Carolyn Y   Modify AADUM_20_23/PODUM_20_23 : delete  |
//|					      DUMBA,DUMBP check.		  |
//|					 Delete GT_13.				  |
//|   0.2     03-Mar-2010     Seek Rui   Modify AA_8: 0.054->0.038.               |
//|                                      Delete rule check of AADUM_11,AADUM_13,  |
//|                                           AADUM_17,AADUM_18,PODUM_11,PODUM_13,|
//|                                           PODUM_17,PODUM_18,MnDUM_1_2,        |
//|                                           MnDUM_3_4,MnDUM_6,MnDUM_7.          |
//|                                      Delete AADUM to GTDUM space check in GT_4|
//|                                      Add AADUM_19,AADUM_21,AADUM_23,AADUM_24, |
//|                                          PODUM_19,PODUM_21,PODUM_23,PODUM_24, |
//|                                          PODUM_25,PODUM_28,MnDUM_6,MnDUM_8,   |
//|                                          TM1DUM_6,TM1DUM_8,TM2DUM_6,TM2DUM_8, |
//|                                          TM2DUM_Note1,TM2DUM_Note2.           |
//|                                      Add GT_13, GT area rule.                 |
//|                                      Add layer STSRAM(60:1),DNSRAM(60:2),     |
//|                                         UDSRAM(60:3),DPSRAM(60:4),RFSRAP(60:5)|
//|   0.1     25-Feb-2010     Seek Rui   Update DRC following 10R:                |
//|                                      Modify rules:                            |
//|                                       1.NLL_6_8/NLH_6_8/PLL_6_8/PLH_6_8/SN_5_8|
//|                                         /SP_6_8: value change on NLL_8/NLH_8/ |
//|                                         PLL_8/PLH_8/SN_8/SP_8, 0.20->0.17.    |
//|                                       2.AA_9: modify description, drc will not|
//|                                         report error when the N+AA inside DNW.|
//|                                       3.Update dummy check following dummy    |
//|                                         note.                                 |
//|                                     Add rules:                                |
//|                                       1.GT_Note2.                             |
//|                                     Delete the opition of dummy rules.        |
//|*******************************************************************************|
//| Old File Name :  SmicDR9R_cal65_log_sali_p1mt8_2tm_10182533.drc               |
//|   0.1     08-Feb-2010     Seek Rui   Update DRC following 9R:                 |
//|                                      Modify rules:                            |
//|                                       1.AA_10 density : [30%,75%]->[25%,75%]  |
//|                                       2.GT_7 density : [15%,1]->[10%,70%]     |
//|                                       3.DNW_2 value: 3->4; DNW_3 value: 2->1; |
//|                                         DNW_4 value: 2->1; DNW_5 value: 4->3. |
//|                                       4.DNW_Note1: Delete DNW not enclosure   |
//|                                                    NW hole check.             |
//|                                       5.PSUB.3c: Modify on description.       |
//|                                       6.GT_1c: This rule will check device    |
//|                                                that "NOT ITERACT UNDERPL".    |
//|                                       7.CT.2b,V1.2b,Vn.2b: Modify the space   |
//|                                           that CT/Vias should be regarded as  |
//|                                           in the same array, 0.16->0.15.      |
//|                                       8.TV2b_2->TV2b_2a.                      |
//|                                       9.PR_1: Modify in description.          |
//|                                      10.PR_2 value: 0.36->0.28.               |
//|                                      Add rules:                               |
//|                                       1.AA_10b, AA_Note.2.                    |
//|                                       2.NW_Note.3, NW_Note.6.                 |
//|                                       3.NW_Note.5: set opition for it,        |
//|                                                  default to not check.        |
//|                                       4.GT_1f, GT_Note.3.                     |
//|                                       5.M1_Note.4, Mn_Note.4.                 |
//|                                       6.TM2b.8a, TM2b.8b.                     |
//|                                       7.TV2b_2b.                              |
//|                                       8.Convention_BAD_INST.                  |
//|                                       9.Dummy check in normal rule refer to   |
//|                                           AA_Note.3, GT_Note.4, MnDUM_Note.2, |
//|                                           TM1DUM_Note.2, TM2DUM_Note.2.       |
//|                                      10.Recommand dummy rule check and set    |
//|                                           opition for it, default to check.   |
//|                                      Add layers:                              |
//|                                           UNDERPL(125:5),INST(60)             |
//|                                      Delete layers:                           |
//|                                           OPCBA(100),OPCBP(101),OPCBM(102).   |
//|                                                                               |
//|*******************************************************************************|
//| Old File Name :  SmicDR8R_cal65_log_sali_p1mt8_2tm_10182533.drc               |
//|   1.1     18-Nov-2009    Seek Rui    Modify the defination of PW_INNW,NW_DNW. |
//|                                          in order to correct DNW_NOTE.1       |
//|                                      Add Skew rule.                           |
//|   1.0     07-May-2009    Seek Rui    DR update to 8R:                         |
//|                                      Delete Rules:                            |
//|                                       1. VTNH.3,VTPH.3,LVN.3,LVP.3.           |
//|                                       2. M1.3a,Mn.3a,TM2.7b                   |
//|                                       3. DNW_NOTE.2                           |
//|                                      Modify Rules:                            |
//|                                       1. DRC will only check parallel edges on|
//|                                          width rules and space rules on space |
//|                                          rules of same layer.                 |
//|                                       2. Change rule No. M1.2->M1.2a;M1.3b->M1.2b|
//|                                            M1.3c->M1.2c; M1.8->M1.3; Mn.2->Mn.2a;|
//|                                            Mn.3b->Mn.2b; Mn.3c->Mn.2c; Mn.8->Mn.3|
//|                                            TM2a.8->TM2a.6; TM2b.7->TM2b.6;    |
//|                                            TM2b.8->TM2b.7.                    |
//|                                       3. Define AA_act & GT_act to indentify  |
//|                                          true AA/GT from AADUM/GTDUM.         |
//|                                       4. Define CT_slot,Vn_slot,TV1_slot,     |
//|                                          TV2_slot, to indentify sealring slots|
//|                                       5. DNW2: 6.0->3.0.                      |
//|                                       6. GT.3b: 0.14->0.4; GT.5: 0.15->0.12.  |
//|                                       7. CT.3: 0.07->0.065; CT.4a: 0.055->0.05|
//|                                       8. M1.2b: 0.18->0.16; M1.4 0.036->0.027;|
//|                                          Mn.4: 0.045->0.035; TM1a.4: 0.7->0.6;|
//|                                          TM2a.4: 0.7->0.6; V1.4: 0.03->0.025; |
//|                                          Vn.4: 0.03->0.025.                   |
//|                                       9. PA.1: 1.5->1.0; RDV.4: 1.5->1.0.     |
//|                                      10. PR.1: 0.11->0.09.                    |
//|                                      11. Add command "OUTSIDE ALSO" in PA.1.  |
//|                                      12. Convention_BAD_IMP: AA->AAi,SN->SNi, |
//|                                                              SP->SPi.         |
//|                                      13. RESAA.8/RESP1.7: Correct false error |
//|                                                        for saliside resistor. |
//|                                      Add Rules:                               |
//|                                       1. TV1b.9,TV2b.9.                       |
//|*******************************************************************************|
//| Old File Name :  SmicDR7R_cal65_log_sali_p1mt10_2tm_10182533.drc              |
//|   1.0     15-May-2009    Seek Rui     DR update to 7R                         |
//|                                       Modify Rules:                           |
//|                                        1. Origion layer M3i~M8i   to M3~M8    |
//|                                                         TM1i/TM2i to TM1/TM2  |
//|                                                         V3i~V7i   to V3~V7    |
//|                                                         TV1i/TV2i to TV1/TV2  |
//|                                        2. M1.2/M1.3a/M1.3b/M1.3c/M2.2/M2.3a/  |
//|                                           M2.3b/M2.3c/NW.3/NW.4 check way in  |
//|                                              order to check the space between |
//|                                              normal M1/M2/NW to the layers    |
//|                                              covered by EXCLU layer           |
//|                                        3. LVN.1/LVN.2/LVP.1/LVP.2 (use normal |
//|                                                   way to check width & space) |
//|                                        4. LVN.1/LVN.2/LVP.1/LVP.2/NC.1/NC.2/  |
//|                                           PC.1/PC.2/VTNH.1/VTNH.2/VTPH.1/VTPH.2/|
//|                                           do not check point touch error      |
//|                                        5. Convention_latchup.a(NW->NWi)       |
//|                                        6. Following DR update:                |
//|                                          AA_2b(0.3->0.21), AA_3b(0.13->0.11)  |
//|                                          RESAA_1(2.0->0.5),RESP1(2.0->0.5)    |
//|                                          NW_4(0.5->0.47), NW_6/NW_7(0.6->0.47)|
//|                                          PSUB_5/PSUB_6/(AA->MOS)&description  |
//|                                          NC_4/NC_5/PC_4/PC_5(0.18->0.12)&description|
//|                                          NC_6/NC_7/PC_6/PC_7(0.27->0.20)&description|
//|                                          VTNH_4/VTNH_5/VTPH_4/VTPH_5/LVN_4/LVN_5/|
//|                                          LVP_4/LVP_5: (0.16->0.12)&description|
//|                                          VTNH_6/VTNH_7/VTPH_6/VTPH_7/LVN_6/LVN_7/|
//|                                          LVP_6/LVP_7: (0.21->0.20)&description|
//|                                          DG_3/DG_5/TG_3/TG_5(AA->MOS)&description|
//|                                          DG_4/DG_6/TG_4/TG_6(0.33->0.24)      |
//|                                          GT_3b&description                    |
//|                                          NLL_7/NLH_7/NLHT_7(NACT->NMOS)&description|
//|                                          PLL_7/PLH_7/PLHT_7(PACT->PMOS)&description|
//|                                          SN_7/SP_7&its description            |
//|                                          SAB_9(0.28->0.20), CT_4b(0.11->0.09) |
//|                                          M1_3a(0.14->0.11)&description        |
//|                                          M1_3b(0.30->0.18)&description        |
//|                                          M1_3c&description                    |
//|                                          V1_3_4_7/Vn_3_4_7(0.04->0.03)        |
//|                                          Mn_3a(0.15->0.12)&description        |
//|                                          Mn_3b(0.30->0.16)&description        |
//|                                          Mn_3c&description                    |
//|                                          M1.6a(35%->20%) M1.6b(75%->80%)      |
//|                                          Mn.6a(35%->20%) Mn.6b(75%->80%)      |
//|                                          TV1a_5_6_8(0.03->0.02)               |
//|                                          TM1a_1/TM1a_2a/TM1a_3(0.42->0.40)    |
//|                                          TM1a_2b&description                  |
//|                                          TM1b_2b/TM1b_2c/TM1b_2d&description  |
//|                                          TV2a_5_6_8(0.03->0.02)               |
//|                                          TM2a_1/TM2a_2a/TM2a_3(0.42->0.40)    |
//|                                          TM2a_2b&description                  |
//|                                          TM2b_2b/TM2b_2c/TM2b_2d&description  |
//|                                          TM2b_5(20->30)                       |
//|                                          TTM2_2b&description                  |
//|                                          the rule name (PA1.n->PA.n)          |
//|                                                        (PA2.n->RDLPA2.n)      |
//|                                       Add Rules                               |
//|                                        1. PA_Note2, PA_Note3                  |
//|                                        2. layer GTFUSE(81;1)&E-FUSE rules     |
//|                                        3. layer MARKF(190)&Alfuse rules       |
//|                                        4. L-Mark Guideline rules              |
//|                                        5. PI Guideline rules                  |
//|                                       Delete TTM2_2c                          |
//|                                                                               |
//|*******************************************************************************|
//| Old File Name :  SmicDR6R_cal65_log_sali_p1mt10_2tm_10182533.drc              |
//|   1.0     19-Mar-2009     Seek Rui    1.Modify PSUB.3b(0.5->0.8).             |
//|                                       2.Modify PSUB.3c(0.5->1.0) and delete   |
//|                                                3.3V in it's description.      |
//|                                       3.Modify Wide metal check               |
//|                                                Use 'WITH WIDTH' to check it.  |
//|                                       4.Add PSUB.3d following DR.             |
//|                                       5.Add opition 'backup' in desity check. |
//|                                       6.Add Latch_up rule.                    |
//|                                       7.Add LVN.3,LVP.3,VTNH.3,VTPH.3         |
//|                                       8.Add overdrive discription in GT.1e    |
//|                                       9.Add opition 'opposite' in GT.5        |
//|*******************************************************************************|
//| Old File Name :  SmicDR5R_cal65_log_sali_p1mt10_2tm_10182533.drc              |
//|   1.0     03-Dec-2008     Seek Rui     DR update to 5R :                      |
//|                                        Add TM1b,TM2b,TV1b,TV2b,TTM2,RDL,PA1,  |
//|                                        PA2,RESAA,RESP1,GT.1e following DR.    |
//|                                        AddE ALPA_drawn NO   //; Customer can use "ALPA_drawn YES" instead of it if your origion layout includes ALPA(83:0)
//|                                        TM1a_6a/TM1a_6b,TM2a_6a/TM2a_6b    |
//|                                        Modify AA_3b(0.14->0.13),AA_10,        | 
//|                                        PSUB.NOTE2                             |
//|                                        VTNH_4/VTNH_5,VTPH_4/VTPH_5,LVP_4/LVP_5|
//|                                        LVN_4/LVN_5(0.18->0.16)                |
//|                                        VTNH_6/VTNH_7,VTPH_6/VTPH_7,LVP_6/LVP_7|
//|                                        LVN_6/LVN_7(0.27->0.21)                |
//|                                        NLL_6,PLL_6,NLH_6,PLH_6,NLHT_6,PLHT_6, |
//|                                        SN_5/SN_6,SP_5/SP_6(0.26->0.24)        |
//|                                        DG_4/DG_6,TG_4/TG_6(check channel along S/D direction)|   
//|                                        CT.3(0.1->0.07)                        |
//|                                        CT_2b,Vn_2b(overunder size 0.075->0.08)|
//|                                        GT_7(add DGTi check density)           |
//|                                        Mn.6(Max.0.82->0.75,Min.0.16->0.30),   |
//|                                        metal desity widow(50->200),step(25->100)|
//|                                        Mn.7 according to DR                   |
//|                                        TM1_4/TM2_4(1->0.7)                    |
//|                                        Add layer RDLVIA,RDLP2,LOGO,INST,OVERPL|
//|                                        Optimize NW.4,NC.4,PC.4 definition     |
//|*******************************************************************************|
//| Old File Name : SmicDR4T_cal65_log_sali_p1mt10_2tm_10182533.drc               |
//|   1.0.d   29-Aug-2008     Carolyn Y    Modify Mn.3a,Mn.3b,AA.3b(">=" -> ">")  |
//|                                        GT.3b(">" -> ">="),                    |
//|                                        Mn.7,CT.2b&Vn.2b(0.110->0.075)         |
//|                                        Add GT.5b(CT on STI is not allowed)    |
//|   1.0.c   07-Mar-2008     Karen Kang   Resolution:1->5			  |
//|   1.0.b   21-Dec-2007     Karen Kang   NLHT.5,PLHT.5,NW.2(1.8->1.6)           |
//|					   PSUB.3c(1.2->0.5),CT_7_8(0.04->0.025)  |
//|					   TMn.3(0.42->0.28)                      |
//|					   metal desity widow(100->50),step(50->25)|
//|					   modify AA.6,AA.7,NLL.7,NLH.7,PLL.7,PLH.7|
//|					   NLHT.7,PLHT.7,SN.4,SP.4,SP.7,SP.9,SP.10|
//|   1.0.a   22-Oct-2007     Lucy Li      DR update to 4T                        |
//|                                        update AA.2b, CT.4a,CT.4b,NC.1,NC.2    |
//|                                        PC.1,PC.2 according to DR              |
//|                                        Modify DG_5,TG_5,GT_8,LDDI_6_8,Mn_8    |
//|*******************************************************************************|
//| Old File Name : SmicDR3T_cal65_log_p1mtx_sail.drc                             |
//|   1.2     21-Dec-2006     Lucy Li      Add RDL rules                          |
//|                                                                               |
//|   1.1     17-Nov-2006     Lucy Li      DR update to 3T, update TG&DG definition|
//|                                                                               |
//|*******************************************************************************|
//| Old File Name : SmicDR2T_cal65_log_p1mtx_sail.drc                             |
//|                                                                               |
//|   1.2     13-Apr-2006     Shirleyc     Modify runset based on TD suggestion   |
//|   1.1     01-Dec-2005     Jenny Jiang  DR update to 2T.Text and description   |
//|                                        change for all sections.               |
//|                                                                               |
//|*******************************************************************************|
//| Old File Name :  SmicDR1T_cal65_log_p1mtx_sail.drc                            |
//|                                                                               |
//|   1.4     01-Apr-2005     Drifty Yang   Modify VT1_4_5_8 for different metals |
//|   1.3     18-Jan-2005     Rimbo Yan     modified CT.13                        |
//|   1.2     11-Jan-2005     Rimbo Yan     modified AA.2a ,AA.2b                 |
//|   1.1     05-Jan-2005     Rimbo Yan     DR update to 1T; add metals number    |
//|                                         select ; add IO1 ,IO2  select         |
//|                                                                               |
//|*******************************************************************************|
//|   1.1     06-Sep-2004     Rimbo Yan              Initial Version              |
//|                                                                               |
//|===============================================================================|





//*************************************
//     DIRECTIVE SECTION
//*************************************

LAYOUT PRIMARY "mostest"
LAYOUT PATH "mostest.gds"
LAYOUT SYSTEM GDSII

DRC RESULTS DATABASE "drc_CAL.OUT" ASCII
DRC SUMMARY REPORT "drc_CAL.SUM" HIER

PRECISION       1000
RESOLUTION      1

FLAG ACUTE YES
FLAG NONSIMPLE YES
FLAG SKEW YES
FLAG OFFGRID YES

skew_edge_check {
           @Skew edge check
           DRAWN SKEW }
// does not check layers that do not appear in other rule
// checks used in the run

VARIABLE OFF_GRID 1

NW_offgrid
{
  @ Drawn NW off-grid
  OFFGRID NW OFF_GRID
}

DNW_offgrid
{
  @ Drawn DNW off-grid
  OFFGRID DNW OFF_GRID
}

SAB_offgrid
{
  @ Drawn SAB off-grid
  OFFGRID SAB OFF_GRID
}

AA_offgrid
{
  @ Drawn AA off-grid
  OFFGRID AA OFF_GRID
}

SN_offgrid
{
  @ Drawn SN off-grid
  OFFGRID SN OFF_GRID
}

SP_offgrid
{
  @ Drawn SP off-grid
  OFFGRID SP OFF_GRID
}

GT_offgrid
{
  @ Drawn GT off-grid
  OFFGRID GT OFF_GRID
}

DG_offgrid
{
  @ Drawn DG off-grid
  OFFGRID DG OFF_GRID
}

TG_offgrid
{
  @ Drawn TG off-grid
  OFFGRID TG OFF_GRID
}

CT_offgrid
{
  @ Drawn CT off-grid
  OFFGRID CT OFF_GRID
}

M1_offgrid
{
  @ Drawn M1 off-grid
  OFFGRID M1 OFF_GRID
}

V1_offgrid
{
  @ Drawn V1 off-grid
  OFFGRID V1 OFF_GRID
}

M2_offgrid
{
  @ Drawn M2 off-grid
  OFFGRID M2 OFF_GRID
}

V2_offgrid
{
  @ Drawn V2 off-grid
  OFFGRID V2 OFF_GRID
}

M3_offgrid
{
  @ Drawn M3 off-grid
  OFFGRID M3 OFF_GRID
}

V3_offgrid
{
  @ Drawn V3 off-grid
  OFFGRID V3 OFF_GRID
}

M4_offgrid
{
  @ Drawn M4 off-grid
  OFFGRID M4 OFF_GRID
}

V4_offgrid
{
  @ Drawn V4 off-grid
  OFFGRID V4 OFF_GRID
}

M5_offgrid
{
  @ Drawn M5 off-grid
  OFFGRID M5 OFF_GRID
}

V5_offgrid
{
  @ Drawn V5 off-grid
  OFFGRID V5 OFF_GRID
}

M6_offgrid
{
  @ Drawn M6 off-grid
  OFFGRID M6 OFF_GRID
}

TV1_offgrid
{
  @ Drawn TV1 off-grid
  OFFGRID TV1 OFF_GRID
}

TM1_offgrid
{
  @ Drawn TM1 off-grid
  OFFGRID TM1 OFF_GRID
}

TV2_offgrid
{
  @ Drawn TV2 off-grid
  OFFGRID TV2 OFF_GRID
}

TM2_offgrid
{
  @ Drawn TM2 off-grid
  OFFGRID TM2 OFF_GRID
}

DRC EXCLUDE FALSE NOTCH YES

TEXT DEPTH PRIMARY

LAYOUT TOP LAYER TM2i TV2i TM1i TV1i M6i V5i M5i V4i M4i V3i M3i V2i M2i V1i M1i
LVS POWER NAME "?VDD?" "?VCC?"


//************************************
//     INPUT LAYER STATEMENTS
//************************************

LAYER   MAP     10 DATATYPE 0 310
LAYER   AAi     310 12 13      //      Active Area / SDG

LAYER   MAP     10 DATATYPE  1 300
LAYER   AADUM   300     //      Dummy AA layer

LAYER   MAP     14      DATATYPE 0 1101
LAYER   NWi     1101      //      N-Well / N-Tub

LAYER   MAP     16      DATATYPE 0 1102
LAYER   PCi     1102      //      SRAM PMOS

LAYER   MAP     21      DATATYPE 0 1103
LAYER   NCi     1103      //      SRAM Nmos

LAYER   MAP     218      DATATYPE 0 1104
LAYER   LVPi    1104     //      Core 1.0V low Vt PMOS


LAYER   MAP     219      DATATYPE 0 1105
LAYER   LVNi    1105     //      Core 1.0V low Vt NMOS

LAYER   MAP     47      DATATYPE 0 1106
LAYER   VTNHi   1106      //      Core 1.0V high Vt NMOS

LAYER   MAP     46      DATATYPE 0 1107
LAYER   VTPHi   1107      //      Core 1.0V high Vt PMOS

LAYER   MAP     19      DATATYPE 0 1108
LAYER   DNWi    1108      //      Deep Nwell

LAYER   MAP     29      DATATYPE 0 1109
LAYER   DGi     1109      //      Dual Gate

LAYER   MAP     30 DATATYPE 0 410
LAYER   GTi     410     //      Poly Gate, Poly-1, ONO Gate

LAYER   MAP     30 DATATYPE 1 400
LAYER   GTDUM   400     //       Dummy GT layer

LAYER   MAP     34      DATATYPE 0 1110
LAYER	HRi	1110	//	Poly Resistor Implant/POLY N+ doping/N+ P1 Pre-doping

LAYER   MAP     35      DATATYPE 0 1111
LAYER   NLLi    1111      //      NMOS LDD Implant for 1.0V Device 

LAYER   MAP     36      DATATYPE 0 1112
LAYER   NLHi    1112      //      NMOS LDD Implant for 1.8/2.5V Device

LAYER   MAP     37      DATATYPE 0 1113 
LAYER   PLHi    1113      //      PMOS LDD Implant for 1.8/2.5V Device

LAYER   MAP     38      DATATYPE 0 1114
LAYER   PLLi    1114      //      PMOS LDD Implant for 1.0V Device

LAYER   MAP     39      DATATYPE 0 1115 
LAYER	HRPi	1115	//	High Resistance Poly Imp

LAYER   MAP     40      DATATYPE 0 1116
LAYER   SNi     1116      //      N+ S/D Implant

LAYER   MAP     43      DATATYPE 0 1117
LAYER   SPi     1117      //      P+ S/D Implant

LAYER   MAP     44      DATATYPE 0 1118
LAYER   MVPi    1118      //      Low Vt Pmos

LAYER   MAP     45      DATATYPE 0 1119
LAYER   MVNi    1119      //      Low Vt Nmos

LAYER   MAP     48      DATATYPE 0 1120
LAYER   SABi    1120      //      Resist Protect Oxide / Salicide block

LAYER   MAP     50      DATATYPE 0 1121
LAYER   CTi     1121      //      Contact Hole


LAYER   MAP     61 DATATYPE 0 610  
LAYER   M1i     610     //      Metal-1

LAYER   MAP     61 DATATYPE 1 611  
LAYER   M1DUM   611     //      Dummy Metal-1

LAYER   MAP     62 DATATYPE 0 620
LAYER   M2i     620     //      Metal-2

LAYER   MAP     62 DATATYPE 1 621
LAYER   M2DUM   621     //      Dummy Metal-2

LAYER   MAP     63 DATATYPE 0 630
LAYER   M3i     630     //      Metal-3

LAYER   MAP     63 DATATYPE 1 631
LAYER   M3DUM   631     //      Dummy Metal-3

LAYER   MAP     64 DATATYPE 0 640
LAYER   M4i     640     //      Metal-4

LAYER   MAP	64 DATATYPE 1 641
LAYER   M4DUM   641     //      Dummy Metal-4

LAYER   MAP     65 DATATYPE 0 650
LAYER   M5i     650     //      Metal-5

LAYER   MAP     65 DATATYPE 1 651
LAYER   M5DUM   651     //      Dummy Metal-5

LAYER   MAP     66 DATATYPE 0 660
LAYER   M6i     660     //      Metal-6

LAYER   MAP     66 DATATYPE 1 661
LAYER   M6DUM   661     //      Dummy Metal-6

LAYER   MAP     120 DATATYPE 0 1200
LAYER	TM1i	1200	//	Top Metal 1

LAYER   MAP     120 DATATYPE 1 1201
LAYER   TM1DUM  1201    //      Dummy Top Metal 1

LAYER   MAP     122 DATATYPE 0 1220
LAYER	TM2i	1220	//	Top Metal 2

LAYER   MAP     122 DATATYPE 1 1221
LAYER   TM2DUM  1221    //      Dummy Top Metal 2

LAYER   MAP     70      DATATYPE 0 1122
LAYER   V1i     1122      //      Via-1 Hole

LAYER   MAP     71      DATATYPE 0 1123
LAYER   V2i     1123      //      Via-2 Hole

LAYER   MAP     72      DATATYPE 0 1124
LAYER   V3i     1124      //      Via-3 Hole

LAYER   MAP     73      DATATYPE 0 1125
LAYER   V4i     1125      //      Via-4 Hole

LAYER   MAP     74      DATATYPE 0 1126
LAYER   V5i     1126      //      Via-5 Hole

LAYER   MAP     121      DATATYPE 0 1127
LAYER	TV1i	1127	//	Top Via 1

LAYER   MAP     123      DATATYPE 0 1128
LAYER	TV2i	1128	//	Top Via 2

LAYER   MAP     80      DATATYPE 0 1129
LAYER   PA      1129      //      Passivation / Pad

LAYER   MAP     81 DATATYPE 0 810
LAYER   FUSE    810      //      Fuse Window

LAYER   MAP     81 DATATYPE 1 811
LAYER   GTFUSE  811     //      Poly E-Fuse block layer to identify E-Fuse function area

LAYER   MAP     81 DATATYPE 2 812
LAYER   EFUSE   812     //

LAYER   MAP     82      DATATYPE 0 1130
LAYER   PI      1130      //      Polymide passivation layer

LAYER   MAP     85      DATATYPE 0 1131
LAYER   PSUBi   1131      //      Native Mos area

LAYER   MAP     94      DATATYPE 0 1132
LAYER	VARJUN	1132	//	Block Layer to cover all Junction type varactor

LAYER   MAP     95      DATATYPE 0 1133
LAYER   RESNW   1133      //      Dummy Pattern for NWELL Resistor

LAYER   MAP     96      DATATYPE 0 1134
LAYER   RESP1   1134      //      Dummy Pattern for Poly-1 Resistor

LAYER   MAP     97      DATATYPE 0 1135
LAYER   RESAA   1135      //      Dummy Pattern for AA Resistor

LAYER   MAP     90      DATATYPE 0 1136
LAYER   DUMBM   1136      //      Define area to prevent METAL Dummy operation

LAYER   MAP     91      DATATYPE 0 1137 
LAYER   DUMBA   1137      //      Define area to prevent AA Dummy operation

LAYER   MAP     92      DATATYPE 0 1138
LAYER   DUMBP   1138      //      Define area to prevent Poly Dummy operation

LAYER	MAP	93 DATATYPE 0 930
LAYER   VARMOS  930	//	Block Layer to cover all MOS-type varactor

LAYER   MAP     104      DATATYPE 0 1139
LAYER	PDRFi	1139	//	HV PMOS DRIFT implant ( for LDMOS)/P+ P1 Pre-doping

LAYER   MAP     105      DATATYPE 0 1140
LAYER	PWHi	1140	//	P Well for 1.8V device

LAYER   MAP     106      DATATYPE 0 1141
LAYER   NWHi    1141     //      N Well for 1.8V device

LAYER   MAP     109      DATATYPE 0 1142
LAYER	PWHTi	1142	//	P Well for 2.5/3.3V device

LAYER   MAP     110      DATATYPE 0 1143
LAYER   NWHTi   1143     //      N Well for 2.5/3.3V device

LAYER   MAP     114      DATATYPE 0 1144
LAYER   NLHTi   1144     //      NMOS LDD Implant for 2.5/3.3V Device

LAYER   MAP     115      DATATYPE 0 1145
LAYER   PLHTi   1145     //      PMOS LDD Implant for 2.5/3.3V Device

LAYER   MAP     116      DATATYPE 0 1146
LAYER   LVi     1146     //      Block layer for core 1.0V low Vt

LAYER   MAP     125 DATATYPE 0 500
LAYER	TGi	500	//	Tripple Gate

LAYER   MAP     127      DATATYPE 0 1147
LAYER	BORDER	1147	//	Border layer for chip level design

LAYER   MAP     130      DATATYPE 0 1148
LAYER	MDi	1148	//	Passivation 2

LAYER   MAP     132      DATATYPE 0 1149
LAYER   EXCLU   1149     //      Un-DRC region

LAYER   MAP     134      DATATYPE 0 1150
LAYER	DMPNP	1150	//	Parasitic PNP and NPN

LAYER   MAP     137      DATATYPE 0 1151
LAYER   CAPBP   1151     //      Capacitor Dummy

LAYER   MAP     210      DATATYPE 0 1152
LAYER	HRPDMY	1152	//	HRP dummy

LAYER   MAP     138      DATATYPE 0 1153
LAYER	DSTR	1153	//	Diode Marker

LAYER   MAP     165      DATATYPE 0 1154
LAYER   RDLVIAi 1154     //      Via under RDL connecting TM and RDL

LAYER   MAP     166      DATATYPE 0 1155
LAYER   RDLi    1155     //      RDL

LAYER   MAP     167      DATATYPE 0 1156
LAYER   RDLPA2i 1156     //      Passivation 2 for RDL

LAYER   MAP     171      DATATYPE 0 1157
LAYER	M1R	1157	//	Metal-1 Resistor

LAYER   MAP     172      DATATYPE 0 1158
LAYER	M2R	1158	//	Metal-2 Resistor

LAYER   MAP     173      DATATYPE 0 1159
LAYER	M3R	1159	//	Metal-3 Resistor

LAYER   MAP     174      DATATYPE 0 1160
LAYER	M4R	1160	//	Metal-4 Resistor

LAYER   MAP     175      DATATYPE 0 1161
LAYER	M5R	1161	//	Metal-5 Resistor

LAYER   MAP     176      DATATYPE 0 1162
LAYER	M6R	1162	//	Metal-6 Resistor

LAYER   MAP     201      DATATYPE 0 1163
LAYER	TM1R	1163	//	Top metal 1 Resistor

LAYER   MAP     202      DATATYPE 0 1164
LAYER	TM2R	1164	//	Top metal 2 Resistor

LAYER   MAP     26      DATATYPE 0 1165
LAYER   LOGO    1165      //      L Mark AREA

LAYER   MAP     125 DATATYPE 4  515
LAYER   OVERPL  515     //      To block over drive poly

//--------------------------------------------------------------------------------
LAYER   MAP 189 DATATYPE 0 1890
LAYER	MARKGi	1890	//	Guard ring or seal ring area mark layer for DRC
MARKG = MARKGi OR MARKS

LAYER MAP 189  DATATYPE  151  1895
LAYER MARKS 1895
//------------------------------------------------------------------------------------

LAYER   MAP     190      DATATYPE 0 1166
LAYER   MARKF   1166     //      FUSE area mark

LAYER   MAP	60  DATATYPE 0 600
LAYER   INST    600     //      SRAM block layer

LAYER   MAP	60  DATATYPE 1 601
LAYER   STSRAM  601     //	525SPSRAM

LAYER   MAP	60  DATATYPE 2 602
LAYER   DNSRAM  602     //	620SPSRAM

LAYER	MAP	60  DATATYPE 4 604
LAYER   DPSRAM  604	//	974DPSRAM

LAYER   MAP	60  DATATYPE 9 609
LAYER   RFSRAM  609	//	1158DPSRAM

LAYER   MAP     125 DATATYPE 5  512
LAYER   UNDEPL  512	//	Marking block layer for under drive poly logic operation

LAYER   MAP     216 DATATYPE 150 516
LAYER   LDBK    516     //      Identify LDMOS function area and do related

LAYER	MAP	211 DATATYPE 1 2111
LAYER	MOMDMY	2111	//	MOM Dummy layer

LAYER   MAP     215 DATATYPE 0 2150
LAYER   STIDMY  2150

LAYER   MAP     212      DATATYPE 0 1167
LAYER	INDMY	1167	//	Dummy layer for MTT in inductor applications

LAYER	MAP	239 DATATYPE 0 2390
LAYER	EXDRC	2390	//	Dummy layer for unDRC area in SRAM

LAYER   MAP     239 DATATYPE 1 2391
LAYER   EXDFM   2391    //  unDFM check area

LAYER   MAP     151     DATATYPE == 1   781
LAYER   M1DUB   781     // Block layer for M1 dummy operations

LAYER   MAP     152     DATATYPE == 1   782
LAYER   M2DUB   782     // Block layer for M2 dummy operations

LAYER   MAP     153     DATATYPE == 1   783
LAYER   M3DUB   783     // Block layer for M3 dummy operations

LAYER   MAP     154     DATATYPE == 1   784
LAYER   M4DUB   784     // Block layer for M4 dummy operations

LAYER   MAP     155     DATATYPE == 1   785
LAYER   M5DUB   785     // Block layer for M5 dummy operations

LAYER   MAP     156     DATATYPE == 1   786
LAYER   M6DUB   786     // Block layer for M6 dummy operations

LAYER   MAP     193     DATATYPE == 1   789
LAYER   TM1DUB  789     // Block layer for TM1 dummy operations

LAYER   MAP     194     DATATYPE == 1   790
LAYER   TM2DUB  790     // Block layer for TM2 dummy operations

LAYER   MAP     180      DATATYPE 0 1168
LAYER   NODMF   1168      // Block layer for dummy operation on GT/AA/metal

LAYER	MAP	191 DATATYPE 3  1913
LAYER	DTDMY	1913	// Marking layer for different potential AA

//new layer definition
//---------------------------------------------------------------------------------------
LAYER   MAP     57      DATATYPE 0 1169
LAYER   NPR1    1169

LAYER   MAP     41      DATATYPE 0 1170
LAYER   ESD1    1170

LAYER MAP 67   DATATYPE  1    671 
LAYER M7DUM 671
 
LAYER MAP 68   DATATYPE  1    681 
LAYER M8DUM 681
 
LAYER MAP 228  DATATYPE  1   2281 
LAYER STM1DM 2281

LAYER MAP 229  DATATYPE  1   2291 
LAYER STM2DM 2291 


LAYER MAP 67   DATATYPE  0    670 
LAYER M7i   670
 
LAYER MAP 68   DATATYPE  0    680 
LAYER M8i   680

LAYER MAP 228  DATATYPE  0   2280 
LAYER STM1i 2280

LAYER MAP 229  DATATYPE  0   2290 
LAYER STM2i 2290 


M7	= M7i NOT INSIDE EXCLU
M8	= M8i NOT INSIDE EXCLU
STM1    = STM1i NOT INSIDE EXCLU
STM2    = STM2i NOT INSIDE EXCLU

TM1ALL = TM1 OR TM1DUM
TM2ALL = TM2 OR TM2DUM

#IFDEF Type_a
#DEFINE TV1_TM1_CHECK YES
#DEFINE TV2_TM2_CHECK YES
#ENDIF
#IFDEF Type_T
#DEFINE TV1_TM1_CHECK YES
#DEFINE UTV2_MTT2_CHECK YES
#ENDIF

//------------------------------------------------------------------------------------------

V1_slot = ((ENCLOSE RECTANGLE V1i 0.1 0.3) AND MARKG) INTERACT (WITH WIDTH V1i == 0.1)
V2_slot = ((ENCLOSE RECTANGLE V2i 0.1 0.3) AND MARKG) INTERACT (WITH WIDTH V2i == 0.1)
V3_slot = ((ENCLOSE RECTANGLE V3i 0.1 0.3) AND MARKG) INTERACT (WITH WIDTH V3i == 0.1)
V4_slot = ((ENCLOSE RECTANGLE V4i 0.1 0.3) AND MARKG) INTERACT (WITH WIDTH V4i == 0.1)
V5_slot = ((ENCLOSE RECTANGLE V5i 0.1 0.3) AND MARKG) INTERACT (WITH WIDTH V5i == 0.1)

V1_slot_SG = (((ENCLOSE RECTANGLE V1i 0.09 0.27) AND MARKG) INTERACT (WITH WIDTH V1i == 0.09)) OR V1_slot
V2_slot_SG = (((ENCLOSE RECTANGLE V2i 0.09 0.27) AND MARKG) INTERACT (WITH WIDTH V2i == 0.09)) OR V2_slot
V3_slot_SG = (((ENCLOSE RECTANGLE V3i 0.09 0.27) AND MARKG) INTERACT (WITH WIDTH V3i == 0.09)) OR V3_slot
V4_slot_SG = (((ENCLOSE RECTANGLE V4i 0.09 0.27) AND MARKG) INTERACT (WITH WIDTH V4i == 0.09)) OR V4_slot
V5_slot_SG = (((ENCLOSE RECTANGLE V5i 0.09 0.27) AND MARKG) INTERACT (WITH WIDTH V5i == 0.09)) OR V5_slot

#IFDEF ALLOW_V01 YES

V1ia = (RECTANGLE V1i == 0.1 BY == 0.1) OR V1_slot
V2ia = (RECTANGLE V2i == 0.1 BY == 0.1) OR V2_slot
V3ia = (RECTANGLE V3i == 0.1 BY == 0.1) OR V3_slot
V4ia = (RECTANGLE V4i == 0.1 BY == 0.1) OR V4_slot
V5ia = (RECTANGLE V5i == 0.1 BY == 0.1) OR V5_slot

V1_sd = SIZE V1ia BY -0.005
V2_sd = SIZE V2ia BY -0.005
V3_sd = SIZE V3ia BY -0.005
V4_sd = SIZE V4ia BY -0.005
V5_sd = SIZE V5ia BY -0.005


V1r = V1i NOT V1ia
V2r = V2i NOT V2ia
V3r = V3i NOT V3ia
V4r = V4i NOT V4ia
V5r = V5i NOT V5ia

#ENDIF

EXCINS = EXCLU OR INST

AA      = (AAi NOT EXDRC) NOT EXCLU
AA_dfm  = AA NOT EXDFM
NW      = (NWi NOT EXDRC) NOT EXCLU
NW_dfm  = NW NOT EXCLU
DNW     = (DNWi NOT EXDRC) NOT EXCLU
PC      = (PCi NOT EXDRC)  NOT EXCLU
NC      = (NCi NOT EXDRC)  NOT EXCLU
MVN     = (MVNi NOT EXDRC) NOT EXCLU
MVP     = (MVPi NOT EXDRC) NOT EXCLU
VTNH    = (VTNHi NOT EXDRC) NOT EXCLU
VTPH    = (VTPHi NOT EXDRC) NOT EXCLU
LVP     = (LVPi NOT EXDRC) NOT EXCLU
LVN     = (LVNi NOT EXDRC) NOT EXCLU
DG      = (DGi NOT EXDRC) NOT EXCLU
GT      = (GTi NOT EXDRC) NOT EXCLU
GT_dfm  = GT NOT EXDFM
NLL     = (NLLi NOT EXDRC) NOT EXCLU
NLH     = (NLHi NOT EXDRC) NOT EXCLU
PLH     = (PLHi NOT EXDRC) NOT EXCLU
PLL     = (PLLi NOT EXDRC) NOT EXCLU
HRP	= (HRPi NOT EXDRC) NOT EXCLU
SN      = (SNi NOT EXDRC) NOT EXCLU
SP      = (SPi NOT EXDRC) NOT EXCLU
SAB     = (SABi NOT EXDRC) NOT EXCLU
//CT      = (((CTi NOT CT_slot) NOT SCT) NOT EXDRC) NOT EXCLU
CT      = (CTi NOT EXDRC) NOT INSIDE EXCLU
CT_dfm  = CT NOT EXDFM
M1      = M1i NOT INSIDE EXCLU
M1_dfm  = M1 NOT EXDFM
M2      = M2i NOT INSIDE EXCLU
M2_dfm  = M2 NOT EXDFM
M3	= M3i NOT INSIDE EXCLU
M4	= M4i NOT INSIDE EXCLU
M5	= M5i NOT INSIDE EXCLU
M6	= M6i NOT INSIDE EXCLU
TM1	= TM1i NOT INSIDE EXCLU
TM2	= TM2i NOT INSIDE EXCLU

#IFDEF ALLOW_V01 YES

V1O	= V1r OR V1_sd
V2O	= V2r OR V2_sd
V1      = V1O NOT INSIDE EXCLU
V1_dfm  = V1 NOT EXDFM
V2      = V2O NOT INSIDE EXCLU
V2_dfm  = V2 NOT EXDFM
V3      = (V3r OR V3_sd) NOT INSIDE EXCLU
V4      = (V4r OR V4_sd) NOT INSIDE EXCLU
V5      = (V5r OR V5_sd) NOT INSIDE EXCLU

#ENDIF

#IFDEF ALLOW_V01 NO

V1	= V1i NOT INSIDE EXCLU
V1_dfm	= V1 NOT INSIDE EXDFM
V2	= V2i NOT INSIDE EXCLU
V2_dfm	= V2 NOT INSIDE EXDFM
V3	= V3i NOT INSIDE EXCLU
V4	= V4i NOT INSIDE EXCLU
V5	= V5i NOT INSIDE EXCLU

#ENDIF

TV1     = TV1i NOT INSIDE EXCLU
TV2     = TV2i NOT INSIDE EXCLU
PSUB    = (PSUBi NOT EXDRC) NOT EXCLU
NLHT    = (NLHTi NOT EXDRC) NOT EXCLU
PLHT    = (PLHTi NOT EXDRC) NOT EXCLU
TG	= (TGi NOT EXDRC) NOT EXCLU
PWH	= (PWHi NOT EXDRC) NOT EXCLU
NWH     = (NWHi NOT EXDRC) NOT EXCLU
PWHT	= (PWHTi NOT EXDRC) NOT EXCLU
NWHT    = (NWHTi NOT EXDRC) NOT EXCLU
LV      = (LVi NOT EXDRC) NOT EXCLU
MD	= MDi NOT EXCLU
RDLVIA	= RDLVIAi NOT EXCLU
RDL	= RDLi NOT EXCLU
RDLPA2	= RDLPA2i NOT EXCLU
HR	= (HRi NOT EXDRC) NOT EXCLU
GT0	= GTi NOT (RESP1 OR HRPDMY)
PDRF	= (PDRFi NOT EXDRC) NOT EXCLU



CONNECT TM2i TM1i BY TV2i
CONNECT TM1i M6i BY TV1i
CONNECT M6i M5i BY V5i
CONNECT M5i M4i BY V4i
CONNECT M4i M3i BY V3i

#IFDEF ALLOW_V01 YES

CONNECT M3i M2i BY V2O
CONNECT M2i M1i BY V1O

#ENDIF

#IFDEF ALLOW_V01 NO

CONNECT M3i M2i BY V2i
CONNECT M2i M1i BY V1i

#ENDIF

CONNECT M6i M5i BY V5
CONNECT M5i M4i BY V4
CONNECT M4i M3i BY V3
CONNECT M3i M2i BY V2
CONNECT M2i M1i BY V1

CONNECT M1i GT0 NTAPi PTAPi PSDi NSDi BY CTi
SCONNECT NTAPi NWi
SCONNECT NTAPi NW
SCONNECT NTAPi LVNW
SCONNECT NTAPi MVNW
SCONNECT NTAPi HVNW
LABEL ORDER TM2i TM1i M6i M5i M4i M3i M2i M1i NTAPi PTAPi NSDi PSDi GT0 NWi


// VIRTUAL CONNECT NOTICE!
// Power name below should be adjusted following the power naming convention to detect NW spacing rule violations correctly.
VIRTUAL CONNECT NAME "?VDD?" "?VCC?" "?VSS?" "?GND?"
VIRTUAL CONNECT COLON YES



//******************************************
//    LAYER DERIVATIONS AND OPERATIONS
//******************************************


//==================
// For Connectivity
//==================

PACTi   = SPi AND AAi
NACTi   = SNi AND AAi

PTAPi   = PACTi NOT NWi
NTAPi   = NACTi AND NWi

PGATEi  = PACTi AND GTi
NGATEi  = NACTi AND GTi

PSDi    = (PACTi NOT PGATEi) TOUCH PGATEi
NSDi    = (NACTi NOT NGATEi) TOUCH NGATEi

PMOSi   = PGATEi OR PSDi
NMOSi   = NGATEi OR NSDi


//==================
//  Resistor Def
//==================

NWR     = NW INTERACT RESNW
AAR     = AA INTERACT RESAA
GTR     = GT INTERACT RESP1

NR      = NWR INSIDE AA
AANR    = AA INTERACT NWR
SNNR    = SN INTERACT NWR
SPNR    = SP INTERACT NWR

NWDEV   = NW NOT (NWR OR NR)
AADEV   = AA NOT (AAR OR AANR)
GTDEV   = GT NOT GTR
SNDEV   = SN NOT SNNR
SPDEV   = SP NOT SPNR

//=============
//   HRP Def
//=============

GT_HRP   = GT INTERACT HRP
HR_GT    = GT_HRP AND HRPDMY
SAB_GT   = GT_HRP AND SAB

//==================
//   Well Def
//==================

DRC:1   = EXTENT drawn original
BULK    = SIZE DRC:1 BY 1.0

PW      = (((BULK NOT NW) NOT NWH) NOT NWHT) NOT PSUB

//PW_INNW = HOLES NW INNER EMPTY    // DNW defination
//NW_DNW  = (NW INTERACT DNW) TOUCH PW_INNW

PW_INNW = DNW NOT NW
DNW_EDGE = EXPAND EDGE (DNW INSIDE EDGE NW) OUTSIDE BY 0.001
NW_DNW = NW INTERACT DNW_EDGE

DGTG    = TG OR DG

HVNW    = (NW NOT OUTSIDE TG) OR NWHT
MVNW    = (NW NOT OUTSIDE DG) OR NWH
LVNW    = (NW NOT HVNW) NOT MVNW

HVNWi	= (NWi NOT OUTSIDE TGi) OR NWHTi
MVNWi	= (NWi NOT OUTSIDE DGi) OR NWHi
LVNWi	= (NWi NOT HVNWi) NOT MVNWi


//==================
// Transistor Def
//==================

PACT    = SP AND AA
NACT    = SN AND AA

PGT     = SP AND GT
NGT     = SN AND GT

PTAP    = PACT NOT NW
NTAP    = NACT AND NW
TAP     = PTAP OR NTAP

PGATE   = PACT AND GT
NGATE   = NACT AND GT

GATE0 = (GT INTERACT CT) AND AA 
AA1 = (AA INTERACT GATE0) NOT GATE0
AA2 = AA1 TOUCH GATE0 == 2
AA3 = AA1 INTERACT CT 
AA4 = AA2 OR AA3
GATE1 = GATE0 TOUCH AA4 == 2
GATE2 = GATE0 AND LDBK
GATE = GATE1 OR GATE2
GATE_L  = (GATE COIN EDGE AA) NOT COIN EDGE GT
GATE_W  = GATE COIN EDGE GT

PSD     = (PACT NOT PGATE) TOUCH PGATE
NSD     = (NACT NOT NGATE) TOUCH NGATE

PMOS    = PGATE OR PSD
NMOS    = NGATE OR NSD
MOS     = PMOS OR NMOS

NMOS_CAP = NMOS AND NW

PBAA   	= AA AND PSUB
PBMOS   = NMOS AND PSUB
PBGT   	= GT INTERACT PSUB
NOMI_AA = AA NOT PBAA

NLLAA   = AA AND NLL
NLHAA   = AA AND NLH
PLLAA   = AA AND PLL
PLHAA   = AA AND PLH
NLHTAA  = AA AND NLHT
PLHTAA  = AA AND PLHT

AAEIGT  = AA INSIDE EDGE GT
GTEIAA  = GT INSIDE EDGE AA

INTERGT = GT NOT GATE


//=====================
//   Poly E-Fuse Def
//=====================

EFU    = GT INTERACT EFUSE
EFU_BO = EFU AND GTFUSE
RCT    = CT INTERACT EFU
RCT_RT = RECTANGLE RCT == 0.09 BY == 0.30


//=====================
//     CT Def
//=====================

ACT_CT   = CT AND AA
INTERCT  = CT AND INTERGT

//=====================
//   AL Fuse Def
//=====================

ALFUSE = (RDL AND FUSE) AND MARKF
Al_fuse_1 = LENGTH ALFUSE >= 4
Al_fuse   = ALFUSE WITH EDGE Al_fuse_1 >= 2
Alfuse_edge = LENGTH Al_fuse >= 4
Alfuse_edge_1 = CONVEX EDGE ALFUSE ANGLE1 == 270 ANGLE2 == 270


HM1 = (HOLES M1 inner) INTERACT FUSE
GM1 = (M1 TOUCH HM1) AND MARKG
GCT = CT INTERACT GM1
CTFUSE = CT INSIDE HM1
GV1 = V1i INTERACT GM1
V1FUSE = V1i INSIDE HM1

HM2 = (HOLES M2 inner) INTERACT FUSE
GM2 = (M2 TOUCH HM2) AND MARKG
GV2 = V2i INTERACT GM2
V2FUSE = V2i INSIDE HM2

HM3 = (HOLES M3 inner) INTERACT FUSE
GM3 = (M3 TOUCH HM3) AND MARKG
GV3 = V3i INTERACT GM3
V3FUSE = V3i INSIDE HM3

HM4 = (HOLES M4 inner) INTERACT FUSE
GM4 = (M4 TOUCH HM4) AND MARKG
GV4 = V4i INTERACT GM4
V4FUSE = V4i INSIDE HM4

HM5 = (HOLES M5 inner) INTERACT FUSE
GM5 = (M5 TOUCH HM5) AND MARKG
GV5 = V5i INTERACT GM5
V5FUSE = V5i INSIDE HM5

HM6 = ( HOLES M6 INNER) INTERACT FUSE
GM6 = (M6 TOUCH HM6) AND MARKG
GTV1 = TV1i INTERACT GM6
TV1FUSE = TV1i INSIDE HM6

HTM1 = (HOLES TM1 inner) INTERACT FUSE
GTM1 = (TM1 TOUCH HTM1) AND MARKG
GTV2 = TV2i INTERACT GTM1
TV2FUSE = TV2i INSIDE HTM1

HTM2 = (HOLES TM2 inner) INTERACT FUSE
GTM2 = (TM2 TOUCH HTM2) AND MARKG

HRDL = (HOLES RDL inner ) INTERACT FUSE
GRDL = (RDL TOUCH HRDL) AND MARKG
GRDLV = RDLVIA INTERACT GRDL
RDLVF = RDLVIA INSIDE HRDL

Stack_Vna = (((V1FUSE INTERACT V2FUSE) INTERACT V3FUSE) INTERACT V4FUSE) INTERACT V5FUSE
Stack_Vn  = ((Stack_Vna INTERACT TV1FUSE) INTERACT TV2FUSE) INTERACT RDLVF
Stack_MRa = ((((GM1 OR GM2) OR GM3) OR GM4) OR GM5) OR GM6
Stack_MR  = ((Stack_MRa OR GTM1) OR GTM2) OR GRDL


LMARK = (RDL AND FUSE) AND LOGO




//==================================
//  DNW -  Deep N-Well  DRC
//==================================

GROUP GDNW DNW_?

DNW_1 {
@ Min DNW width is 3
  INT DNW < 3.0 ABUT<90 SINGULAR REGION
}
DNW_2 {
@ Min Space between two DNWs is 3.5
  EXT DNW < 3.5 ABUT<90 SINGULAR REGION
}
DNW_3 {
@ Min Enclosure of DNW by NW is 1
  ENC DNW NW_DNW < 1 ABUT<90 SINGULAR REGION
}
DNW_4 {
@ Min Overlap of NW and DNW is 0.4
  ENC PW_INNW DNW < 0.4 ABUT<90 SINGULAR REGION
}
DNW_5 {
@ Min Space between DNW and NW is 2.5
  X = NW NOT COIN EDGE DNW
  EXT X DNW < 2.5 ABUT<90 REGION
}

#IFDEF Recommended_rules_CHECK YES
DNW_6_R {
@ DNW is enclosed by NW
@NOTICE: It is a recommended rule.
  DNW NOT INSIDE EDGE NW_DNW
}
DNW_7_R {
@ DNW is not allowed in native device region.
@NOTICE: It is a recommended rule.
  DNW AND PSUB
}
#ENDIF


//===========================
//  AA - Active Area DRC
//===========================

GROUP GAA AA_?

AA_1 {
@ Min Width of interconnect AA is 0.08
  INT AA < 0.08 SINGULAR REGION
  INT AADUM < 0.08 REGION
}
AA_2a {
@ Min AA width for 1.0/1.2V NMOS/PMOS transistors is 0.11
  Y = LENGTH GATE_W < 0.11
  (EXPAND EDGE Y INSIDE BY 0.001) NOT INSIDE INST
}
AA_2b {
@ Min AA width for 1.8/2.5/3.3V NMOS/PMOS transistors is 0.21
  X = GATE AND DGTG
  Y = GT COIN EDGE X
  Z = LENGTH Y < 0.21
  (EXPAND EDGE Z INSIDE BY 0.001) NOT INSIDE INST
}
AA_3a {
@ Min Space between two AAs in the same well is 0.10
  EXT AA < 0.10 SINGULAR REGION
  EXT AADUM < 0.10 REGION
  EXT AADUM AAi < 0.10 REGION INSIDE ALSO
}
AA_3b {
@ Min Space between AAs with one or both AA width greater than 0.15um in the same well is 0.11
   X = AA WITH WIDTH > 0.15
   Y = AADUM WITH WIDTH > 0.15
   EXT X AA < 0.11 SINGULAR REGION
   EXT X AADUM < 0.11 SINGULAR REGION
   EXT Y AAi < 0.11 SINGULAR REGION
   EXT Y AADUM < 0.11 SINGULAR REGION
}
AA_4 {
@ Min N+AA enclosed by NW is 0.12
  X = ENC (NTAP NOT INTERACT GT) (NW NOT INTERACT RESNW) < 0.12 ABUT<90 SINGULAR REGION
  X NOT INSIDE INST
}
AA_5 {
@ Min Space between NW and N+AA inside PW is 0.15
  X = EXT NW NACT < 0.15 ABUT<90 SINGULAR REGION
  X NOT INSIDE INST
}
AA_6 {
@ Min P+AA enclosed by NW is 0.15
  X = ENC PACT (NW NOT NWR) < 0.15 ABUT<90 SINGULAR REGION
  X NOT INSIDE INST
}
AA_7 {
@ Space between NW and P+AA inside PW is 0.12
  X = EXT (NW NOT NWR) (PTAP NOT INTERACT GT) < 0.12 ABUT<90 SINGULAR REGION
  X NOT INSIDE INST
}
AA_8 {
@ Min AA area is 0.038
  X = AREA AA < 0.038
  X NOT INSIDE INST
  AREA AADUM < 0.038
}
AA_9 {
@ Min Space between N+AA, which is not enclosed by DNW, and NW which encloses a DNW is 0.32
  X = EXT NACT NW_DNW < 0.320 ABUT<90 SINGULAR REGION
  X NOT DNW
}
AA_10a_Min {
@ Min Local AA density (including dummy AA) in 200umX200um window with step size 100um is 19%.
  DENSITY (AAi OR AADUM) < 0.19 WINDOW 200 STEP 100 BACKUP PRINT density_report_AA10a_min.log
}
AA_10a_Max {
@ Max Local AA density (including dummy AA) in 200umX200um window with step size 100um is 90%.
  DENSITY (AAi OR AADUM) > 0.90 WINDOW 200 STEP 100 BACKUP PRINT density_report_AA10a_max.log
}

#IFDEF Recommended_rules_CHECK YES
AA_10b_Min_R {
@ Min Global AA density for fully chip (including dummy AA) is 23%
@NOTICE: It is a recommended rule.
  DENSITY (AAi OR AADUM) < 0.23 PRINT density_report_AA10b_min.log
}
AA_10b_Max_R {
@ Max Global AA density for fully chip (including dummy AA) is 75%
@NOTICE: It is a recommended rule.
  DENSITY (AAi OR AADUM) > 0.75 PRINT density_report_AA10b_max.log
} 
AA_10c_R {
@ Min AA density inside of dummy block area is 23%,while the area of dummy block layer is larger than 2500um2 (50umX50um)
@NOTICE: It is a recommended rule.
  X = AREA (DUMBA OR NODMF) > 2500
  DENSITY (AAi OR AADUM) < 0.23 INSIDE OF LAYER X PRINT density_report_AAn.log
}
#ENDIF



//==================================
//  NW -  N-Well  DRC
//==================================

GROUP GNW NW_?

NW_1 {
@ Min NW width is 0.36
  INT NW < 0.36 ABUT<90 SINGULAR REGION
}
NW_2 {
@ Min NW width for NW resistor is 1.6
  INT NWR < 1.60 ABUT<90 SINGULAR REGION
}
NW_3 {
@ Min Space between 1.0/1.2V NWs at the same nets is 0.36
  EXT NW < 0.36 ABUT<90 SINGULAR REGION CONNECTED
  EXT NW (NWi INTERACT EXCLU) < 0.36 ABUT<90 SINGULAR REGION CONNECTED
}
NW_4 {
@ Min Space between 1.0/1.2V NWs at different nets is 0.47
  EXT LVNW < 0.47 ABUT<90 SINGULAR REGION NOT CONNECTED
  EXT LVNW (LVNWi INTERACT EXCLU) < 0.47 ABUT<90 SINGULAR REGION NOT CONNECTED
}
NW_5 {
@ Min Space between 1.0/1.2V and 1.8/2.5/3.3V NWs at the same nets is 0.47
  EXT LVNW HVNW < 0.47 ABUT<90 SINGULAR REGION CONNECTED
  EXT LVNW MVNW < 0.47 ABUT<90 SINGULAR REGION CONNECTED
}
NW_6 {
@ Min Space between 1.0/1.2V NW and 1.8/2.5/3.3V NW at different nets is 0.72
  EXT LVNW HVNW < 0.72  ABUT<90 SINGULAR REGION NOT CONNECTED
  EXT LVNW MVNW < 0.72  ABUT<90 SINGULAR REGION NOT CONNECTED
}
NW_7a {
@ Min Space between 1.8/2.5/3.3V NWs at same nets is 0.47
  EXT MVNW < 0.47 ABUT<90 SINGULAR REGION CONNECTED
  EXT HVNW < 0.47 ABUT<90 SINGULAR REGION CONNECTED
  EXT MVNW HVNW < 0.47 ABUT<90 SINGULAR REGION CONNECTED
}
NW_7b {
@ Min Space between 1.8/2.5/3.3V NW is 0.72 at different nets is 0.72.
  EXT MVNW < 0.72 ABUT<90 SINGULAR REGION NOT CONNECTED
  EXT HVNW < 0.72 ABUT<90 SINGULAR REGION NOT CONNECTED
  EXT MVNW HVNW < 0.72 ABUT<90 SINGULAR REGION NOT CONNECTED
}
NW_8 {
@ Min NW area is 0.3
  AREA NW < 0.3
}




//==========================================
//  PSUB - Native NMOS blocked implant DRC
//==========================================

GROUP GPSUB PSUB_?

PSUB_1 {
@ Min PSUB width is 0.36
  INT PSUB < 0.36 ABUT<90 SINGULAR REGION
}
PSUB_2 {
@ Min 1.0/1.2/1.8/2.5/3.3V native NMOS channel width is 0.5
  X = LENGTH GATE_W < 0.5
  (EXPAND EDGE X INSIDE BY 0.005) AND PSUB
}
PSUB_3a {
@ 1.0/1.2V native NMOS channel length is 0.2
  X = PBGT INSIDE EDGE PBAA
  INT X < 0.20 ABUT<90 REGION
}
PSUB_3b {
@ 1.8V native NMOS channel length is 0.8
  X = PBGT INSIDE EDGE (PBAA INTERACT DG)
  INT X < 0.80 ABUT<90 REGION
}
#IFDEF IO 1825
PSUB_3c {
@ Min 2.5V (or overdrive to 3.3V) native NMOS channel length is 1.0
  X = PBGT INSIDE EDGE (PBAA INTERACT TG) 
  INT X < 1.0 ABUT<90 REGION
}
#ENDIF
#IFDEF IO 1833
PSUB_3d {
@ Min 3.3V native NMOS channel length is 1.2
  X = PBGT INSIDE EDGE (PBAA INTERACT TG)
  INT X < 1.2 ABUT<90 REGION
}
#ENDIF
PSUB_4 {
@ Min Space between two PSUBs is 0.36
  EXT PSUB < 0.36 ABUT<90 SINGULAR REGION
}
PSUB_5 {
@ Fixed Native NMOS AA enclosure by PSUBs is 0.26
  X = SIZE (PBMOS NOT INTERACT CAPBP) BY 0.26
  Y = PSUB INTERACT PBMOS
  Z = NMOS INTERACT CAPBP
  (XOR X Y) NOT INTERACT Z
  PSUB NOT INTERACT AA
}
PSUB_6 {
@ Min Space between PSUB and MOS AA is 0.37
  EXT PSUB MOS < 0.37 ABUT<90 SINGULAR REGION
}
PSUB_7 {
@ Min Space between PSUB and NW is 1.2
  EXT PSUB NW < 1.2 ABUT<90 SINGULAR REGION
}
PSUB_8 {
@ Min Extension of native NMOS poly gate outside of AA is 0.31
  X = PBAA INSIDE EDGE PBGT
  ENC X PBGT < 0.31 ABUT<90 REGION OPPOSITE
}

#IFDEF Recommended_rules_CHECK YES
PSUB_9_R {
@ PSUB inside, overlapping with, or crossing over a DNW area is not allowed
@NOTICE: It is a recommended rule.
 PSUB AND DNW
 PSUB COINCIDENT OUTSIDE EDGE DNW
}
PSUB_10_R {
@ PSUB must not overlap NW or PW
@NOTICE: It is a recommended rule.
  PSUB AND NW
  PSUB AND PW
}
PSUB_11_R {
@ Only one AA pattern is allowed in one PSUB region, except for NMOS capacitors and AAs in INDMY.
@NOTICE: It is a recommended rule.
  PSUB INTERACT ((AA NOT INTERACT CAPBP) NOT INSIDE INDMY) > 1
}
PSUB_12_R {
@ SP is not allowed to exist in a PSUB region
@NOTICE: It is a recommended rule.
  SP AND PSUB
}
#ENDIF


//===============================
//   VTNH: High Vt NMOS Implant
//===============================

GROUP GVTNH VTNH_?

VTNH_1 {
@ Min VTNH width is 0.18
  INT VTNH < 0.18 ABUT<90 REGION
}
VTNH_2 {
@ Min Space between two VTNH is 0.18
  EXT VTNH < 0.18 ABUT<90 REGION OPPOSITE
}
VTNH_3 {
@ VTNH and PSUB overlap isn't allowed
  AND VTNH PSUB
}
VTNH_4 {
@ Min VTNH extension outside of MOS AA along gate poly length direction is 0.12
  X = (NACT AND VTNH) TOUCH EDGE GATE 
  Y = ENC X VTNH < 0.12 ABUT<90 REGION OPPOSITE
  Y NOT INSIDE INST
}
VTNH_5 {
@ Min Space between VTNH and MOS AA of other device along other device's gate poly length direction is 0.12
  X = NACT TOUCH EDGE (AA INSIDE EDGE GT)
  EXT X VTNH < 0.12 ABUT<90 REGION OPPOSITE
}
VTNH_6 {
@ Min VTNH extension outside of gate along S/D direction is 0.185
  X = (GT INSIDE EDGE (NACT AND VTNH)) COIN EDGE GATE
  Y = EXPAND EDGE X OUTSIDE BY 0.185
  Y NOT VTNH
}
VTNH_7 {
@ Min Space between VTNH and gate of other device along other device's S/D direction is 0.185
  X = (GT INSIDE EDGE (AA NOT VTNH)) COIN EDGE GATE
  EXT X VTNH < 0.185 ABUT<90 REGION OPPOSITE
}
VTNH_8 {
@ Min VTNH area is 0.18
  X = AREA VTNH < 0.18
  X NOT INSIDE INST
}

//===============================
//   VTPH: High Vt PMOS Implant
//===============================

GROUP GVTPH VTPH_?

VTPH_1 {
@ Min VTPH width is 0.18
  INT VTPH < 0.18 ABUT<90 REGION
}
VTPH_2 {
@ Min Space between two VTPHs is 0.18
  EXT VTPH < 0.18 ABUT<90 REGION OPPOSITE
}
VTPH_3 {
@ VTPH and PSUB overlap isn't allowed
  AND VTPH PSUB
}
VTPH_4 {
@ Min VTPH extension outside of MOS AA along gate poly length direction is 0.12
  X = (PACT AND VTPH) TOUCH EDGE GATE
  Y = ENC X VTPH < 0.12 ABUT<90 REGION OPPOSITE
  Y NOT INSIDE INST
}
VTPH_5 {
@ Min Space between VTPH and MOS AA of other device along other device's gate poly length direction is 0.12
  X = PACT TOUCH EDGE (AA INSIDE EDGE GT)
  EXT X VTPH < 0.12 ABUT<90 REGION OPPOSITE
}
VTPH_6 {
@ Min VTPH extension outside of gate along S/D direction is 0.185
  X = (GT INSIDE EDGE (PACT AND VTPH)) COIN EDGE GATE
  Y = EXPAND EDGE X OUTSIDE BY 0.185
  Y NOT VTPH
}
VTPH_7 {
@ Min Space between VTPH and gate of other device along other device's S/D direction is 0.185
  X = (GT INSIDE EDGE AA) COIN EDGE GATE
  EXT X VTPH < 0.185 ABUT<90 REGION OPPOSITE
}
VTPH_8 {
@ Min VTPH area is 0.18
  X = AREA VTPH < 0.18
  X NOT INSIDE INST
}


//===========================================
//  LVN: low Vt NMOS design minima (optional)
//===========================================

GROUP GLVN LVN_?

LVN_1 {
@ Min LVN width is 0.18
  INT LVN < 0.18 ABUT<90 REGION
}
LVN_2 {
@ Min Space between LVNs is 0.18
  EXT LVN < 0.18 ABUT<90 REGION OPPOSITE
}
LVN_3 {
@ Min LVN and PSUB overlap isn't allowed
  AND LVN PSUB
}
LVN_4 {
@ Min LVN extension outside of MOS AA along gate poly length direction is 0.12
  X = (NACT AND LVN) TOUCH EDGE GATE
  ENC X LVN < 0.12 ABUT<90 REGION OPPOSITE
}
LVN_5 {
@ Min Space between LVN and MOS AA of other device along other device's gate poly length direction is 0.12
  X = NACT TOUCH EDGE (AA INSIDE EDGE GT)
  EXT X LVN < 0.12 ABUT<90 REGION OPPOSITE
}
LVN_6 {
@ LVN extension outside of gate along S/D direction is 0.185
  X = GT INSIDE EDGE (NACT AND LVN)
  Y = EXPAND EDGE X OUTSIDE BY 0.185
  Y NOT LVN
}
LVN_7 {
@ Min Space between LVN and gate poly of other device along other device's S/D direction is 0.185
  X = GT INSIDE EDGE (NACT NOT LVN)
  EXT LVN X < 0.185 ABUT<90 REGION OPPOSITE
}
LVN_8 {
@ Min LVN area is 0.18
  AREA LVN < 0.18
}


//============================================
//  LVP:  low Vt PMOS design minima (optional)
//============================================

GROUP GLVP LVP_?

LVP_1 {
@ Min LVP width is 0.18
  INT LVP < 0.18 ABUT<90 REGION 
}
LVP_2 {
@ Min Space between two LVPs is 0.18
  EXT LVP < 0.18 ABUT<90 REGION OPPOSITE
}
LVP_3 {
@ Min LVP and PSUB overlap isn't allowed
  AND LVP PSUB
}
LVP_4 {
@ Min LVP extension outside of MOS AA along gate poly length direction is 0.12
  X = (PACT AND LVP) TOUCH EDGE GATE
  ENC X LVP < 0.12 ABUT<90 REGION OPPOSITE
}
LVP_5 {
@ Min Space between LVP and MOS AA of other device along other device's gate poly length direction is 0.12
  X = PACT TOUCH EDGE (AA INSIDE EDGE GT)
  EXT X LVP < 0.12 ABUT<90  REGION OPPOSITE
}
LVP_6 {
@ Min LVP extension outside of gate along S/D direction is 0.185
  X = GT INSIDE EDGE (PACT AND LVP)
  Y = EXPAND EDGE X OUTSIDE BY 0.185
  Y NOT LVP
}
LVP_7 {
@ Min Space between LVP and gate of other device along other device's S/D direction is 0.185
  X = GT INSIDE EDGE (PACT NOT LVP)
  EXT LVP X < 0.185 ABUT<90 REGION OPPOSITE
}
LVP_8 {
@ Min LVP area is 0.18
  AREA LVP < 0.18
}


//============================
//   DG - Dual Gate DRC
//============================

GROUP GDG DG_?

DG_1 {
@ Min DG width is 0.46
  INT DG < 0.46 ABUT<90 SINGULAR REGION
}
DG_2 {
@ Min Space between two DGs is 0.46, merge if the space is less than 0.46um
  EXT DG < 0.46 ABUT<90 SINGULAR REGION
}
DG_3 {
@ Min Enclosure of AA by DG(Except pick-up AA) is 0.25
  ENC MOS DG < 0.25 ABUT<90 SINGULAR REGION
}
DG_4 {
@ Min Enclosure of MOS AA by DG along gate poly direction is 0.27
  X = MOS TOUCH EDGE (GATE INSIDE DG)
  ENC X DG < 0.27 ABUT<90 REGION
}
DG_5 {
@ Min Space between DG and MOS AA is 0.25
   EXT DG MOS < 0.25 ABUT<90 SINGULAR REGION
  
   X = (AA AND LDBK) TOUCH ((STIDMY TOUCH GATE) AND LDBK)
   EXT DG X < 0.25 ABUT<90 SINGULAR REGION
}
DG_6 {
@ Min Space between DG and 1.2/2.5/3.3 gate along source/drain direction is 0.24
  X = (GT NOT DG) INSIDE EDGE AA
  EXT DG X < 0.24 ABUT<90 REGION INSIDE ALSO
}
DG_8 {
@ Min Enclosure of NW beyond DG is 0.46um, set the value to 0 if the enclosure is less than 0.46um
  ENC DG NW > 0 < 0.46 ABUT>0<90 SINGULAR REGION
}
DG_9 {
@ Min Space or extension of DG to NW is 0.46um, set the value to 0 if the value is smaller than 0.46um
  ENC NW DG > 0 < 0.46 ABUT>0<90 SINGULAR REGION
  EXT NW DG > 0 < 0.46 ABUT>0<90 SINGULAR REGION
}
DG_10 {
@ Min Overlap of DG and NW is 0.46um, set the value to 0 if the value is smaller than 0.46um
  INT DG NW > 0 < 0.46 ABUT>0<90 SINGULAR REGION
}
DG_11 {
@ Min Enclosure of DG beyond PSUB, space or extension of PSUB to DG,
@ overlap of PSUB and DG is 0.32um, set the value to 0 if the value is smaller than 0.32um
  ENC DG PSUB > 0 < 0.32 ABUT>0<90 SINGULAR REGION
  ENC PSUB DG > 0 < 0.32 ABUT>0<90 SINGULAR REGION
  EXT PSUB DG > 0 < 0.32 ABUT>0<90 SINGULAR REGION
  INT DG PSUB > 0 < 0.32 ABUT>0<90 SINGULAR REGION
}
DG_12 {
@ Min Enclosure of gate by DG along source/drain direction is 0.33
  X1 = GT IN EDGE AA
  ENC X1 DG < 0.33 ABUT<90  REGION OPPOSITE
}
DG_13 {
@ Min Space between DG and 1.0/1.2V gate along source/drain direction is 0.33
  X1 = (GT IN EDGE AA) NOT INSIDE EDGE (DG OR TG)
  EXT X1 DG < 0.33 ABUT<90  REGION OPPOSITE
}

//==========================
//   TG - Triple Gate DRC
//==========================

GROUP GTG TG_? 

TG_1 {
@ Min TG width is 0.46
  INT TG < 0.46 ABUT<90 SINGULAR REGION
}
TG_2 { 
@ Min Space between two TGs, merge if the space is less than 0.46 
  EXT TG < 0.46 ABUT<90 SINGULAR REGION 
} 
TG_3 { 
@ Min Enclosure of AA by TG(except pickup AA) is 0.25 
  ENC MOS TG < 0.25 ABUT<90 SINGULAR REGION

  X = (STIDMY AND LDBK) INTERACT GT
  Y = AA TOUCH X
  ENC Y TG < 0.25 ABUT<90 SINGULAR REGION
} 
TG_4 { 
@ Min Enclosure of MOS AA by TG along gate poly direction is 0.27
  X = MOS TOUCH EDGE (GATE INSIDE TG)
  ENC X TG < 0.27 ABUT<90 REGION
}
TG_5 { 
@ Min Space between TG and MOS AA is 0.25 
  EXT TG MOS < 0.25 ABUT<90 SINGULAR REGION

   X = (AA AND LDBK) TOUCH ((STIDMY TOUCH GATE) AND LDBK)
   EXT TG X < 0.25 ABUT<90 SINGULAR REGION
}
TG_6 { 
@ Min Space between TG and 1.2/1.8V gate along S/D direction is 0.24
  X = (GT NOT TG) INSIDE EDGE AA
  EXT TG X < 0.24 ABUT<90 REGION INSIDE ALSO
}
TG_7 {
@ Min Space between TG and DG is 0.46
  EXT TG DG < 0.46 ABUT<90 SINGULAR REGION INSIDE ALSO 
}
TG_9 {
@ Min Enclosure of NW beyond TG is 0.46um, set the value to 0 if the enclosure is less than 0.46um
  ENC TG NW > 0 < 0.46 ABUT>0<90 SINGULAR REGION
}
TG_10 {
@ Min Space or extension of TG to NW is 0.46um, set the value to 0 if the value is smaller than 0.46um
  ENC NW TG > 0 < 0.46 ABUT>0<90 SINGULAR REGION
  EXT NW TG > 0 < 0.46 ABUT>0<90 SINGULAR REGION
}
TG_11 {
@ Min Overlap of TG and NW is 0.46um, set the value to 0 if the value is smaller than 0.46um
  INT TG NW > 0 < 0.46 ABUT>0<90 SINGULAR REGION
}
TG_12 {
@ Min Enclosure of TG beyond PSUB, space or extension of PSUB to TG,
@ overlap of PSUB and TG is 0.32um, set the value to 0 if the value is smaller than 0.32um
  ENC TG PSUB > 0 < 0.32 ABUT>0<90 SINGULAR REGION
  ENC PSUB TG > 0 < 0.32 ABUT>0<90 SINGULAR REGION
  EXT PSUB TG > 0 < 0.32 ABUT>0<90 SINGULAR REGION
  INT TG PSUB > 0 < 0.32 ABUT>0<90 SINGULAR REGION
}
TG_13 {
@ Min Enclosure of gate by TG along source/drain direction is 0.33um
  X1 = GT IN EDGE AA
  ENC X1 TG < 0.33 ABUT<90  REGION OPPOSITE  
}
TG_14 {
@ Min Space between TG and 1.0/1.2/1.8V gate along source/drain direction is 0.33
  X1 = (GT IN EDGE AA) NOT INSIDE EDGE TG
  EXT X1 TG < 0.33 ABUT<90  REGION OPPOSITE
}



//==========================
//    GT - Poly Rule DRC
//==========================

GROUP GGT GT_?

GT_1a {
@ Min Channel length for 1.0/1.2V NMOS /PMOS transistors is 0.06
  X = GT INSIDE EDGE (AA NOT INTERACT (DG OR TG))
  INT X < 0.06 ABUT<90 REGION
}
GT_1b {
@ Min Channel length for 1.8V NMOS/PMOS transistors is 0.20
  X = GT INSIDE EDGE (AA AND DG )
  Y = INT X < 0.20  ABUT<90 REGION
  Y NOT INSIDE INST
}
#IFDEF IO 1825
GT_1c  {
@ Min Channel length for 2.5V NMOS/PMOS transistors is 0.28
  X = GT INSIDE EDGE ((AA AND TG) NOT INTERACT UNDEPL)
  Y = INT X < 0.28  ABUT<90 REGION
  Y NOT INSIDE INST
}
#ENDIF
#IFDEF IO 1833
GT_1d {
@ Min Channel length for 3.3V NMOS/PMOS transistors is 0.38
  X = GT INSIDE EDGE (AA AND TG)  
  Y = INT X < 0.38 ABUT<90 REGION
  Y NOT INSIDE INST
}
#ENDIF
#IFDEF IO 1825
GT_1e {
@ Min Channel length for 2.5V NMOS/PMOS transistors (over drive to 3.3V and 4.1V) is 0.50(NMOS) and 0.40(PMOS).
  X = GT INSIDE EDGE ((NACT AND TG) AND OVERPL)
  Y = GT INSIDE EDGE ((PACT AND TG) AND OVERPL)
  Z1 = INT X < 0.50  ABUT<90 REGION
  Z2 = INT Y < 0.40  ABUT<90 REGION
  Z1 NOT INSIDE INST
  Z2 NOT INSIDE INST
}
GT_1f {
@ Min Channel length for 2.5V NMOS/PMOS transistors (under drive to 1.8V)
  X = GT INSIDE EDGE ((AA AND TG) AND UNDEPL)
  Y = INT X < 0.22 ABUT<90 REGION
  Y NOT INSIDE INST
}
#ENDIF
GT_2 {
@ Min Width of interconnect poly is 0.06
  INT (INTERGT NOT COIN EDGE GATE) < 0.06 ABUT<90 REGION
  INT GTDUM < 0.06 REGION
}
GT_3a {
@ Min Space between two GTs is 0.12
  X = EXT GT < 0.12 SINGULAR REGION
  X NOT INSIDE INST
  EXT GTDUM < 0.12 REGION
  Y = EXT GTDUM GTi < 0.12 REGION INSIDE ALSO
  Y NOT INSIDE INST
}
GT_3b {
@ Min Space between two GTs is 0.16 when one or both GT width is >= 0.4um,and the run length of two GTs is >=0.5um.
  GT_W = WITH WIDTH GT >= 0.4
  GT_S = EXT GT_W (GT OR GTDUM) < 0.16 OPPOSITE REGION PARA ONLY
  GT_LS = LENGTH GT_S >= 0.5
  GT_S WITH EDGE GT_LS

  GTDUM_W = WITH WIDTH GTDUM >= 0.4
  GTDUM_S = EXT GTDUM_W (GTi OR GTDUM) < 0.16 OPPOSITE REGION PARA ONLY
  GTDUM_LS = LENGTH GTDUM_S >= 0.5
  GTDUM_S WITH EDGE GTDUM_LS
}

LAYER MAP 999 DATATYPE 1111 4321
LAYER EMPTY 4321
GT_EMPTY = (GT AND AA) OR EMPTY
AA_EMPTY = AA OR EMPTY
CONNECT GT_EMPTY AA_EMPTY

#IFDEF Recommended_rules_CHECK YES
GT_3c_R {
@ Min Recommended space between GTs on the same AA is 0.19
@NOTICE: It is a recommended rule.
  X = EXT GT_EMPTY < 0.19 ABUT < 90 SINGULAR REGION CONNECTED
  X NOT INSIDE INST
}
GT_3d_R {
@ Min Recommended space between GTs on the same AA inside TG is 0.24
@NOTICE: It is a recommended rule.
 X = EXT (GT_EMPTY AND TG) < 0.24 ABUT < 90 SINGULAR REGION CONNECTED
 X NOT INSIDE INST
}
#ENDIF

GT_4 {
@ Space between AA and GT on field oxide is 0.05
  X = AA INSIDE EDGE GT
  Y = AA NOT COIN EDGE X
  A = EXT Y INTERGT < 0.05 ABUT<90 REGION
  A NOT INSIDE INST
  B = EXT AAi GTDUM < 0.05 REGION INSIDE ALSO
  B NOT INSIDE INST
  C = EXT GTi AADUM < 0.05 REGION INSIDE ALSO
  C NOT INSIDE INST
//  EXT AADUM GTDUM < 0.05 REGION
}
GT_5 {
@ Min Extension of AA outside of GT(not include dummy AA and dummy Poly) is 0.115
  X = ENC GT (AA NOT COIN EDGE STIDMY) < 0.115 ABUT<90 REGION OPPOSITE
  (X NOT INSIDE INST) NOT INSIDE INDMY
}
GT_6 {
@ Min Extension of poly end-cap outside of AA (not including dummy AA and dummy poly) is 0.14
  X = AA INSIDE EDGE GT
  Y = ENC X GT < 0.14 ABUT<90 opposite REGION
  Z = EXT GT < 0.002 ABUT==90 REGION INTERSECTING ONLY
  (Y NOT TOUCH Z) NOT INSIDE INST
}
GT_7a_Min {
@ Min GT density is 7%
  DENSITY (GTi OR GTDUM) < 0.07 WINDOW 200 STEP 100 BACKUP PRINT density_report_GT7a_min.log
}
GT_7a_Max {
@ Max. GT density is 70%
  DENSITY (GTi OR GTDUM) > 0.70 WINDOW 200 STEP 100 BACKUP PRINT density_report_GT7a_max.log
}

#IFDEF Recommended_rules_CHECK YES
GT_7b_Min_R {
@ Min Global GT density for fully chip (including dummy) is 10%
@NOTICE: It is a recommended rule.
  DENSITY (GTi OR GTDUM) < 0.10 PRINT density_report_GT7b_min.log
}
GT_7b_Max_R {
@ Max Global GT density for fully chip (including dummy) is 45%
@NOTICE: It is a recommended rule.
  DENSITY (GTi OR GTDUM) > 0.45 PRINT density_report_GT7b_max.log
}
GT_7c_R {
@ Min GT density inside of dummy block area is 10%, while the area of dummy block layer is larger than 2500um2 (50X50um).
@NOTICE: It is a recommended rule.
  X = AREA (DUMBP OR NODMF) > 2500
  DENSITY (GTi OR GTDUM) < 0.10 INSIDE OF LAYER X PRINT density_report_GT7c.log
}
#ENDIF

GT_8 {
@ No bent GT on AA is allowed.All GT patterns on AA have to be orthogonal to AA edage.
 /* X = GT INSIDE EDGE AA
  INT X < 0.01 ABUT == 90 REGION
  EXT X < 0.01 ABUT == 90 REGION
  INT X < 0.01 ABUT == 45 REGION
  EXT X < 0.01 ABUT == 45 REGION
  INT X < 0.01 ABUT == 135 REGION
  EXT X < 0.01 ABUT == 135 REGION*/

  X = EXT GT < 0.005 ABUT INTERSECTING ONLY REGION
  Y = (GT AND AA) TOUCH X
  SIZE Y BY 0.005 UNDEROVER
}
GT_9a {
@ SN extension outside of poly resistor is 0.16
  X = ENC GTR SN < 0.16 ABUT<90 SINGULAR REGION
  X NOT INSIDE INST
}
GT_9b {
@ SP extension outside of poly resistor is 0.16
  X = ENC GTR SP < 0.16 ABUT<90 SINGULAR REGION
  X NOT INSIDE INST
}

GT_10a {
@ Space between NLL/NLH/SN and a P- type poly resistor is 0.16
  X = (GTR AND SP) AND RESP1
  Y1 = EXT NLL X < 0.16 ABUT<90 SINGULAR REGION
  Y1 NOT INSIDE INST
  Y2 = EXT NLH X < 0.16 ABUT<90 SINGULAR REGION
  Y2 NOT INSIDE INST
  Y3 = EXT SN X < 0.16 ABUT<90 SINGULAR REGION
  Y3 NOT INSIDE INST
}
GT_10b {
@ Space between PLL/PLH/SP and a N- type poly resistor is 0.16
  X = (GTR AND SN) AND RESP1
  Y1 = EXT PLL X < 0.16 ABUT<90 SINGULAR REGION
  Y1 NOT INSIDE INST
  Y2 = EXT PLH X < 0.16 ABUT<90 SINGULAR REGION
  Y2 NOT INSIDE INST
  Y3 = EXT SP X < 0.16 ABUT<90 SINGULAR REGION
  Y3 NOT INSIDE INST
}
GT_11 {
@ GT is enclosed by SN and/or SP, except MOM and HRPDMY area (when checking the rule, size down the HRPDMY by 0.3um along the current direction).
  HRPR   = GT INTERACT HRPDMY
  HRP_END = SIZE (HRPR NOT HRPDMY) BY 0.3
  GT_MID =( GT INTERACT (HRPDMY OR HRP)) NOT HRP_END
  Y = ((((GT INTERACT CT) NOT GT_MID) NOT SP) NOT SN) NOT INTERACT MOMDMY
  Y NOT INSIDE INST
}
GT_12 {
@ SN and SP overlap on GT is not allowed
  (GT AND SN) AND SP
}
GT_13 {
@ Min GT area is 0.038.
  X = AREA GT < 0.038
  X NOT INSIDE INST
  AREA GTDUM < 0.038
}




DMACRO NPLH_68 LAY_IMP LAY_ACT ENC_SD ENC_GT ENC_EXTENSION {
 X = GT INSIDE EDGE LAY_ACT
 A = EXPAND EDGE X INSIDE BY ENC_EXTENSION OUTSIDE BY ENC_EXTENSION CORNER FILL
 Y = (GT AND LAY_ACT) COIN EDGE LAY_ACT
 B = EXPAND EDGE Y OUTSIDE BY ENC_GT EXTEND BY ENC_EXTENSION
 C = A OR B
 ENC LAY_ACT (LAY_IMP INSIDE EDGE C) < ENC_GT ABUT<90 REGION OPPOSITE
 ENC X LAY_IMP < ENC_SD ABUT<90 REGION OPPOSITE
}
DMACRO SNP_68 LAY_IMP LAY_ACT ENC_SD ENC_GT ENC_EXTENSION {
 X = GT INSIDE EDGE LAY_ACT
 A = EXPAND EDGE X INSIDE BY ENC_EXTENSION OUTSIDE BY ENC_EXTENSION CORNER FILL
 Y = (GT AND LAY_ACT) COIN EDGE LAY_ACT
 B = EXPAND EDGE Y OUTSIDE BY ENC_GT EXTEND BY ENC_EXTENSION
 C = A OR B
 D = ENC LAY_ACT (LAY_IMP INSIDE EDGE C) < ENC_GT ABUT<90 REGION OPPOSITE
 D NOT INSIDE INST
 E = ENC X LAY_IMP < ENC_SD ABUT<90 REGION OPPOSITE
 E NOT INSIDE INST
}

//================================================
//  NLL - 1.0/1.2V NLDD implantation design rules
//================================================

GROUP GNLL NLL_?

NLL_1 {
@ Min NLL width is 0.18
  INT NLL < 0.18 ABUT<90 SINGULAR REGION
}
NLL_2 {
@ Min Space between two NLL is 0.18
  EXT NLL < 0.18 ABUT<90 SINGULAR REGION
}
NLL_3 {
@ Min Space between NLL and P+ AA inside NW is 0.10
  X = (PACT NOT PTAP) NOT TOUCH EDGE NLL
  EXT NLL X < 0.10 ABUT<90 REGION
}
NLL_4 {
@ Min Space between NLL and P+ AA inside PW is 0.02
  X = PTAP NOT TOUCH EDGE NACT
  EXT NLL X < 0.02 ABUT<90 REGION
}
NLL_6_8 {
@ Min NLL extension outside of NMOS GATE along source/drain direction is 0.24
@ Min NLL extension outside of NMOS AA along gate poly length direction is 0.16, if distance to the related poly is less than or equal to 0.20um
  CMACRO NPLH_68 NLL NACT 0.24 0.16 0.2
}
NLL_7 {
@ Min NLL extension outside of NMOS AA along gate poly length direction is 0.12, if distance to the related poly is larger than 0.20um
  X = (NMOS AND NLL) TOUCH EDGE AAEIGT
   ENC X NLL < 0.12 ABUT<90 REGION
  NLL NOT INTERACT SN
}
NLL_10 {
@ Min Overlap of NLL and AA is 0.09
  INT NLL AA < 0.09 ABUT<90 SINGULAR REGION
}
NLL_11 {
@ Min NLL area is 0.100
  AREA NLL < 0.100
}
NLL_12 {
@ Min Space between NLL and butted P+AA (except SRAM area) is 0
  X = AND NLL PACT
  X NOT INSIDE INST
}


//===========================================================
//  NLH-NLHT: 1.8V-2.5/3.3V NLDD implantation design rules
//===========================================================

GROUP GNLH NLH_?

NLH_1_NLH {
@ Min NLH width is 0.18
  INT NLH < 0.18 ABUT<90 SINGULAR REGION
}
NLH_1_NLHT {
@ Min NLHT width is 0.18
  INT NLHT < 0.18 ABUT<90 SINGULAR REGION
}

NLH_2_NLH {
@ Min Space between two NLH is 0.18
  EXT NLH < 0.18 ABUT<90 SINGULAR REGION
}
NLH_2_NLHT {
@ Min Space between two NLHT is 0.18
  EXT NLHT < 0.18 ABUT<90 SINGULAR REGION
}

NLH_3_NLH {
@ Min Space between NLH/NLHT and P+ AA inside NW is 0.10
  X = (PACT NOT PTAP) NOT TOUCH EDGE NLH
  EXT NLH X < 0.10 ABUT<90 REGION
}
NLH_3_NLHT {
@ Min Space between NLHT and P+AA inside NW is 0.10
  X = (PACT NOT PTAP) NOT TOUCH EDGE NLHT
  EXT X NLHT < 0.10 ABUT<90 REGION
}

NLH_4_NLH {
@ Min Space between NLH/NLHT and P+ AA inside PW is 0.02
  X = PTAP NOT TOUCH EDGE NACT
  EXT NLH X < 0.02 ABUT<90 REGION
}
NLH_4_NLHT {
@ Min Space between NLH/NLHT and P+ AA inside PW is 0.02
  X = PTAP NOT TOUCH EDGE NACT
  EXT NLHT X < 0.02 ABUT<90 REGION
}

NLH_6_8_NLH {
@ Min NLH/NLHT extension outside of NMOS gate along source/drain direction is 0.24
@ Min NLH/NLHT extension outside of NMOS AA along gate poly length direction is 0.16, if distance to the related poly is less than or equal to 0.20um
 CMACRO NPLH_68 NLH NACT 0.24 0.16 0.2
}
NACT_NOT_LDBK = NACT NOT LDBK
NLH_6_8_NLHT {
@ Min NLH/NLHT extension outside of NMOS gate along source/drain direction is 0.24
@ Min NLH/NLHT extension outside of NMOS AA along gate poly length direction is 0.16, if distance to the related poly is less than or equal to 0.20um
  CMACRO NPLH_68 NLHT NACT_NOT_LDBK 0.24 0.16 0.2
}

NLH_7_NLH {
@ Min NLH extension outside of NMOS AA along gate poly length direction is 0.12,
@ if distance to the related poly is larger than 0.20um
  X = (NMOS AND NLH) TOUCH EDGE AAEIGT
  ENC X NLH < 0.12 ABUT<90 REGION
  NLH NOT INTERACT SN
}
NLH_7_NLHT {
@ Min NLHT extension outside of NMOS AA along gate poly length direction is 0.12,
@ if distance to the related poly is larger than 0.20um
  X = (NMOS AND NLHT) TOUCH EDGE AAEIGT
  ENC X NLHT < 0.12 ABUT<90 REGION
  NLHT NOT INTERACT SN
}

NLH_10_NLH {
@ Min Overlap of NLH/NLHT and AA is 0.09
  INT NLH AA < 0.09 ABUT<90 SINGULAR REGION
}
NLH_10_NLHT {
@ Min Overlap of NLH/NLHT and AA is 0.09
  INT NLHT AA < 0.09 ABUT<90 SINGULAR REGION
}

NLH_11_NLH {
@ Min NLH area is 0.100
  AREA NLH < 0.100
}
NLH_11_NLHT {
@ Min NLHT area is 0.100
  AREA NLHT < 0.100
}

NLH_12_NLH {
@ Min Space between NLH/NLHT and butted P+AA(except SRAM area) is 0
  X = NLH AND PACT
  X NOT INSIDE INST
}
NLH_12_NLHT {
@ @ Min Space between NLH/NLHT and butted P+AA(except SRAM area) is 0
  X = NLHT AND PACT
  X NOT INSIDE INST
}




//=====================================================
//  PLL - 1.0/1.2V PLDD implantation design rules
//=====================================================

GROUP GPLL PLL_?

PLL_1 {
@ Min PLL width is 0.18
  INT PLL < 0.18 ABUT<90 SINGULAR REGION
}
PLL_2 {
@ Min Space between two PLL is 0.18
  EXT PLL < 0.18 ABUT<90 SINGULAR REGION
}
PLL_3 {
@ Min Space between PLL and N+ AA inside PW is 0.10
  X = (NACT NOT NTAP) NOT TOUCH EDGE PLL
  EXT PLL X < 0.10 ABUT<90 REGION
}
PLL_4 {
@ Min Space between PLL and N+ AA inside NW is 0.02
  X = NTAP NOT TOUCH EDGE PACT
  EXT PLL X < 0.02 ABUT<90 REGION
}
PLL_6_8 {
@ Min PLL extension outside of PMOS gate along source/drain direction is 0.24.
@ Min PLL extension outside of PMOS AA along gate poly length direction is 0.16, if distance to the related poly is less than or equal to 0.20um
  CMACRO NPLH_68 PLL PACT 0.24 0.16 0.2
}
PLL_7 {
@ Min PLL extension outside of PMOS AA along gate poly length direction is 0.12, 
@ if distance to the related poly is larger than 0.20um
  X = (PMOS AND PLL) TOUCH EDGE AAEIGT
  ENC X PLL < 0.12 ABUT<90 REGION
  PLL NOT INTERACT SP
}
PLL_10 {
@ Min Overlap of PLL and AA is 0.09
  INT PLL AA < 0.09 ABUT<90 SINGULAR REGION
}
PLL_11 {
@ Min PLL area is 0.100
  AREA PLL < 0.100
}
PLL_12 {
@ Min Space between PLL and butted N+AA (except SRAM area) is 0.
  X = PLL AND NACT
  X NOT INSIDE INST
}



//==========================================================
//  PLH-PLHT: 1.8V-2.5/3.3V PLDD implantation design rules
//==========================================================

GROUP GPLH PLH_?

PLH_1_PLH {
@ Min PLH width is 0.18
  INT PLH < 0.18 ABUT<90 SINGULAR REGION
}
PLH_1_PLHT {
@ Min PLHT width is 0.18
  INT PLHT < 0.18 ABUT<90 SINGULAR REGION
}

PLH_2_PLH {
@ Min Space between two PLL is 0.18
  EXT PLH < 0.18 ABUT<90 SINGULAR REGION
}
PLH_2_PLHT {
@ Min Space between two PLHT is 0.18
  EXT PLHT < 0.18 ABUT<90 SINGULAR REGION
}

PLH_3_PLH {
@ Min Space between PLH and N+AA inside PW is 0.10
  X = (NACT NOT NTAP) NOT TOUCH EDGE PLH
  EXT PLH X < 0.10 ABUT<90 REGION
}
PLH_3_PLHT {
@ Min Space between PLHT and N+AA inside PW is 0.10          
  X = (NACT NOT NTAP) NOT TOUCH EDGE PLHT
  EXT PLHT X < 0.10 ABUT<90 REGION
}

PLH_4_PLH {
@ Min Space between PLH/PLHT and N+ AA inside N well is 0.02
  X = NTAP NOT TOUCH EDGE PACT
  EXT PLH X < 0.02 ABUT<90 REGION
}
PLH_4_PLHT {
@ Min Space between PLH/PLHT and N+ AA inside N well is 0.02
  X = NTAP NOT TOUCH EDGE PACT
  EXT PLHT X < 0.02 ABUT<90 REGION
}

PLH_6_8_PLH {
@ Min PLH/PLHT extension outside of PMOS gate along source/drain direction is 0.24
@ Min PLH/PLHT extension outside of PMOS AA along gate poly length direction, if distance to the related poly is less than or equal to 0.20um is 0.16
  CMACRO NPLH_68 PLH PACT 0.24 0.16 0.2
}
PACT_NOT_LDBK = PACT NOT LDBK
PLH_6_8_PLHT {
@ Min PLH/PLHT extension outside of PMOS gate along source/drain direction is 0.24
@ Min PLH/PLHT extension outside of PMOS AA along gate poly length direction, if distance to the related poly is less than or equal to 0.20um is 0.16
  CMACRO NPLH_68 PLHT PACT_NOT_LDBK 0.24 0.16 0.2
}

PLH_7_PLH {
@ Min PLH extension outside of PMOS AA along gate poly length direction is 0.12,
@ if distance to the related poly is larger than 0.20um
  X = (PMOS AND PLH) TOUCH EDGE AAEIGT
  ENC X PLH < 0.12 ABUT<90 REGION
  PLH NOT INTERACT SP
}
PLH_7_PLHT {
@ Min PLHT extension outside of PMOS AA along gate poly length direction is 0.12,
@ if distance to the related poly is larger than 0.20um
  X = (PMOS AND PLHT) TOUCH EDGE AAEIGT
  ENC X PLHT < 0.12 ABUT<90 REGION
  PLHT NOT INTERACT SP
}

PLH_10_PLH {
@ Min Overlap of PLH/PLHT and AA is 0.09
  INT PLH AA < 0.09 ABUT<90 SINGULAR REGION
}
PLH_10_PLHT {
@ Min Overlap of PLH/PLHT and AA is 0.09
  INT PLHT AA < 0.09 ABUT<90 SINGULAR REGION
}

PLH_11_PLH {
@ Min PLH area is 0.100
  AREA PLH < 0.100
}
PLH_11_PLHT {
@ Min PLHT area is 0.100
  AREA PLHT < 0.100
}

PLH_12_PLH {
@ Min Space between PLH/PLHT and butted N+AA (except SRAM area) is 0
  X = PLH AND NACT
  X NOT INSIDE INST
}
PLH_12_PLHT {
@ Min Space between PLH/PLHT and butted N+AA (except SRAM area) is 0
  X = PLHT AND NACT
  X NOT INSIDE INST
}



//=================================
//  SN - N+ S/D Implantation DRC
//=================================

GROUP GSN SN_?

SN_1 {
@ Min SN width is 0.18
  INT SN < 0.18 ABUT<90 REGION
}
SN_2 {
@ Min Space between two SN is 0.18
  EXT SN < 0.18 OPPOSITE ABUT<90 REGION
}
SN_3 {
@ Min Space between SN and P+AA inside NW is 0.10
  X = (PACT NOT PTAP) NOT TOUCH EDGE SN
  Y = EXT SN X < 0.10 ABUT<90 REGION
  Y NOT INSIDE INST
}
SN_4 {
@ Min Space between SN and P+ pickup AA inside PW is 0.02
  X = PTAP NOT TOUCH EDGE NACT
  Y = X NOT TOUCH EDGE SN
  EXT SN Y < 0.02 ABUT<90 REGION
}
SN_5 {
@ Min Space between SN and PMOS gate along source/drain direction is 0.24
  X = GATE_W INSIDE EDGE SP
  Y = EXT X SN < 0.24 ABUT<90 OPPOSITE  REGION
  Y NOT INSIDE INST
}
SN_6_8 {
@ Min SN extension outside of NMOS gate along source/drain direction is 0.24
@ Min SN extension outside of NMOS AA along gate poly length direction is 0.16, if the distance to the related poly is less than or equal to 0.20um
  SN_S = SN NOT INSIDE INST
  NACT_S = NACT NOT INSIDE INST
  CMACRO SNP_68 SN_S NACT_S 0.24 0.16 0.2
}
SN_7 {
@ Min SN extension outside of NMOS AA along gate poly length direction 0.12, if the distance to the related poly is larger than 0.20um
  X = NMOS TOUCH EDGE AAEIGT
  Y = ENC X SN < 0.12 ABUT<90 REGION
  Y NOT INSIDE INST
}
SN_9 {
@ Min N+AA enclosured by by SN in NW is 0.02
  X = ((NTAP NOT SNNR) NOT COIN EDGE PACT) NOT COIN EDGE SP
  ENC X SN < 0.02 ABUT<90 REGION
}
SN_10 {
@ Min Overlap of SN and AA is 0.09
  INT SN AA < 0.09 ABUT >0 <90 SINGULAR REGION
}
SN_11 {
@ Min SN area is 0.100
  AREA SN < 0.100
}
SN_12 {
@ Min Space between SN and butted P+AA (except SRAM area) is 0
  X = SN AND PACT
  X NOT INSIDE INST
}



//=======================================
//  SP - P+ S/D implantation DRC
//=======================================

GROUP GSP SP_?

SP_1 {
@ Min SP width is 0.18
  INT SP < 0.18 ABUT<90 REGION
}
SP_2 {
@ Min Space between two SP is 0.18
  EXT SP < 0.18 OPPOSITE ABUT<90 REGION
}
SP_3 {
@ Min Space between SP and N+AA inside PW is 0.10
  X = (NACT NOT NTAP) NOT TOUCH EDGE SP
  Y = EXT SP X < 0.10 ABUT<90 REGION
  Y NOT INSIDE INST
}
SP_4 {
@ Min Space between SP and N+ AA inside NW is 0.02
  X = NTAP NOT TOUCH EDGE PACT
  Y = X NOT TOUCH EDGE SP
  EXT SP Y < 0.02 ABUT<90 REGION
}
SP_5 {
@ Min Space between SP and NMOS gate along source/drain direction is 0.24
  X = GT INSIDE EDGE NACT
  Y = EXT SP X < 0.24 ABUT<90 REGION OPPOSITE
  Y NOT INSIDE INST
}
SP_6_8 {
@ Min SP extension outside of PMOS gate along source/drain direction is 0.24
@ Min SP extension outside of PMOS AA along gate poly length direction is 0.16, if the distance to the related poly is less than or equal to 0.20um
 SP_S = SP NOT INSIDE INST
 PACT_S = PACT NOT INSIDE INST
 CMACRO SNP_68 SP_S PACT_S 0.24 0.16 0.2
}
SP_7 {
@ Min SP extension outside of PMOS AA along gate poly length direction is 0.12, if the distance to the related poly is larger than 0.2um
  X = PMOS TOUCH EDGE AAEIGT
  Y = ENC X SP < 0.12 ABUT<90 REGION
  Y NOT INSIDE INST
}
SP_9 {
@ Min P+AA enclosure by SP in PW is 0.02
  X = ((PTAP NOT INTERACT NWR) NOT COIN EDGE NACT) NOT COIN EDGE SN
  ENC X SP < 0.02 ABUT<90 REGION
}
SP_10 {
@ Min Overlap of SP and AA is 0.09
  INT SP (AA NOT TOUCH EDGE SP) < 0.09 ABUT<90 REGION
}
SP_11 {
@ Min SP area is 0.100
  AREA SP < 0.100
}
SP_12 {
@ Min Space between SP and butted N+AA (except SRAM area) is 0
  X = SP AND NACT
  X NOT INSIDE INST
} 
SP_13 {
@ No SN and SP overlap is allowed
  AND SN SP
}
/*
SP_14 {
@ SP can not be generated by the reverse tone of SN
  DRC:1 NOT INTERACT (DRC:1 XOR (SN OR SP))
}*/


//=================================
//  SAB - Salicide Block DRC
//=================================

GROUP GSAB SAB_?

SAB_1 {
@ Min SAB width is 0.40um
  INT SAB < 0.40 ABUT<90 SINGULAR REGION
}
SAB_2 {
@ Min Space between two SABs is 0.40um
  EXT SAB < 0.40 ABUT<90 SINGULAR REGION
}
SAB_3 {
@ Min Extension of AA outside of SAB is 0.2um
  ENC SAB AA < 0.2 ABUT<90 SINGULAR REGION
}
SAB_4 {
@ Min Space between SAB and AA is 0.2um
  EXT SAB AA < 0.2 ABUT<90 SINGULAR REGION
}
SAB_5 {
@ Min Space between SAB and GT is 0.36,while the GT is on AA
  EXT SAB GATE < 0.36 ABUT<90 SINGULAR REGION
}
SAB_6 {
@ Min Extension of SAB outside of poly on field oxide is 0.2
  ENC INTERGT SAB < 0.2 ABUT<90 REGION
}
SAB_7 {
@ Min Space between SAB and CT is 0.2
  EXT SAB CT < 0.2 ABUT<90 SINGULAR REGION
}
SAB_8 {
@ Min Extension of SAB outside of AA is 0.2
  ENC AA SAB < 0.2 ABUT<90 SINGULAR REGION
}
SAB_9 {
@ Min SAB overlap with SN/SP is 0.20
  INT SN SAB < 0.20 ABUT<90 SINGULAR REGION
  INT SP SAB < 0.20 ABUT<90 SINGULAR REGION
}
SAB_10 {
@ Min SAB area is 0.5
  AREA SAB < 0.5
}
SAB_11 {
@ Min Space between a SAB and poly on field oxide is 0.28
  EXT SAB INTERGT < 0.28 ABUT<90 SINGULAR REGION
}


//========================
//  CT - Contact DRC
//========================

GROUP GCT CT_?

CT_1 {
@ Fixed contact size (square shape except rectangular CT in SRAM and EFUSE area) is 0.09
  X = NOT RECTANGLE ((CT NOT RCT) NOT GCT) == 0.09 BY == 0.09
  X NOT (MARKG OR INST)

  NOT RECTANGLE (RECTANGLE (CTi AND MARKG)) == 0.09 BY == 0.09

  NOT RECTANGLE (RECTANGLE (CTi AND INST) ASPECT == 1) == 0.09 BY == 0.09
}
CT_2a{
@ Min Space between two contacts is 0.11
  X = EXT CT < 0.11 ABUT<90 SINGULAR REGION
  X NOT INSIDE INST
}
CT_2b{
@ Min Space between two contacts  is 0.13 in case contact array is larger or equal to 4x4
@ Two contact regions whose space is within 0.15 are considered to be in the same array
  X = SIZE CT BY 0.075 OVERUNDER
  Y = SIZE X BY 0.340 UNDEROVER
  Z = CT INSIDE Y
  EXT Z < 0.13 ABUT<90 SINGULAR REGION
}
CT_3 {
@ Min Space between AA and contact on poly is 0.065
  EXT CT AA < 0.065 ABUT<90 SINGULAR REGION
}
CT_4a {
@ Min Space between poly to diffusion contact for 1.0/1.2V is 0.05
  X = EXT GATE ACT_CT < 0.05 ABUT<90 SINGULAR REGION 
  X NOT INSIDE INST
}
CT_4b {
@ Min Space between poly and contact on AA for 1.8/2.5/3.3V is 0.09
  X = EXT GATE (ACT_CT AND DGTG) < 0.09 ABUT<90 SINGULAR REGION
  X NOT INSIDE INST
}
CT_5 {
@ Min CT enclosure by AA for CT landed on AA is 0.015
  X = CT INTERACT AA
  Y = ENC X AA < 0.015 ABUT<90 SINGULAR REGION OUTSIDE ALSO
  Y NOT INSIDE INST
}
CT_6 {
@ Min CT enclosure by poly for CT landed on poly is 0.01
  X = CT INTERACT GT
  Y = ENC X GT < 0.01 ABUT<90 SINGULAR REGION OUTSIDE ALSO
  Y NOT INSIDE INST
}
CT_7a_7b {
@ Min M1 enclosure of CT is 0.00
@ Min M1 enclosure of CT when M1 enclosure on one or both perpendicular directions < 0.025um is 0.025
  X = RECTANGLE ENC (CT NOT TOUCH M1) M1 ABUT<90 OUTSIDE ALSO
  GOOD 0 0.025 OPPOSITE 0 0.025 OPPOSITE

  A = ENC [X] M1 < 0.025 OPPOSITE
  D1 = INT A < 0.01 ABUT==90 INTERSECTING ONLY REGION      //; For CT not touching M1
  D1 NOT INSIDE INST

  B = CT COIN EDGE M1
  D2 = INT B < 0.01 ABUT==90 REGION        //; For CT touch M1 with >= 2 butting edges
  D2 NOT INSIDE INST

  Y = ENC CT M1 < 0.025 OPPOSITE REGION
  C1 = CT COIN EDGE M1
  C2 = CT COIN EDGE Y
  D3 = INT C1 C2 < 0.01 ABUT==90 REGION	//; For CT touch M1 with only 1 edge
  D3 NOT INSIDE INST

  (CT NOT M1) NOT INSIDE INST
  CT NOT INTERACT M1
}
CT_9  {
@ CT is not allowed to land on gate
  ((AND GATE CT) NOT INSIDE INST) NOT INSIDE INDMY
}
CT_10 {
@ CT should land on salicided surface (except MARKG/MARKS covered areas)
  (AND SAB CT) NOT MARKG
}



//=====================
//  Fat Metal find
//=====================


SLWIDE_M1 = M1 INTERACT (SIZE M1 BY -4)   // wide metal
SLWDM1_45 = ANGLE SLWIDE_M1 >0<90
SLWDM1_90 = NOT ANGLE SLWIDE_M1 >0<90
SLWDM1_EXP_45 = EXPAND EDGE SLWDM1_45 INSIDE BY 4*1.414213562
SLWDM1_EXP_90 = EXPAND EDGE SLWDM1_90 INSIDE BY 4 EXTEND BY 4
SLTHIN_M1_TMP = SLWIDE_M1 NOT (SLWDM1_EXP_45 OR SLWDM1_EXP_90)
SLTHIN_M1 = SNAP SLTHIN_M1_TMP 1            // end of shrink
// begin grow
SLTNM1_45 = ANGLE SLTHIN_M1 >0<90
SLTNM1_90 = NOT ANGLE SLTHIN_M1 >0<90
SLTNM1_EXP_45_TMP = EXPAND EDGE SLTNM1_45 OUTSIDE BY 4*1.414213562
SLTNM1_EXP_45 = SNAP SLTNM1_EXP_45_TMP 1
SLTNM1_EXP_90 = EXPAND EDGE SLTNM1_90 OUTSIDE BY 4 EXTEND BY 4
SLTNM1_EXP = SLTNM1_EXP_45 OR SLTNM1_EXP_90
SLWDM1_PRE = SLTNM1_EXP OR SLTHIN_M1
SLWDM1_PRE_FILL = EXT SLWDM1_PRE < 4 ABUT>0<90 INTERSECTING ONLY REGION
M1OVER8 = SLWDM1_PRE OR SLWDM1_PRE_FILL    // end of grow

SLWIDE_M2 = M2 INTERACT (SIZE M2 BY -4)   // wide metal
SLWDM2_45 = ANGLE SLWIDE_M2 >0<90
SLWDM2_90 = NOT ANGLE SLWIDE_M2 >0<90
SLWDM2_EXP_45 = EXPAND EDGE SLWDM2_45 INSIDE BY 4*1.414213562
SLWDM2_EXP_90 = EXPAND EDGE SLWDM2_90 INSIDE BY 4 EXTEND BY 4
SLTHIN_M2_TMP = SLWIDE_M2 NOT (SLWDM2_EXP_45 OR SLWDM2_EXP_90)
SLTHIN_M2 = SNAP SLTHIN_M2_TMP 1            // end of shrink
// begin grow
SLTNM2_45 = ANGLE SLTHIN_M2 >0<90
SLTNM2_90 = NOT ANGLE SLTHIN_M2 >0<90
SLTNM2_EXP_45_TMP = EXPAND EDGE SLTNM2_45 OUTSIDE BY 4*1.414213562
SLTNM2_EXP_45 = SNAP SLTNM2_EXP_45_TMP 1
SLTNM2_EXP_90 = EXPAND EDGE SLTNM2_90 OUTSIDE BY 4 EXTEND BY 4
SLTNM2_EXP = SLTNM2_EXP_45 OR SLTNM2_EXP_90
SLWDM2_PRE = SLTNM2_EXP OR SLTHIN_M2
SLWDM2_PRE_FILL = EXT SLWDM2_PRE < 4 ABUT>0<90 INTERSECTING ONLY REGION
M2OVER15 = SLWDM2_PRE OR SLWDM2_PRE_FILL    // end of grow

SLWIDE_M3 = M3 INTERACT (SIZE M3 BY -4)   // wide metal
SLWDM3_45 = ANGLE SLWIDE_M3 >0<90
SLWDM3_90 = NOT ANGLE SLWIDE_M3 >0<90
SLWDM3_EXP_45 = EXPAND EDGE SLWDM3_45 INSIDE BY 4*1.414213562
SLWDM3_EXP_90 = EXPAND EDGE SLWDM3_90 INSIDE BY 4 EXTEND BY 4
SLTHIN_M3_TMP = SLWIDE_M3 NOT (SLWDM3_EXP_45 OR SLWDM3_EXP_90)
SLTHIN_M3 = SNAP SLTHIN_M3_TMP 1            // end of shrink
// begin grow
SLTNM3_45 = ANGLE SLTHIN_M3 >0<90
SLTNM3_90 = NOT ANGLE SLTHIN_M3 >0<90
SLTNM3_EXP_45_TMP = EXPAND EDGE SLTNM3_45 OUTSIDE BY 4*1.414213562
SLTNM3_EXP_45 = SNAP SLTNM3_EXP_45_TMP 1
SLTNM3_EXP_90 = EXPAND EDGE SLTNM3_90 OUTSIDE BY 4 EXTEND BY 4
SLTNM3_EXP = SLTNM3_EXP_45 OR SLTNM3_EXP_90
SLWDM3_PRE = SLTNM3_EXP OR SLTHIN_M3
SLWDM3_PRE_FILL = EXT SLWDM3_PRE < 4 ABUT>0<90 INTERSECTING ONLY REGION
M3OVER15 = SLWDM3_PRE OR SLWDM3_PRE_FILL    // end of grow

SLWIDE_M4 = M4 INTERACT (SIZE M4 BY -4)   // wide metal
SLWDM4_45 = ANGLE SLWIDE_M4 >0<90
SLWDM4_90 = NOT ANGLE SLWIDE_M4 >0<90
SLWDM4_EXP_45 = EXPAND EDGE SLWDM4_45 INSIDE BY 4*1.414213562
SLWDM4_EXP_90 = EXPAND EDGE SLWDM4_90 INSIDE BY 4 EXTEND BY 4
SLTHIN_M4_TMP = SLWIDE_M4 NOT (SLWDM4_EXP_45 OR SLWDM4_EXP_90)
SLTHIN_M4 = SNAP SLTHIN_M4_TMP 1            // end of shrink
// begin grow
SLTNM4_45 = ANGLE SLTHIN_M4 >0<90
SLTNM4_90 = NOT ANGLE SLTHIN_M4 >0<90
SLTNM4_EXP_45_TMP = EXPAND EDGE SLTNM4_45 OUTSIDE BY 4*1.414213562
SLTNM4_EXP_45 = SNAP SLTNM4_EXP_45_TMP 1
SLTNM4_EXP_90 = EXPAND EDGE SLTNM4_90 OUTSIDE BY 4 EXTEND BY 4
SLTNM4_EXP = SLTNM4_EXP_45 OR SLTNM4_EXP_90
SLWDM4_PRE = SLTNM4_EXP OR SLTHIN_M4
SLWDM4_PRE_FILL = EXT SLWDM4_PRE < 4 ABUT>0<90 INTERSECTING ONLY REGION
M4OVER15 = SLWDM4_PRE OR SLWDM4_PRE_FILL    // end of grow



SLWIDE_M5 = M5 INTERACT (SIZE M5 BY -4)   // wide metal
SLWDM5_45 = ANGLE SLWIDE_M5 >0<90
SLWDM5_90 = NOT ANGLE SLWIDE_M5 >0<90
SLWDM5_EXP_45 = EXPAND EDGE SLWDM5_45 INSIDE BY 4*1.414213562
SLWDM5_EXP_90 = EXPAND EDGE SLWDM5_90 INSIDE BY 4 EXTEND BY 4
SLTHIN_M5_TMP = SLWIDE_M5 NOT (SLWDM5_EXP_45 OR SLWDM5_EXP_90)
SLTHIN_M5 = SNAP SLTHIN_M5_TMP 1            // end of shrink
// begin grow
SLTNM5_45 = ANGLE SLTHIN_M5 >0<90
SLTNM5_90 = NOT ANGLE SLTHIN_M5 >0<90
SLTNM5_EXP_45_TMP = EXPAND EDGE SLTNM5_45 OUTSIDE BY 4*1.414213562
SLTNM5_EXP_45 = SNAP SLTNM5_EXP_45_TMP 1
SLTNM5_EXP_90 = EXPAND EDGE SLTNM5_90 OUTSIDE BY 4 EXTEND BY 4
SLTNM5_EXP = SLTNM5_EXP_45 OR SLTNM5_EXP_90
SLWDM5_PRE = SLTNM5_EXP OR SLTHIN_M5
SLWDM5_PRE_FILL = EXT SLWDM5_PRE < 4 ABUT>0<90 INTERSECTING ONLY REGION
M5OVER15 = SLWDM5_PRE OR SLWDM5_PRE_FILL    // end of grow


SLWIDE_M6 = M6 INTERACT (SIZE M6 BY -4)   // wide metal
SLWDM6_45 = ANGLE SLWIDE_M6 >0<90
SLWDM6_90 = NOT ANGLE SLWIDE_M6 >0<90
SLWDM6_EXP_45 = EXPAND EDGE SLWDM6_45 INSIDE BY 4*1.414213562
SLWDM6_EXP_90 = EXPAND EDGE SLWDM6_90 INSIDE BY 4 EXTEND BY 4
SLTHIN_M6_TMP = SLWIDE_M6 NOT (SLWDM6_EXP_45 OR SLWDM6_EXP_90)
SLTHIN_M6 = SNAP SLTHIN_M6_TMP 1            // end of shrink
// begin grow
SLTNM6_45 = ANGLE SLTHIN_M6 >0<90
SLTNM6_90 = NOT ANGLE SLTHIN_M6 >0<90
SLTNM6_EXP_45_TMP = EXPAND EDGE SLTNM6_45 OUTSIDE BY 4*1.414213562
SLTNM6_EXP_45 = SNAP SLTNM6_EXP_45_TMP 1
SLTNM6_EXP_90 = EXPAND EDGE SLTNM6_90 OUTSIDE BY 4 EXTEND BY 4
SLTNM6_EXP = SLTNM6_EXP_45 OR SLTNM6_EXP_90
SLWDM6_PRE = SLTNM6_EXP OR SLTHIN_M6
SLWDM6_PRE_FILL = EXT SLWDM6_PRE < 4 ABUT>0<90 INTERSECTING ONLY REGION
M6OVER15 = SLWDM6_PRE OR SLWDM6_PRE_FILL    // end of grow


SLWIDE_TM1a = TM1 INTERACT (SIZE TM1 BY -10)   // wide metal
SLWDTMa_45 = ANGLE SLWIDE_TM1a >0<90
SLWDTMa_90 = NOT ANGLE SLWIDE_TM1a >0<90
SLWDTMa_EXP_45 = EXPAND EDGE SLWDTMa_45 INSIDE BY 10*1.414213562
SLWDTMa_EXP_90 = EXPAND EDGE SLWDTMa_90 INSIDE BY 10 EXTEND BY 10
SLTHIN_TMa_TMP = SLWIDE_TM1a NOT (SLWDTMa_EXP_45 OR SLWDTMa_EXP_90)
SLTHIN_TM1a = SNAP SLTHIN_TMa_TMP 1            // end of shrink
// begin grow
SLTNTMa_45 = ANGLE SLTHIN_TM1a >0<90
SLTNTMa_90 = NOT ANGLE SLTHIN_TM1a >0<90
SLTNTMa_EXP_45_TMP = EXPAND EDGE SLTNTMa_45 OUTSIDE BY 10*1.414213562
SLTNTMa_EXP_45 = SNAP SLTNTMa_EXP_45_TMP 1
SLTNTMa_EXP_90 = EXPAND EDGE SLTNTMa_90 OUTSIDE BY 10 EXTEND BY 10
SLTNTMa_EXP = SLTNTMa_EXP_45 OR SLTNTMa_EXP_90
SLWDTMa_PRE = SLTNTMa_EXP OR SLTHIN_TM1a
SLWDTMa_PRE_FILL = EXT SLWDTMa_PRE < 10 ABUT>0<90 INTERSECTING ONLY REGION
TMaOVER20 = SLWDTMa_PRE OR SLWDTMa_PRE_FILL    // end of grow

SLWIDE_TM1b = TM1 INTERACT (SIZE TM1 BY -10)   // wide metal
SLWDTMb_45 = ANGLE SLWIDE_TM1b >0<90
SLWDTMb_90 = NOT ANGLE SLWIDE_TM1b >0<90
SLWDTMb_EXP_45 = EXPAND EDGE SLWDTMb_45 INSIDE BY 10*1.414213562
SLWDTMb_EXP_90 = EXPAND EDGE SLWDTMb_90 INSIDE BY 10 EXTEND BY 10
SLTHIN_TMb_TMP = SLWIDE_TM1b NOT (SLWDTMb_EXP_45 OR SLWDTMb_EXP_90)
SLTHIN_TM1b = SNAP SLTHIN_TMb_TMP 1            // end of shrink
// begin grow
SLTNTMb_45 = ANGLE SLTHIN_TM1b >0<90
SLTNTMb_90 = NOT ANGLE SLTHIN_TM1b >0<90
SLTNTMb_EXP_45_TMP = EXPAND EDGE SLTNTMb_45 OUTSIDE BY 10*1.414213562
SLTNTMb_EXP_45 = SNAP SLTNTMb_EXP_45_TMP 1
SLTNTMb_EXP_90 = EXPAND EDGE SLTNTMb_90 OUTSIDE BY 10 EXTEND BY 10
SLTNTMb_EXP = SLTNTMb_EXP_45 OR SLTNTMb_EXP_90
SLWDTMb_PRE = SLTNTMb_EXP OR SLTHIN_TM1b
SLWDTMb_PRE_FILL = EXT SLWDTMb_PRE < 10 ABUT>0<90 INTERSECTING ONLY REGION
TMbOVER20 = SLWDTMb_PRE OR SLWDTMb_PRE_FILL    // end of grow


SLWIDE_TM2a = TM2 INTERACT (SIZE TM2 BY -15)   // wide metal
SLWDTMa_452 = ANGLE SLWIDE_TM2a >0<90
SLWDTMa_902 = NOT ANGLE SLWIDE_TM2a >0<90
SLWDTMa_EXP_452 = EXPAND EDGE SLWDTMa_452 INSIDE BY 15*1.414213562
SLWDTMa_EXP_902 = EXPAND EDGE SLWDTMa_902 INSIDE BY 15 EXTEND BY 15
SLTHIN_TMa_TMP2 = SLWIDE_TM2a NOT (SLWDTMa_EXP_452 OR SLWDTMa_EXP_902)
SLTHIN_TM2a = SNAP SLTHIN_TMa_TMP2 1            // end of shrink
// begin grow
SLTNTMa_452 = ANGLE SLTHIN_TM2a >0<90
SLTNTMa_902 = NOT ANGLE SLTHIN_TM2a >0<90
SLTNTMa_EXP_45_TMP2 = EXPAND EDGE SLTNTMa_452 OUTSIDE BY 15*1.414213562
SLTNTMa_EXP_452 = SNAP SLTNTMa_EXP_45_TMP2 1
SLTNTMa_EXP_902 = EXPAND EDGE SLTNTMa_902 OUTSIDE BY 15 EXTEND BY 15
SLTNTMa_EXP2 = SLTNTMa_EXP_452 OR SLTNTMa_EXP_902
SLWDTMa_PRE2 = SLTNTMa_EXP2 OR SLTHIN_TM2a
SLWDTMa_PRE_FILL2 = EXT SLWDTMa_PRE2 < 15 ABUT>0<90 INTERSECTING ONLY REGION
TMaOVER30 = SLWDTMa_PRE2 OR SLWDTMa_PRE_FILL2    // end of grow
 

SLWIDE_TM2b = TM2 INTERACT (SIZE TM2 BY -10)   // wide metal
SLWDTMb_452 = ANGLE SLWIDE_TM2b >0<90
SLWDTMb_902 = NOT ANGLE SLWIDE_TM2b >0<90
SLWDTMb_EXP_452 = EXPAND EDGE SLWDTMb_452 INSIDE BY 10*1.414213562
SLWDTMb_EXP_902 = EXPAND EDGE SLWDTMb_902 INSIDE BY 10 EXTEND BY 10
SLTHIN_TMb_TMP2 = SLWIDE_TM2b NOT (SLWDTMb_EXP_452 OR SLWDTMb_EXP_902)
SLTHIN_TM2b = SNAP SLTHIN_TMb_TMP2 1            // end of shrink
// begin grow
SLTNTMb_452 = ANGLE SLTHIN_TM2b >0<90
SLTNTMb_902 = NOT ANGLE SLTHIN_TM2b >0<90
SLTNTMb_EXP_45_TMP2 = EXPAND EDGE SLTNTMb_452 OUTSIDE BY 10*1.414213562
SLTNTMb_EXP_452 = SNAP SLTNTMb_EXP_45_TMP2 1
SLTNTMb_EXP_902 = EXPAND EDGE SLTNTMb_902 OUTSIDE BY 10 EXTEND BY 10
SLTNTMb_EXP2 = SLTNTMb_EXP_452 OR SLTNTMb_EXP_902
SLWDTMb_PRE2 = SLTNTMb_EXP2 OR SLTHIN_TM2b
SLWDTMb_PRE_FILL2 = EXT SLWDTMb_PRE2 < 10 ABUT>0<90 INTERSECTING ONLY REGION
TM2bOVER20 = SLWDTMb_PRE2 OR SLWDTMb_PRE_FILL2    // end of grow

SLWIDE_TTM = TM2 INTERACT (SIZE TM2 BY -25)   // wide metal
SLWDTTM_45 = ANGLE SLWIDE_TTM >0<90
SLWDTTM_90 = NOT ANGLE SLWIDE_TTM >0<90
SLWDTTM_EXP_45 = EXPAND EDGE SLWDTTM_45 INSIDE BY 25*1.414213562
SLWDTTM_EXP_90 = EXPAND EDGE SLWDTTM_90 INSIDE BY 25 EXTEND BY 25
SLTHIN_TTM_TMP = SLWIDE_TTM NOT (SLWDTTM_EXP_45 OR SLWDTTM_EXP_90)
SLTHIN_TTM = SNAP SLTHIN_TTM_TMP 1            // end of shrink
// begin grow
SLTNTTM_45 = ANGLE SLTHIN_TTM >0<90
SLTNTTM_90 = NOT ANGLE SLTHIN_TTM >0<90
SLTNTTM_EXP_45_TMP = EXPAND EDGE SLTNTTM_45 OUTSIDE BY 25*1.414213562
SLTNTTM_EXP_45 = SNAP SLTNTTM_EXP_45_TMP 1
SLTNTTM_EXP_90 = EXPAND EDGE SLTNTTM_90 OUTSIDE BY 25 EXTEND BY 25
SLTNTTM_EXP = SLTNTTM_EXP_45 OR SLTNTTM_EXP_90
SLWDTTM_PRE = SLTNTTM_EXP OR SLTHIN_TTM
SLWDTTM_PRE_FILL = EXT SLWDTTM_PRE < 25 ABUT>0<90 INTERSECTING ONLY REGION
TTMOVER50 = SLWDTTM_PRE OR SLWDTTM_PRE_FILL    // end of grow

DMACRO Mn_2b MTLAY MTLEN MTWID MTSPA {
 X0_a = MTLAY WITH WIDTH >= MTWID
 X0 = ENCLOSE RECTANGLE X0_a MTLEN MTWID
 X1 = EXT MTLAY < MTSPA OPPOSITE REGION PARA ONLY
 X2 = LENGTH X1 >= MTLEN
 X3 = X2 TOUCH EDGE X0
 X4_near = EXPAND EDGE X3 OUTSIDE BY MTWID
 X4_far  = (EXPAND EDGE X3 OUTSIDE BY (MTWID + 0.01)) NOT X4_near
 X5 = X4_near NOT MTLAY
 X6_near = EXT X1 X5 < MTWID OPPOSITE REGION
 X6_far  = EXT X4_far X5 < MTWID OPPOSITE REGION
 X7 = (X4_near NOT X5) NOT (X6_near OR X6_far)
 X7_edge = LENGTH (X7 COIN EDGE X1) >= MTLEN
 X7_expand = EXPAND EDGE X7_edge OUTSIDE BY MTSPA
 (X7_expand AND X1) NOT X5
}

DMACRO Mn_2c MTLAY MTLEN MTWID MTSPA {
 X0_a = MTLAY WITH WIDTH >= MTLEN
 X0 = ENCLOSE RECTANGLE X0_a MTLEN MTWID
 X1 = EXT MTLAY < MTSPA OPPOSITE REGION PARA ONLY
 X2 = LENGTH X1 >= MTLEN
 X3 = X2 TOUCH EDGE X0
 X4_near = EXPAND EDGE X3 OUTSIDE BY MTWID
 X4_far  = (EXPAND EDGE X3 OUTSIDE BY (MTWID + 0.01)) NOT X4_near
 X5 = X4_near NOT MTLAY
 X6_near = EXT X1 X5 < MTWID OPPOSITE REGION
 X6_far  = EXT X4_far X5 < MTWID OPPOSITE REGION
 X7 = (X4_near NOT X5) NOT (X6_near OR X6_far)
 X7_edge = LENGTH (X7 COIN EDGE X1) >= MTLEN
 X7_expand = EXPAND EDGE X7_edge OUTSIDE BY MTSPA
 (X7_expand AND X1) NOT X5
}

DMACRO Mn_2b_DUM MTLAY DUMMY2 MTLEN MTWID MTSPA {
 X0_a = MTLAY WITH WIDTH >= MTWID
 X0 = ENCLOSE RECTANGLE X0_a MTLEN MTWID
 X1 = EXT MTLAY < MTSPA OPPOSITE REGION PARA ONLY
 X2 = LENGTH X1 >= MTLEN
 X3 = X2 TOUCH EDGE X0
 X4_near = EXPAND EDGE X3 OUTSIDE BY MTWID
 X4_far  = (EXPAND EDGE X3 OUTSIDE BY (MTWID + 0.01)) NOT X4_near
 X5 = X4_near NOT MTLAY
 X6_near = EXT X1 X5 < MTWID OPPOSITE REGION
 X6_far  = EXT X4_far X5 < MTWID OPPOSITE REGION
 X7 = (X4_near NOT X5) NOT (X6_near OR X6_far)
 X7_edge = LENGTH (X7 COIN EDGE X1) >= MTLEN
 X7_expand = EXPAND EDGE X7_edge OUTSIDE BY MTSPA
 X8 = (X7_expand AND X1) NOT X5
 X8 INTERACT DUMMY2 
}

DMACRO Mn_2c_DUM MTLAY DUMMY2 MTLEN MTWID MTSPA {
 X0_a = MTLAY WITH WIDTH >= MTLEN
 X0 = ENCLOSE RECTANGLE X0_a MTLEN MTWID
 X1 = EXT MTLAY < MTSPA OPPOSITE REGION PARA ONLY
 X2 = LENGTH X1 >= MTLEN
 X3 = X2 TOUCH EDGE X0
 X4_near = EXPAND EDGE X3 OUTSIDE BY MTWID
 X4_far  = (EXPAND EDGE X3 OUTSIDE BY (MTWID + 0.01)) NOT X4_near
 X5 = X4_near NOT MTLAY
 X6_near = EXT X1 X5 < MTWID OPPOSITE REGION
 X6_far  = EXT X4_far X5 < MTWID OPPOSITE REGION
 X7 = (X4_near NOT X5) NOT (X6_near OR X6_far)
 X7_edge = LENGTH (X7 COIN EDGE X1) >= MTLEN
 X7_expand = EXPAND EDGE X7_edge OUTSIDE BY MTSPA
 X8 = (X7_expand AND X1) NOT X5
 X8 INTERACT DUMMY2 
}

//=====================
//  M1 - Metal 1 DRC
//=====================

/*
//--* Find Wide Metal *--//


WIDE_M1 = M1 INTERACT (SIZE M1 BY -2.5)   // wide metal

// begin shrink
WDM1_45 = ANGLE WIDE_M1 >0<90
WDM1_90 = NOT ANGLE WIDE_M1 >0<90

WDM1_EXP_45 = EXPAND EDGE WDM1_45 INSIDE BY 2.5*1.414213562
WDM1_EXP_90 = EXPAND EDGE WDM1_90 INSIDE BY 2.5 EXTEND BY 2.5

THIN_M1_TMP = WIDE_M1 NOT (WDM1_EXP_45 OR WDM1_EXP_90)
THIN_M1 = SNAP THIN_M1_TMP 1            // end of shrink

// begin grow
TNM1_45 = ANGLE THIN_M1 >0<90
TNM1_90 = NOT ANGLE THIN_M1 >0<90

TNM1_EXP_45_TMP = EXPAND EDGE TNM1_45 OUTSIDE BY 2.5*1.414213562
TNM1_EXP_45 = SNAP TNM1_EXP_45_TMP 1
TNM1_EXP_90 = EXPAND EDGE TNM1_90 OUTSIDE BY 2.5 EXTEND BY 2.5

TNM1_EXP = TNM1_EXP_45 OR TNM1_EXP_90

WDM1_PRE = TNM1_EXP OR THIN_M1
WDM1_PRE_FILL = EXT WDM1_PRE < 2.5 ABUT>0<90 INTERSECTING ONLY REGION

M1OVER5 = WDM1_PRE OR WDM1_PRE_FILL    // end of grow


//--* End of Finding Wide Metal *--//
*/

GROUP GM1 M1_?

M1_1 {
@ Min M1 width is 0.09
  INT M1 < 0.09 SINGULAR REGION
  INT M1DUM < 0.09 REGION
}
M1_2a {
@ Min Space between two M1 is 0.09
  X = EXT M1 < 0.09 SINGULAR REGION
  X NOT INSIDE INST
  EXT M1i M1DUM < 0.09 SINGULAR REGION INSIDE ALSO
  EXT M1DUM < 0.09 SINGULAR REGION
}
M1ALL = M1i OR M1DUM
M1_2b {
@ Min Space between two M1s is 0.16 when one or both M1 width or length >=1um, and the run length of two M1s is >=2um
CMACRO Mn_2b M1ALL 2 1 0.16
}
M1_2c {
@ Min Space between two M1s is 0.5 when one or both M1 width or length >= 5um, and run length of two M1s is >= 2um
CMACRO Mn_2c M1ALL 2 5 0.5
}
M1_3 {
@ Max M1 width is 12.
  (M1 OR M1DUM) WITH WIDTH > 12
}
M1_4 {
@ Min M1 area is 0.027
 X = AREA (M1 OR M1DUM) < 0.027
 X NOT INSIDE INST
}
M1_5 {
@ Min Enclosed dielectric area by M1 is 0.13
  X = HOLES M1 INNER EMPTY
  AREA X < 0.13
}
density_checkarea = DRC:1 NOT INDMY
M1_6al {
@ M1 density (including dummy) in 200umX200um window with step size 100um is >= 18% and <= 80%. 
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY M1ALL < 0.18 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_M1_6al.log
  (X NOT MARKF) NOT MARKG
}
M1_6ah {
@ M1 density (including dummy) in 200umX200um window with step size 100um is >= 18% and <= 80%. 
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY M1ALL > 0.80 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_M1_6ah.log
  (X NOT MARKF) NOT MARKG
}
M1_6b {
@ Max M1 density (including dummy) in 50umX50um window with step size 25um is 90%
  DENSITY M1ALL > 0.90 WINDOW 50 STEP 25 backup PRINT density_report_M1_6b.log
}
M1_6c {
@ The max difference between M1 density in 200umX200um with step size 200um and those of the adjacent checking windows (including dummy) is 40%. 
@ INDMY/MARKG/MARKF/MARKS covered areas are excluded for this rule checking
  X = DENSITY M1ALL >= 0 WINDOW 200 GRADIENT > 0.4 ABSOLUTE BACKUP INSIDE OF LAYER density_checkarea PRINT density_report_M1_6c.log
  (X NOT MARKF) NOT MARKG
}
M1_6d {
@ Min M1 density (including dummy) in 25umX25um window with step size 12.5um is 12%.
@ INDMY/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY M1ALL < 0.12 WINDOW 25 STEP 12.5 backup INSIDE OF LAYER density_checkarea PRINT density_report_M1_6d.log
  X NOT MARKG
}

#IFDEF Recommended_rules_CHECK YES
M1_6e_min_R {
@ M1 average density inside the dummy block area in 25umX25um window with step size 12.5um is >= 12% and <= 90% when the dummy block area >= 25umX25um. 
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking.
@ Device sensitive areas can be waived.
@NOTICE: It is a recommended rule.
  X = DENSITY (M1i OR M1DUM) < 0.12 WINDOW 25 STEP 12.5 backup PRINT density_report_M16e_min.log
  Y = ((DUMBM OR M1DUB) OR NODMF) NOT ((INDMY OR MARKF) OR MARKG)
  Z = SIZE Y BY 12.5 UNDEROVER
  X AND Z
}
M1_6e_max_R {
@ M1 average density inside the dummy block area in 25umX25um window with step size 12.5um is >= 12% and <= 90% when the dummy block area >= 25umX25um. 
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking.
@ Device sensitive areas can be waived.
@NOTICE: It is a recommended rule.
  X = DENSITY (M1i OR M1DUM) > 0.90 WINDOW 25 STEP 12.5 backup PRINT density_report_M16e_max.log
  Y = ((DUMBM OR M1DUB) OR NODMF) NOT ((INDMY OR MARKF) OR MARKG)
  Z = SIZE Y BY 12.5 UNDEROVER
  X AND Z
}
#ENDIF

M1_7_a {
@ Min Space between metal lines with one or both are 45 degree, and the bending metal length>=0.5um is 0.105
@ (the area with 0.1um distance from bending point need not follow this rule)
  X = ANGLE M1 == 45
  Y = LENGTH X >= 0.5
  EXT Y < 0.105 REGION
}
M1_7_b {
@ Min Space between metal lines with one or both are 45 degree, and the bending metal length>=0.5um is 0.105
@ (the area with 0.1um distance from bending point need not follow this rule)
  X = ANGLE M1 == 45
  Y = LENGTH X >= 0.5
  EXT Y M1 < 0.105 REGION CORNER TO EDGE
}
/*M1_9 {
@ Space between two length >=1um parallel metal lines is 0.15
@ with one or both metal line width >= 0.4
  X = SIZE M1 BY 0.199 UNDEROVER
  Y = EXT X M1 < 0.15 ABUT==0 REGION OPPOSITE PARA ONLY
  LENGTH Y >= 1
}*/


//========================
//  V1 - Via 1 DRC
//========================

GROUP GV1 V1_?

V1_1 {
@ Fixed V1 size(square shape) is 0.09
  (NOT RECTANGLE (V1 NOT GV1) == 0.09 BY == 0.09) NOT V1_slot_SG
}
V1_2a {
@ Min Space between two V1 is 0.11
  EXT V1 < 0.11 ABUT<90 SINGULAR REGION
}
V1_2b {
@ Min Space between V1s when array equal to or greater than 4*4 is 0.13
@ Two via regions whose space is < 0.15um are considered to be in the same array.
  X = SIZE V1 BY 0.074 OVERUNDER
  Y = SIZE X BY 0.340 UNDEROVER
  Z = V1 INSIDE Y
  EXT Z < 0.13 ABUT<90 SINGULAR REGION
}
V1_3a_3b {
@ Min M1 enclosure of V1 is 0.00
@ Min M1 enclosure of V1 is 0.030 when M1 enclosure on one or both perpendicular directions<0.03um
  X = RECTANGLE ENC (V1 NOT TOUCH M1) M1 ABUT<90 OUTSIDE ALSO
  GOOD 0 0.030 OPPOSITE 0 0.030 OPPOSITE

  A = ENC [X] M1 < 0.030 OPPOSITE
  D1 = INT A < 0.01 ABUT==90 INTERSECTING ONLY REGION     //; For V1 not touching M1
  D1 NOT INSIDE INST

  B = V1 COIN EDGE M1
  D2 = INT B < 0.01 ABUT==90 REGION         //; For V1 touch M1 with >= 2 butting edges
  D2 NOT INSIDE INST

  Y = ENC V1 M1 < 0.030 OPPOSITE REGION
  C1 = V1 COIN EDGE M1
  C2 = V1 COIN EDGE Y
  D3 = INT C1 C2 < 0.01 ABUT==90 REGION     //; For V1 touch M1 with only 1 edge
  D3 NOT INSIDE INST

  V1 NOT M1
}
V1_5a_5b {
@ Min M2 enclosure of V1 is 0.005
@ Min M2 Enclosure of V1 when M2 enclosure on one or both perpendicular directions < 0.02um is 0.02
  X = RECTANGLE ENC V1 M2 ABUT<90 OUTSIDE ALSO
  GOOD 0.005 OPPOSITE 0.02 OPPOSITE 0.005 OPPOSITE 0.02 OPPOSITE

  D1 = ENC X M2 < 0.005 ABUT<90 SINGULAR REGION OVERLAP OUTSIDE ALSO
  D1 NOT INSIDE INST

  Y = ENC [X] M2 < 0.02 OPPOSITE
  D2 = INT Y < 0.01 ABUT==90 INTERSECTING ONLY REGION
  D2 NOT INSIDE INST
  V1 NOT M2
}
V1_10 {
@ Minimum Space between two neighbor V1s (different net and run length>0) is 0.13um.
 EXT V1 < 0.13 ABUT<90 OPPOSITE REGION NOT CONNECTED
}

#IFDEF Recommended_rules_CHECK YES
V1_11_12_R {
@ There should be at least two V1s in the M1and M2 intersection area when either or both M1 and M2 width >= 0.5um
@ There should be at least two V1s in the M1and M2 intersection area when either or both M1 and M2 is 
@ connected with metal line of width>=0.5um and space between V1 and wider metal edge <0.5um
@NOTICE: It is a recommended rule.
/* X = SIZE (M1 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M1 STEP 0.01
  SV1 = V1 INTERACT SV1_metal
  (((X INTERACT SV1) NOT LOGO) NOT MARKG) NOT INSIDE INST
  Y = SIZE (M2 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M2 STEP 0.01
  (((Y INTERACT SV1) NOT LOGO) NOT MARKG) NOT INSIDE INST*/

  X = SIZE (M1 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M1 STEP 0.01
  SV1 = V1 INTERACT SV1_metal
  SV1_metal ENCLOSE (((SV1 INTERACT X) NOT LOGO) NOT MARKG)
  Y = SIZE (M2 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M2 STEP 0.01
  SV1_metal ENCLOSE (((SV1 INTERACT Y) NOT LOGO) NOT MARKG) 
}
#ENDIF

//========================
//  M2 - Metal 2 DRC 
//========================

/*
//--* Find Wide Metal *--//

WIDE_M2        = M2 INTERACT (SIZE M2 BY -2.5)   // wide metal

// begin shrink
WDM2_45        = ANGLE WIDE_M2 >0<90
WDM2_90        = NOT ANGLE WIDE_M2 >0<90

WDM2_EXP_45    = EXPAND EDGE WDM2_45 INSIDE BY 2.5*1.414213562
WDM2_EXP_90    = EXPAND EDGE WDM2_90 INSIDE BY 2.5 EXTEND BY 2.5

THIN_M2_TMP    = WIDE_M2 NOT (WDM2_EXP_45 OR WDM2_EXP_90)
THIN_M2        = SNAP THIN_M2_TMP 1            // end of shrink

// begin grow
TNM2_45        = ANGLE THIN_M2 >0<90
TNM2_90        = NOT ANGLE THIN_M2 >0<90

TNM2_EXP_45_TMP = EXPAND EDGE TNM2_45 OUTSIDE BY 2.5*1.414213562
TNM2_EXP_45    = SNAP TNM2_EXP_45_TMP 1
TNM2_EXP_90    = EXPAND EDGE TNM2_90 OUTSIDE BY 2.5 EXTEND BY 2.5

TNM2_EXP       = TNM2_EXP_45 OR TNM2_EXP_90

WDM2_PRE       = TNM2_EXP OR THIN_M2
WDM2_PRE_FILL  = EXT WDM2_PRE < 2.5 ABUT>0<90 INTERSECTING ONLY REGION

M2OVER5       = WDM2_PRE OR WDM2_PRE_FILL    // end of grow


//--* End of Finding Wide Metal *--//
*/

GROUP GM2 M2_?

M2_1 {
@ Min Mn width is 0.10
  INT M2 < 0.10 SINGULAR REGION
  INT M2DUM < 0.10 SINGULAR REGION
}
M2_2a {
@ Min Space between two Mns is 0.10
  X = EXT M2 < 0.10 SINGULAR REGION
  X NOT INSIDE INST
  EXT M2i M2DUM < 0.10 SINGULAR REGION INSIDE ALSO
  EXT M2DUM < 0.10 SINGULAR REGION
}
M2ALL = M2i OR M2DUM
M2_2b {
@ Min Space between two Mns is 0.16 when one or both Mn width or length >= 1um, and the run length of two Mns is >= 2um
CMACRO Mn_2b M2ALL 2 1 0.16
}
M2_2c {
@ Min Space between two Mns when one or both Mn width or length >= 5um, and the run length of two Mns is >= 2um
CMACRO Mn_2c M2ALL 2 5 0.5
}
M2_3 {
@ Max M2 width is 12.
@ Metal line greater than this width will comply slot rules.
  (M2 OR M2DUM) WITH WIDTH > 12
}
M2_4 {
@ Min Mn area is 0.035
  X = AREA (M2 OR M2DUM) < 0.035
  X NOT INSIDE INST
}
M2_5 {
@ Min Enclosed dielectric area by Mn is 0.12
  X = HOLES M2 INNER EMPTY
  AREA X < 0.12
}
M2_6al {
@ Mn density (including dummy) in 200umX200um window with step size 100um is >= 18% and <= 80%.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY M2ALL < 0.18 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_M2_6al.log
  (X NOT MARKF) NOT MARKG
}
M2_6ah {
@ Mn density (including dummy) in 200umX200um window with step size 100um is >= 18% and <= 80%.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY M2ALL > 0.80 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_M2_6ah.log
  (X NOT MARKF) NOT MARKG
}
M2_6b {
@ Max Mn density (including dummy) in 50umX50um window with step size 25um is 90%.
  DENSITY M2ALL > 0.90 WINDOW 50 STEP 25 backup PRINT density_report_M2_6b.log
}
M2_6c {
@ The max difference between Mn density in 200umX200um with step size 200um and those of the adjacent checking windows (including dummy) is 40%
@ INDMY/MARKG/MARKF/MARKS covered areas are excluded for this rule checking
  X = DENSITY M2ALL >= 0 WINDOW 200 GRADIENT > 0.4 ABSOLUTE BACKUP INSIDE OF LAYER density_checkarea PRINT density_report_M2_6c.log
  (X NOT MARKF) NOT MARKG
}
M2_6d {
@ Minimum Mn density (including dummy) in 25umX25um window with step size 12.5um is 12%
@ INDMY/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY M2ALL < 0.12 WINDOW 25 STEP 12.5 backup INSIDE OF LAYER density_checkarea PRINT density_report_M2_6d.log
  X NOT MARKG
}
M2_7 {
@ Min Space between metal lines with one or both is 45 degree and the bending length >=0.5um is 0.115
@ (the area with 0.1um distance from bending point need not follow this rule)
  X = ANGLE M2 == 45
  Y = LENGTH X >= 0.5
  EXT Y < 0.115 REGION
  EXT M2 Y < 0.115 REGION corner to edge
}
/*M2_9 {
@ Space between two length > 1.5 parallel metal lines is 0.15
@ with one or both metal line width is >= 0.5 and <=3um
@ if the width >3um, space between 2 parallel metal lines is 0.17
  X1 = M2 WITH WIDTH >= 0.5
  X2 = M2 WITH WIDTH > 3
  Y1 = EXT M2 X1 < 0.15 ABUT<90 REGION
  Y2 = EXT M2 X2 < 0.17 ABUT<90 REGION
  LENGTH (Y1 OR Y2) > 1.5
}*/

#IFDEF Recommended_rules_CHECK YES
M2_6e_min_R {
@ Average density for Mn inside the dummy block area in 25umX25um window with step size 12.5um is >= 12% and <= 90% when the dummy block area >= 25umX25um.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded from this rule checking.
@ Device sensitive areas can be waived.
@NOTICE: It is a recommended rule.
  X = DENSITY (M2i OR M2DUM) < 0.12 WINDOW 25 STEP 12.5 backup PRINT density_report_M26e_min.log
  Y = ((DUMBM OR M2DUB) OR NODMF) NOT ((INDMY OR MARKF) OR MARKG)
  Z = SIZE Y BY 12.5 UNDEROVER
  X AND Z
}
M2_6e_max_R {
@ Average density for Mn inside the dummy block area in 25umX25um window with step size 12.5um is >= 12% and <= 90% when the dummy block area >= 25umX25um.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded from this rule checking.
@ Device sensitive areas can be waived.
@NOTICE: It is a recommended rule.
  X = DENSITY (M2i OR M2DUM) > 0.90 WINDOW 25 STEP 12.5 backup PRINT density_report_M26e_max.log
  Y = ((DUMBM OR M2DUB) OR NODMF) NOT ((INDMY OR MARKF) OR MARKG)
  Z = SIZE Y BY 12.5 UNDEROVER
  X AND Z
}
#ENDIF

//========================
//  M3 - Metal 3 DRC 
//========================

/*
//--* Find Wide Metal *--//

WIDE_M3        = M3 INTERACT (SIZE M3 BY -2.5)   // wide metal

// begin shrink
WDM3_45        = ANGLE WIDE_M3 >0<90
WDM3_90        = NOT ANGLE WIDE_M3 >0<90

WDM3_EXP_45    = EXPAND EDGE WDM3_45 INSIDE BY 2.5*1.414213562
WDM3_EXP_90    = EXPAND EDGE WDM3_90 INSIDE BY 2.5 EXTEND BY 2.5

THIN_M3_TMP    = WIDE_M3 NOT (WDM3_EXP_45 OR WDM3_EXP_90)
THIN_M3        = SNAP THIN_M3_TMP 1            // end of shrink

// begin grow
TNM3_45        = ANGLE THIN_M3 >0<90
TNM3_90        = NOT ANGLE THIN_M3 >0<90

TNM3_EXP_45_TMP = EXPAND EDGE TNM3_45 OUTSIDE BY 2.5*1.414213562
TNM3_EXP_45    = SNAP TNM3_EXP_45_TMP 1
TNM3_EXP_90    = EXPAND EDGE TNM3_90 OUTSIDE BY 2.5 EXTEND BY 2.5

TNM3_EXP       = TNM3_EXP_45 OR TNM3_EXP_90

WDM3_PRE       = TNM3_EXP OR THIN_M3
WDM3_PRE_FILL  = EXT WDM3_PRE < 2.5 ABUT>0<90 INTERSECTING ONLY REGION

M3OVER5       = WDM3_PRE OR WDM3_PRE_FILL    // end of grow


//--* End of Finding Wide Metal *--//
*/

GROUP GM3 M3_?

M3_1 {
@ Min Mn width is 0.10
  INT M3 < 0.10 singular REGION
  INT M3DUM < 0.10 REGION
}
M3_2a {
@ Min Space between two Mns is 0.10
  EXT M3 < 0.10 singular REGION
  EXT M3 M3DUM < 0.10 singular REGION INSIDE ALSO
  EXT M3DUM < 0.10 singular REGION
}
M3ALL = M3 OR M3DUM
M3_2b {
@ Min Space between two Mns is 0.16 when one or both Mn width or length >= 1um, and the run length of two Mns is >=2um
CMACRO Mn_2b M3ALL 2 1 0.16
}
M3_2c {
@ Min Space between two Mns is 0.5 when one or both Mn width or length >= 5um, and the run length of two Mns is >= 2um
CMACRO Mn_2c M3ALL 2 5 0.5
}
M3_3 {
@ Max Mn width is 12.
  M3ALL WITH WIDTH > 12
}
M3_4 {
@ Min Mn area is 0.035
  AREA M3ALL < 0.035
}
M3_5 {
@ Min Enclosed dielectric area by Mn is 0.12
  X = HOLES M3 INNER EMPTY
  AREA X < 0.12
}
M3_6al {
@ Mn density (including dummy) in 200umX200um window with step size 100um is >= 18% and <= 80%.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M3i OR M3DUM) < 0.18 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_M3_6al.log
  (X NOT MARKF) NOT MARKG
}
M3_6ah {
@ Mn density (including dummy) in 200umX200um window with step size 100um is >= 18% and <= 80%.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M3i OR M3DUM) > 0.80 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_M3_6ah.log
  (X NOT MARKF) NOT MARKG
}
M3_6b {
@ Max Mn density (including dummy) in 50umX50um window with step size 25um is 90%.
  DENSITY (M3i OR M3DUM) > 0.90 WINDOW 50 STEP 25 backup PRINT density_report_M3_6b.log
}
M3_6c {
@ The max difference between Mn density in 200umX200um with step size 200um and those of the adjacent checking windows (including dummy) is 40%
@ INDMY/MARKG/MARKF/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M3i OR M3DUM) >= 0 WINDOW 200 GRADIENT > 0.4 ABSOLUTE BACKUP INSIDE OF LAYER density_checkarea PRINT density_report_M3_6c.log
  (X NOT MARKF) NOT MARKG
}
M3_6d {
@ Minimum Mn density (including dummy) in 25umX25um window with step size 12.5um is 12%
@ INDMY/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M3i OR M3DUM) < 0.12 WINDOW 25 STEP 12.5 backup INSIDE OF LAYER density_checkarea PRINT density_report_M3_6d.log
  X NOT MARKG
}
M3_7 {
@ Min Space between metal lines with one or both is 45 degree and the bending length >=0.5um is 0.115
@ (the area with 0.1um distance from bending point need not follow this rule)
  X = ANGLE M3 == 45
  Y = LENGTH X >= 0.5
  EXT Y < 0.115 REGION
  EXT M3 Y <0.115 corner to edge
}
/*M3_9 {
@ Space between two length > 1.5 parallel metal lines is 0.15
@ with one or both metal line width is >= 0.5 and <=3um
@ if the width >3um, space between 2 parallel metal lines is 0.17
  X1 = M3 WITH WIDTH >= 0.5
  X2 = M3 WITH WIDTH > 3
  Y1 = EXT M3 X1 < 0.15 ABUT<90 REGION
  Y2 = EXT M3 X2 < 0.17 ABUT<90 REGION
  LENGTH (Y1 OR Y2) > 1.5
}*/

#IFDEF Recommended_rules_CHECK YES
M3_6e_min_R {
@ Average density for Mn inside the dummy block area in 25umX25um window with step size 12.5um is >= 12% and <= 90% when the dummy block area >= 25umX25um.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded from this rule checking.
@ Device sensitive areas can be waived.
@NOTICE: It is a recommended rule.
  X = DENSITY (M3i OR M3DUM) < 0.12 WINDOW 25 STEP 12.5 backup PRINT density_report_M3nl.log
  Y = ((DUMBM OR M3DUB) OR NODMF) NOT ((INDMY OR MARKF) OR MARKG)
  Z = SIZE Y BY 12.5 UNDEROVER
  X AND Z
}
M3_6e_max_R {
@ Average density for Mn inside the dummy block area in 25umX25um window with step size 12.5um is >= 12% and <= 90% when the dummy block area >= 25umX25um.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded from this rule checking.
@ Device sensitive areas can be waived.
@NOTICE: It is a recommended rule.
  X = DENSITY (M3i OR M3DUM) > 0.90 WINDOW 25 STEP 12.5 backup PRINT density_report_M3nh.log
  Y = ((DUMBM OR M3DUB) OR NODMF) NOT ((INDMY OR MARKF) OR MARKG)
  Z = SIZE Y BY 12.5 UNDEROVER
  X AND Z
}
#ENDIF


//========================
//  M4 - Metal 4 DRC 
//========================

/*
//--* Find Wide Metal *--//

WIDE_M4        = M4 INTERACT (SIZE M4 BY -2.5)   // wide metal

// begin shrink
WDM4_45        = ANGLE WIDE_M4 >0<90
WDM4_90        = NOT ANGLE WIDE_M4 >0<90

WDM4_EXP_45    = EXPAND EDGE WDM4_45 INSIDE BY 2.5*1.414213562
WDM4_EXP_90    = EXPAND EDGE WDM4_90 INSIDE BY 2.5 EXTEND BY 2.5

THIN_M4_TMP    = WIDE_M4 NOT (WDM4_EXP_45 OR WDM4_EXP_90)
THIN_M4        = SNAP THIN_M4_TMP 1            // end of shrink

// begin grow
TNM4_45        = ANGLE THIN_M4 >0<90
TNM4_90        = NOT ANGLE THIN_M4 >0<90

TNM4_EXP_45_TMP = EXPAND EDGE TNM4_45 OUTSIDE BY 2.5*1.414213562
TNM4_EXP_45    = SNAP TNM4_EXP_45_TMP 1
TNM4_EXP_90    = EXPAND EDGE TNM4_90 OUTSIDE BY 2.5 EXTEND BY 2.5

TNM4_EXP       = TNM4_EXP_45 OR TNM4_EXP_90

WDM4_PRE       = TNM4_EXP OR THIN_M4
WDM4_PRE_FILL  = EXT WDM4_PRE < 2.5 ABUT>0<90 INTERSECTING ONLY REGION

M4OVER5       = WDM4_PRE OR WDM4_PRE_FILL    // end of grow


//--* End of Finding Wide Metal *--//
*/

GROUP GM4 M4_?

M4_1 {
@ Min Mn width is 0.10
  INT M4 < 0.10 SINGULAR REGION
  INT M4DUM < 0.10 SINGULAR REGION
}
M4_2a {
@ Min Space between two Mns is 0.10
  EXT M4 < 0.10 SINGULAR REGION
  EXT M4 M4DUM < 0.10 SINGULAR REGION
  EXT M4DUM < 0.10 SINGULAR REGION
}
M4ALL = M4 OR M4DUM
M4_2b {
@ Min Space between two Mns is 0.16 when one or both Mn width or length >= 1um, and the run length of two Mns is >=2um
CMACRO Mn_2b M4ALL 2 1 0.16
}
M4_2c {
@ Min Space between two Mns is 0.5 when one or both Mn width or length >= 5um, and the run length of two Mns is >= 2um
CMACRO Mn_2c M4ALL 2 5 0.5
}
M4_3 {
@ Max Mn width is 12.
  M4ALL WITH WIDTH > 12
}
M4_4 {
@ Min Mn area is 0.035
  AREA M4ALL < 0.035
}
M4_5 {
@ Min Enclosed dielectric area by Mn is 0.12
  X = HOLES M4 INNER EMPTY
  AREA X < 0.12
}
M4_6al {
@ Mn density (including dummy) in 200umX200um window with step size 100um is >= 18% and <= 80%.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M4i OR M4DUM) < 0.18 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_M4_6al.log
  (X NOT MARKF) NOT MARKG
}
M4_6ah {
@ Mn density (including dummy) in 200umX200um window with step size 100um is >= 18% and <= 80%.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M4i OR M4DUM) > 0.80 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_M4_6ah.log
  (X NOT MARKF) NOT MARKG
}
M4_6b {
@ Max Mn density (including dummy) in 50umX50um window with step size 25um is 90%.
  DENSITY (M4i OR M4DUM) > 0.90 WINDOW 50 STEP 25 backup PRINT density_report_M4_6b.log
}
M4_6c {
@ The max difference between Mn density in 200umX200um with step size 200um and those of the adjacent checking windows (including dummy) is 40%
@ INDMY/MARKG/MARKF/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M4i OR M4DUM) >= 0 WINDOW 200 GRADIENT > 0.4 ABSOLUTE BACKUP INSIDE OF LAYER density_checkarea PRINT density_report_M4_6c.log
  (X NOT MARKF) NOT MARKG
}
M4_6d {
@ Minimum Mn density (including dummy) in 25umX25um window with step size 12.5um is 12%
@ INDMY/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M4i OR M4DUM) < 0.12 WINDOW 25 STEP 12.5 backup INSIDE OF LAYER density_checkarea PRINT density_report_M4_6d.log
  X NOT MARKG
}
M4_7 {
@ Min Space between metal lines with one or both is 45 degree and the bending length >=0.5um is 0.115
@ (the area with 0.1um distance from bending point need not follow this rule)
  X = ANGLE M4 == 45
  Y = LENGTH X >= 0.5
  EXT Y < 0.115 REGION
  EXT M4 Y < 0.115 CORNER TO EDGE
}
/*M4_9 {
@ Space between two length > 1.5 parallel metal lines is 0.15
@ with one or both metal line width is >= 0.5 and <=3um
@ if the width >3um, space between 2 parallel metal lines is 0.17
  X1 = M4 WITH WIDTH >= 0.5
  X2 = M4 WITH WIDTH > 3
  Y1 = EXT M4 X1 < 0.15 ABUT<90 REGION
  Y2 = EXT M4 X2 < 0.17 ABUT<90 REGION
  LENGTH (Y1 OR Y2) > 1.5
}*/

#IFDEF Recommended_rules_CHECK YES
M4_6e_min_R {
@ Average density for Mn inside the dummy block area in 25umX25um window with step size 12.5um is >= 12% and <= 90% when the dummy block area >= 25umX25um.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded from this rule checking.
@ Device sensitive areas can be waived.
@NOTICE: It is a recommended rule.
  X = DENSITY (M4i OR M4DUM) < 0.12 WINDOW 25 STEP 12.5 backup PRINT density_report_M4nl.log
  Y = ((DUMBM OR M4DUB) OR NODMF) NOT ((INDMY OR MARKF) OR MARKG)
  Z = SIZE Y BY 12.5 UNDEROVER
  X AND Z
}
M4_6e_max_R {
@ Average density for Mn inside the dummy block area in 25umX25um window with step size 12.5um is >= 12% and <= 90% when the dummy block area >= 25umX25um.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded from this rule checking.
@ Device sensitive areas can be waived.
@NOTICE: It is a recommended rule.
  X = DENSITY (M4i OR M4DUM) > 0.90 WINDOW 25 STEP 12.5 backup PRINT density_report_M4nh.log
  Y = ((DUMBM OR M4DUB) OR NODMF) NOT ((INDMY OR MARKF) OR MARKG)
  Z = SIZE Y BY 12.5 UNDEROVER
  X AND Z
}
#ENDIF

//========================
//  M5 - Metal 5 DRC 
//========================

/*
//--* Find Wide Metal *--//

WIDE_M5        = M5 INTERACT (SIZE M5 BY -2.5)   // wide metal

// begin shrink
WDM5_45        = ANGLE WIDE_M5 >0<90
WDM5_90        = NOT ANGLE WIDE_M5 >0<90

WDM5_EXP_45    = EXPAND EDGE WDM5_45 INSIDE BY 2.5*1.414213562
WDM5_EXP_90    = EXPAND EDGE WDM5_90 INSIDE BY 2.5 EXTEND BY 2.5

THIN_M5_TMP    = WIDE_M5 NOT (WDM5_EXP_45 OR WDM5_EXP_90)
THIN_M5        = SNAP THIN_M5_TMP 1            // end of shrink

// begin grow
TNM5_45        = ANGLE THIN_M5 >0<90
TNM5_90        = NOT ANGLE THIN_M5 >0<90

TNM5_EXP_45_TMP = EXPAND EDGE TNM5_45 OUTSIDE BY 2.5*1.414213562
TNM5_EXP_45    = SNAP TNM5_EXP_45_TMP 1
TNM5_EXP_90    = EXPAND EDGE TNM5_90 OUTSIDE BY 2.5 EXTEND BY 2.5

TNM5_EXP       = TNM5_EXP_45 OR TNM5_EXP_90

WDM5_PRE       = TNM5_EXP OR THIN_M5
WDM5_PRE_FILL  = EXT WDM5_PRE < 2.5 ABUT>0<90 INTERSECTING ONLY REGION

M5OVER5       = WDM5_PRE OR WDM5_PRE_FILL    // end of grow


//--* End of Finding Wide Metal *--//
*/

GROUP GM5 M5_?

M5_1 {
@ Min Mn width is 0.10
  INT M5 < 0.10 SINGULAR REGION
  INT M5DUM < 0.10 SINGULAR REGION
}
M5_2a {
@ Min Space between two Mns is 0.10
  EXT M5 < 0.10 SINGULAR REGION
  EXT M5 M5DUM < 0.10 SINGULAR REGION
  EXT M5DUM < 0.10 SINGULAR REGION
}
M5ALL = M5 OR M5DUM
M5_2b {
@ Min Space between two Mns is 0.16 when one or both Mn width or length >= 1um, and the run length of two Mns is >=2um
CMACRO Mn_2b M5ALL 2 1 0.16
}
M5_2c {
@ Min Space between two Mns is 0.5 when one or both Mn width or length >= 5um, and the run length of two Mns is >= 2um
CMACRO Mn_2c M5ALL 2 5 0.5
}
M5_3 {
@ Max Mn width is 12.
  M5ALL WITH WIDTH > 12
}
M5_4 {
@ Min Mn area is 0.035
  AREA M5ALL < 0.035
}
M5_5 {
@ Min Enclosed dielectric area by Mn is 0.12
  X = HOLES M5 INNER EMPTY
  AREA X < 0.12
}
M5_6al {
@ Mn density (including dummy) in 200umX200um window with step size 100um is >= 18% and <= 80%.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M5i OR M5DUM) < 0.18 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_M5_6al.log
  (X NOT MARKF) NOT MARKG
}
M5_6ah {
@ Mn density (including dummy) in 200umX200um window with step size 100um is >= 18% and <= 80%.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M5i OR M5DUM) > 0.80 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_M5_6ah.log
  (X NOT MARKF) NOT MARKG
}
M5_6b {
@ Max Mn density (including dummy) in 50umX50um window with step size 25um is 90%.
  DENSITY (M5i OR M5DUM) > 0.90 WINDOW 50 STEP 25 backup PRINT density_report_M5_6b.log
}
M5_6c {
@ The max difference between Mn density in 200umX200um with step size 200um and those of the adjacent checking windows (including dummy) is 40%
@ INDMY/MARKG/MARKF/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M5i OR M5DUM) >= 0 WINDOW 200 GRADIENT > 0.4 ABSOLUTE BACKUP INSIDE OF LAYER density_checkarea PRINT density_report_M5_6c.log
  (X NOT MARKF) NOT MARKG
}
M5_6d {
@ Minimum Mn density (including dummy) in 25umX25um window with step size 12.5um is 12%
@ INDMY/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M5i OR M5DUM) < 0.12 WINDOW 25 STEP 12.5 backup INSIDE OF LAYER density_checkarea PRINT density_report_M5_6d.log
  X NOT MARKG
}
M5_7 {
@ Min Space between metal lines with one or both is 45 degree and the bending length >=0.5um is 0.115
@ (the area with 0.1um distance from bending point need not follow this rule)
  X = ANGLE M5 == 45
  Y = LENGTH X >= 0.5
  EXT Y < 0.115 REGION
  EXT M5 Y < 0.115 CORNER TO EDGE
}
/*M5_9 {
@ Space between two length > 1.5 parallel metal lines is 0.15
@ with one or both metal line width is >= 0.5 and <=3um
@ if the width >3um, space between 2 parallel metal lines is 0.17
  X1 = M5 WITH WIDTH >= 0.5
  X2 = M5 WITH WIDTH > 3
  Y1 = EXT M5 X1 < 0.15 ABUT<90 REGION
  Y2 = EXT M5 X2 < 0.17 ABUT<90 REGION
  LENGTH (Y1 OR Y2) > 1.5
}*/

#IFDEF Recommended_rules_CHECK YES
M5_6e_min_R {
@ Average density for Mn inside the dummy block area in 25umX25um window with step size 12.5um is >= 12% and <= 90% when the dummy block area >= 25umX25um.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded from this rule checking.
@ Device sensitive areas can be waived.
@NOTICE: It is a recommended rule.
  X = DENSITY (M5i OR M5DUM) < 0.12 WINDOW 25 STEP 12.5 backup PRINT density_report_M5nl.log
  Y = ((DUMBM OR M5DUB) OR NODMF) NOT ((INDMY OR MARKF) OR MARKG)
  Z = SIZE Y BY 12.5 UNDEROVER
  X AND Z
}
M5_6e_max_R {
@ Average density for Mn inside the dummy block area in 25umX25um window with step size 12.5um is >= 12% and <= 90% when the dummy block area >= 25umX25um.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded from this rule checking.
@ Device sensitive areas can be waived.
@NOTICE: It is a recommended rule.
  X = DENSITY (M5i OR M5DUM) > 0.90 WINDOW 25 STEP 12.5 backup PRINT density_report_M5nh.log
  Y = ((DUMBM OR M5DUB) OR NODMF) NOT ((INDMY OR MARKF) OR MARKG)
  Z = SIZE Y BY 12.5 UNDEROVER
  X AND Z
}
#ENDIF

//========================
//  M6 - Metal 6 DRC 
//========================

/*
//--* Find Wide Metal *--//

WIDE_M6        = M6 INTERACT (SIZE M6 BY -2.5)   // wide metal

// begin shrink
WDM6_45        = ANGLE WIDE_M6 >0<90
WDM6_90        = NOT ANGLE WIDE_M6 >0<90

WDM6_EXP_45    = EXPAND EDGE WDM6_45 INSIDE BY 2.5*1.414213562
WDM6_EXP_90    = EXPAND EDGE WDM6_90 INSIDE BY 2.5 EXTEND BY 2.5

THIN_M6_TMP    = WIDE_M6 NOT (WDM6_EXP_45 OR WDM6_EXP_90)
THIN_M6        = SNAP THIN_M6_TMP 1            // end of shrink

// begin grow
TNM6_45        = ANGLE THIN_M6 >0<90
TNM6_90        = NOT ANGLE THIN_M6 >0<90

TNM6_EXP_45_TMP = EXPAND EDGE TNM6_45 OUTSIDE BY 2.5*1.414213562
TNM6_EXP_45    = SNAP TNM6_EXP_45_TMP 1
TNM6_EXP_90    = EXPAND EDGE TNM6_90 OUTSIDE BY 2.5 EXTEND BY 2.5

TNM6_EXP       = TNM6_EXP_45 OR TNM6_EXP_90

WDM6_PRE       = TNM6_EXP OR THIN_M6
WDM6_PRE_FILL  = EXT WDM6_PRE < 2.5 ABUT>0<90 INTERSECTING ONLY REGION

M6OVER5       = WDM6_PRE OR WDM6_PRE_FILL    // end of grow


//--* End of Finding Wide Metal *--//
*/

GROUP GM6 M6_?

M6_1 {
@ Min Mn width is 0.10
  INT M6 < 0.10 SINGULAR REGION
  INT M6DUM < 0.10 SINGULAR REGION
}
M6_2a {
@ Min Space between two Mns is 0.10
  EXT M6 < 0.10 SINGULAR REGION
  EXT M6 M6DUM < 0.10 SINGULAR REGION
  EXT M6DUM < 0.10 SINGULAR REGION
}
M6ALL = M6 OR M6DUM
M6_2b {
@ Min Space between two Mns is 0.16 when one or both Mn width or length >= 1um, and the run length of two Mns is >=2um
CMACRO Mn_2b M6ALL 2 1 0.16
}
M6_2c {
@ Min Space between two Mns is 0.5 when one or both Mn width or length >= 5um, and the run length of two Mns is >= 2um
CMACRO Mn_2c M6ALL 2 5 0.5
}
M6_3 {
@ Max Mn width is 12.
  M6ALL WITH WIDTH > 12
}
M6_4 {
@ Min Mn area is 0.035
  AREA M6ALL < 0.035
}
M6_5 {
@ Dielectric area enclosed by Mn is 0.12
  X = HOLES M6 INNER EMPTY
  AREA X < 0.12
}
M6_6al {
@ Mn density (including dummy) in 200umX200um window with step size 100um is >= 18% and <= 80%.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M6i OR M6DUM) < 0.18 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_M6_6al.log
  (X NOT MARKF) NOT MARKG
}
M6_6ah {
@ Mn density (including dummy) in 200umX200um window with step size 100um is >= 18% and <= 80%.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M6i OR M6DUM) > 0.80 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_M6_6ah.log
  (X NOT MARKF) NOT MARKG
}
M6_6b {
@ Max Mn density (including dummy) in 50umX50um window with step size 25um is 90%.
  DENSITY (M6i OR M6DUM) > 0.90 WINDOW 50 STEP 25 backup PRINT density_report_M6_6b.log
}
M6_6c {
@ The max difference between Mn density in 200umX200um with step size 200um and those of the adjacent checking windows (including dummy) is 40%
@ INDMY/MARKG/MARKF/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M6i OR M6DUM) >= 0 WINDOW 200 GRADIENT > 0.4 ABSOLUTE BACKUP INSIDE OF LAYER density_checkarea PRINT density_report_M6_6c.log
  (X NOT MARKF) NOT MARKG
}
M6_6d {
@ Minimum Mn density (including dummy) in 25umX25um window with step size 12.5um is 12%
@ INDMY/MARKG/MARKS covered areas are excluded for this rule checking
  X = DENSITY (M6i OR M6DUM) < 0.12 WINDOW 25 STEP 12.5 backup INSIDE OF LAYER density_checkarea PRINT density_report_M6_6d.log
  X NOT MARKG
}
M6_7 {
@ Min Space between metal lines with one or both is 45 degree and the bending length >=0.5um is 0.115
@ (the area with 0.1um distance from bending point need not follow this rule)
  X = ANGLE M6 == 45
  Y = LENGTH X >= 0.5
  EXT Y < 0.115 REGION
  EXT Y M6 < 0.115 REGION CORNER TO EDGE
}
/*M6_9 {
@ Space between two length > 1.5 parallel metal lines is 0.15
@ with one or both metal line width is >= 0.5 and <=3um
@ if the width >3um, space between 2 parallel metal lines is 0.17
  X1 = M6 WITH WIDTH >= 0.5
  X2 = M6 WITH WIDTH > 3
  Y1 = EXT M6 X1 < 0.15 ABUT<90 REGION
  Y2 = EXT M6 X2 < 0.17 ABUT<90 REGION
  LENGTH (Y1 OR Y2) > 1.5
}*/

#IFDEF Recommended_rules_CHECK YES
M6_6e_min_R {
@ Average density for Mn inside the dummy block area in 25umX25um window with step size 12.5um is >= 12% and <= 90% when the dummy block area >= 25umX25um.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded from this rule checking.
@ Device sensitive areas can be waived.
@NOTICE: It is a recommended rule.
  X = DENSITY (M6i OR M6DUM) < 0.12 WINDOW 25 STEP 12.5 backup PRINT density_report_M6nl.log
  Y = ((DUMBM OR M6DUB) OR NODMF) NOT ((INDMY OR MARKF) OR MARKG)
  Z = SIZE Y BY 12.5 UNDEROVER
  X AND Z
}
M6_6e_max_R {
@ Average density for Mn inside the dummy block area in 25umX25um window with step size 12.5um is >= 12% and <= 90% when the dummy block area >= 25umX25um.
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded from this rule checking.
@ Device sensitive areas can be waived.
@NOTICE: It is a recommended rule.
  X = DENSITY (M6i OR M6DUM) > 0.90 WINDOW 25 STEP 12.5 backup PRINT density_report_M6nh.log
  Y = ((DUMBM OR M6DUB) OR NODMF) NOT ((INDMY OR MARKF) OR MARKG)
  Z = SIZE Y BY 12.5 UNDEROVER
  X AND Z
}
#ENDIF


//========================
//  V2 - Via 2 DRC
//========================

GROUP GV2 V2_?

V2_1 {
@ Fixed Vn size (square shape) is 0.09
  (NOT RECTANGLE (V2 NOT GV2) == 0.09 BY == 0.09) NOT V2_slot_SG
}
V2_2a {
@ Space between two V2 is 0.11
  EXT V2 < 0.11 ABUT<90 SINGULAR REGION
}
V2_2b {
@ Space between V2s when array equal to or greater than 4*4 is 0.13.
@ Two via regions whose space is < 0.15um are considered to be in the same array.
  X = SIZE V2 BY 0.074 OVERUNDER
  Y = SIZE X BY 0.340 UNDEROVER
  Z = V2 INSIDE Y
  EXT Z < 0.13 ABUT<90 SINGULAR REGION
}
V2_3a_3b {
@ Min Mn enclosure of Vn is 0.005
@ Min Mn enclosure of Vn  is 0.030 when Mn enclosure on one or both perpendicular directions<0.03um
  X = RECTANGLE ENC V2 M2 ABUT<90 OUTSIDE ALSO
  GOOD 0.005 OPPOSITE 0.030 OPPOSITE 0.005 OPPOSITE 0.030 OPPOSITE

  ENC X M2 < 0.005 ABUT<90 SINGULAR REGION OVERLAP OUTSIDE ALSO

  Y = ENC [X] M2 < 0.030 OPPOSITE
  INT Y < 0.005 ABUT==90 INTERSECTING ONLY REGION
  V2 NOT M2
}
V2_5a_5b {
@ Min Mn+1 enclsoure of Vn is 0.005
@ Min Mn+1 enclosure of Vn  is 0.02 when Mn enclosure on one or both perpendicular directions<0.02um
  X = RECTANGLE ENC V2 M3 ABUT<90 OUTSIDE ALSO
  GOOD 0.005 OPPOSITE 0.02 OPPOSITE 0.005 OPPOSITE 0.02 OPPOSITE

  ENC X M3 < 0.005 ABUT<90 SINGULAR REGION OVERLAP OUTSIDE ALSO

  Y = ENC [X] M3 < 0.02 OPPOSITE
  INT Y < 0.01 ABUT==90 INTERSECTING ONLY REGION
  V2 NOT M3
}

V2_10 {
@ Minimum Space between two neighbor Vns (different net and run length>0) is 0.13um.
 EXT V2 < 0.13 ABUT<90 OPPOSITE REGION NOT CONNECTED
}

#IFDEF Recommended_rules_CHECK YES
V2_11_12_R {
@ There should be at least two Vns in the Mn and Mn+1 intersection area when either or both Mn and Mn+1 with width >= 0.5um
@ There should be at least two Vns in the Mn and Mn+1 intersection area when either or both Mn and Mn+1 
@ connected with metal line of width>=0.5um and space between Vn and wider metal edge <0.5um
@NOTICE: It is a recommended rule.
/*X = SIZE (M2 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M2 STEP 0.01
  SV2 = V2 INTERACT SV2_metal
  (((X INTERACT SV2) NOT LOGO) NOT MARKG) NOT INSIDE INST
  Y = SIZE (M3 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M3 STEP 0.01
  (((Y INTERACT SV2) NOT LOGO) NOT MARKG) NOT INSIDE INST*/

  X = SIZE (M2 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M2 STEP 0.01
  SV2 = V2 INTERACT SV2_metal
  SV2_metal ENCLOSE (((SV2 INTERACT X) NOT LOGO) NOT MARKG)
  Y = SIZE (M3 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M3 STEP 0.01
  SV2_metal ENCLOSE (((SV2 INTERACT Y) NOT LOGO) NOT MARKG)
}
#ENDIF

//========================
//  V3 - Via 3 DRC
//========================

GROUP GV3 V3_?

V3_1 {
@ Fixed Vn size (square shape) is 0.09
  (NOT RECTANGLE (V3 NOT GV3) == 0.09 BY == 0.09) NOT V3_slot_SG
}
V3_2a{
@ @ Min Space between two Vns is 0.11
  EXT V3 < 0.11 ABUT<90 SINGULAR REGION
}
V3_2b{
@ Min Space between Vns when array equal to or greater than 4*4 is 0.13.
@ Two via regions whose space is < 0.15um are considered to be in the same array.
  X = SIZE V3 BY 0.074 OVERUNDER
  Y = SIZE X BY 0.340 UNDEROVER
  Z = V3 INSIDE Y
  EXT Z < 0.13 ABUT<90 SINGULAR REGION
}
V3_3a_3b {
@ Min Mn enclosure of Vn is 0.005
@ Min Mn enclosure of Vn  is 0.030 when Mn enclosure on one or both perpendicular directions<0.03um
  X = RECTANGLE ENC V3 M3 ABUT<90 OUTSIDE ALSO
  GOOD 0.005 OPPOSITE 0.030 OPPOSITE 0.005 OPPOSITE 0.030 OPPOSITE

  ENC X M3 < 0.005 ABUT<90 SINGULAR REGION OVERLAP OUTSIDE ALSO

  Y = ENC [X] M3 < 0.030 OPPOSITE
  INT Y < 0.005 ABUT==90 INTERSECTING ONLY REGION
  V3 NOT M3
}
V3_5a_5b {
@ Min Mn+1 enclsoure of Vn is 0.005
@ Min Mn+1 enclosure of Vn  is 0.02 when Mn enclosure on one or both perpendicular directions<0.02um
  X = RECTANGLE ENC V3 M4 ABUT<90 OUTSIDE ALSO
  GOOD 0.005 OPPOSITE 0.02 OPPOSITE 0.005 OPPOSITE 0.02 OPPOSITE

  ENC X M4 < 0.005 ABUT<90 SINGULAR REGION OVERLAP OUTSIDE ALSO

  Y = ENC [X] M4 < 0.02 OPPOSITE
  INT Y < 0.005 ABUT==90 INTERSECTING ONLY REGION
  V3 NOT M4
}

V3_10 {
@ Minimum Space between two neighbor Vns (different net and run length>0) is 0.13um.
 X1 = EXT V3 < 0.13 ABUT<90 OPPOSITE REGION NOT CONNECTED
 X1 NOT INSIDE INST
}

#IFDEF Recommended_rules_CHECK YES
V3_11_12_R {
@ There should be at least two Vns in the Mn and Mn+1 intersection area when either or both Mn and Mn+1 with width >= 0.5um
@ There should be at least two Vns in the Mn and Mn+1 intersection area when either or both Mn and Mn+1 
@ connected with metal line of width>=0.5um and space between Vn and wider metal edge <0.5um
@NOTICE: It is a recommended rule.
/*  X = SIZE (M3 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M3 STEP 0.01
  SV3 = V3 INTERACT SV3_metal
  ((X INTERACT SV3) NOT LOGO) NOT MARKG
  Y = SIZE (M4 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M4 STEP 0.01
  ((Y INTERACT SV3) NOT LOGO) NOT MARKG*/

  X = SIZE (M3 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M3 STEP 0.01
  SV3 = V3 INTERACT SV3_metal
  SV3_metal ENCLOSE (((SV3 INTERACT X) NOT LOGO) NOT MARKG)
  Y = SIZE (M4 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M4 STEP 0.01
  SV3_metal ENCLOSE (((SV3 INTERACT Y) NOT LOGO) NOT MARKG)
}
#ENDIF

//========================
//  V4 - Via 4 DRC
//========================

GROUP GV4 V4_?

V4_1 {
@ Fixed Vn size (square shape) is 0.09
  (NOT RECTANGLE (V4 NOT GV4) == 0.09 BY == 0.09) NOT V4_slot_SG
}
V4_2a {
@ Min Space between two Vns is 0.11
  EXT V4 < 0.11 ABUT<90 SINGULAR REGION
}
V4_2b {
@ Min Space between Vns when array equal to or greater than 4*4 is 0.13.
@ Two via regions whose space is < 0.15um are considered to be in the same array.
  X = SIZE V4 BY 0.074 OVERUNDER
  Y = SIZE X BY 0.340 UNDEROVER
  Z = V4 INSIDE Y
  EXT Z < 0.13 ABUT<90 SINGULAR REGION
}
V4_3a_3b {
@ Min Mn enclosure of Vn is 0.005
@ Min Mn enclosure of Vn  is 0.030 when Mn enclosure on one or both perpendicular directions<0.03um
  X = RECTANGLE ENC V4 M4 ABUT<90 OUTSIDE ALSO
  GOOD 0.005 OPPOSITE 0.030 OPPOSITE 0.005 OPPOSITE 0.030 OPPOSITE

  ENC X M4 < 0.005 ABUT<90 SINGULAR REGION OVERLAP OUTSIDE ALSO

  Y = ENC [X] M4 < 0.030 OPPOSITE
  INT Y < 0.005 ABUT==90 INTERSECTING ONLY REGION
  V4 NOT M4
}
V4_5a_5b {
@ Min Mn+1 enclsoure of Vn is 0.005
@ Min Mn+1 enclosure of Vn  is 0.02 when Mn enclosure on one or both perpendicular directions<0.02um
  X = RECTANGLE ENC V4 M5 ABUT<90 OUTSIDE ALSO
  GOOD 0.005 OPPOSITE 0.02 OPPOSITE 0.005 OPPOSITE 0.02 OPPOSITE

  ENC X M5 < 0.005 ABUT<90 SINGULAR REGION OVERLAP OUTSIDE ALSO

  Y = ENC [X] M5 < 0.02 OPPOSITE
  INT Y < 0.005 ABUT==90 INTERSECTING ONLY REGION
  V4 NOT M5
}
V4_10 {
@ Minimum Space between two neighbor Vns (different net and run length>0) is 0.13um.
 X1 = EXT V4 < 0.13 ABUT<90 OPPOSITE REGION NOT CONNECTED
 X1 NOT INSIDE INST
}

#IFDEF Recommended_rules_CHECK YES
V4_11_12_R {
@ There should be at least two Vns in the Mn and Mn+1 intersection area when either or both Mn and Mn+1 with width >= 0.5um
@ There should be at least two Vns in the Mn and Mn+1 intersection area when either or both Mn and Mn+1 
@ connected with metal line of width>=0.5um and space between Vn and wider metal edge <0.5um
@NOTICE: It is a recommended rule.
/*  X = SIZE (M4 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M4 STEP 0.01
  SV4 = V4 INTERACT SV4_metal
  ((X INTERACT SV4) NOT LOGO) NOT MARKG
  Y = SIZE (M5 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M5 STEP 0.01
  ((Y INTERACT SV4) NOT LOGO) NOT MARKG*/

  X = SIZE (M4 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M4 STEP 0.01
  SV4 = V4 INTERACT SV4_metal
  SV4_metal ENCLOSE (((SV4 INTERACT X) NOT LOGO) NOT MARKG)
  Y = SIZE (M5 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M5 STEP 0.01
  SV4_metal ENCLOSE (((SV4 INTERACT Y) NOT LOGO) NOT MARKG)
}
#ENDIF

//========================
//  V5 - Via 5 DRC
//========================

GROUP GV5 V5_?

V5_1 {
@ Fixed Vn size (square shape) is 0.09
  (NOT RECTANGLE (V5 NOT GV5) == 0.09 BY == 0.09) NOT V5_slot_SG
}
V5_2a {
@ Min Space between two Vns is 0.11
  EXT V5 < 0.11 ABUT<90 SINGULAR REGION
}
V5_2b {
@ Min Space between Vns when array equal to or greater than 4*4 is 0.13.
@ Two via regions whose space is < 0.15um are considered to be in the same array.
  X = SIZE V5 BY 0.074 OVERUNDER
  Y = SIZE X BY 0.340 UNDEROVER
  Z = V5 INSIDE Y
  EXT Z < 0.13 ABUT<90 SINGULAR REGION
}
V5_3a_3b {
@ Min Mn enclosure of Vn is 0.005
@ Min Mn enclosure of Vn  is 0.030 when Mn enclosure on one or both perpendicular directions<0.03um
  X = RECTANGLE ENC V5 M5 ABUT<90 OUTSIDE ALSO
  GOOD 0.005 OPPOSITE 0.030 OPPOSITE 0.005 OPPOSITE 0.030 OPPOSITE

  ENC X M5 < 0.005 ABUT<90 SINGULAR REGION OVERLAP OUTSIDE ALSO
  Y = ENC [X] M5 < 0.030 OPPOSITE
  INT Y < 0.005 ABUT==90 INTERSECTING ONLY REGION
  V5 NOT M5
}
V5_5a_5b {
@ Min Mn+1 enclsoure of Vn is 0.005
@ Min Mn+1 enclosure of Vn  is 0.02 when Mn enclosure on one or both perpendicular directions<0.02um
  X = RECTANGLE ENC V5 M6 ABUT<90 OUTSIDE ALSO
  GOOD 0.005 OPPOSITE 0.02 OPPOSITE 0.005 OPPOSITE 0.02 OPPOSITE

  ENC X M6 < 0.005 ABUT<90 SINGULAR REGION OVERLAP OUTSIDE ALSO

  Y = ENC [X] M6 < 0.02 OPPOSITE
  INT Y < 0.005 ABUT==90 INTERSECTING ONLY REGION
  V5 NOT M6
}
V5_10 {
@ Minimum Space between two neighbor Vns (different net and run length>0) is 0.13um.
 X1 = EXT V5 < 0.13 ABUT<90 OPPOSITE REGION NOT CONNECTED
 X1 NOT INSIDE INST
}

#IFDEF Recommended_rules_CHECK YES
V5_11_12_R {
@ There should be at least two Vns in the Mn and Mn+1 intersection area when either or both Mn and Mn+1 with width >= 0.5um
@ There should be at least two Vns in the Mn and Mn+1 intersection area when either or both Mn and Mn+1 
@ connected with metal line of width>=0.5um and space between Vn and wider metal edge <0.5um
@NOTICE: It is a recommended rule.
/*  X = SIZE (M5 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M5 STEP 0.01
  SV5 = V5 INTERACT SV5_metal
  ((X INTERACT SV5) NOT LOGO) NOT MARKG
  Y = SIZE (M6 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M6 STEP 0.01
  ((Y INTERACT SV5) NOT LOGO) NOT MARKG*/

  X = SIZE (M5 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M5 STEP 0.01
  SV5 = V5 INTERACT SV5_metal
  SV5_metal ENCLOSE (((SV5 INTERACT X) NOT LOGO) NOT MARKG)
  Y = SIZE (M6 WITH WIDTH >= 0.5) BY 0.499 INSIDE OF M6 STEP 0.01
  SV5_metal ENCLOSE (((SV5 INTERACT Y) NOT LOGO) NOT MARKG)
}
#ENDIF


#IFDEF TV1_TM1_CHECK YES

//=======================
//  TV1 - Top Via 1a DRC
//=======================

GROUP GTV1 TV1_?

TV1_1 {
@ Fixed TV1 size (square shape) is 0.36
  (NOT RECTANGLE (TV1 NOT GTV1) == 0.36 BY == 0.36) NOT MARKG
  NOT RECTANGLE (RECTANGLE (TV1 AND MARKG)) == 0.36 BY == 0.36 
}
TV1_2a {
@ Min Space between two TV1s is 0.34
  EXT TV1 < 0.34 ABUT<90 SINGULAR REGION
}

#IFDEF Recommended_rules_CHECK YES
TV1_2b_R {
@ Min Space between TV1s within array greater or equal to 3x3 (Two via regions whose space is <= 0.56um are considered to be in the same array) is 0.5
@NOTICE: It is a recommended rule.
  X = SIZE TV1 BY 0.28 OVERUNDER
  Y = SIZE X BY 0.855 UNDEROVER
  Z = TV1 INSIDE Y
  EXT Z < 0.5 ABUT < 90 SINGULAR REGION
}
#ENDIF

TV1_3a_3b {
@ Min Mn enclosure of TV1 (Mn is Metal layer directly underneath TV1) is 0.01
@ Min Mn enclosure of TV1 is 0.05 when Mn enclosure on one or both perpendicular directions< 0.05um (Mn is Metal layer directly underneath TV1)
  X = RECTANGLE ENC TV1 M6 ABUT<90 OUTSIDE ALSO
  GOOD 0.01 OPPOSITE 0.05 OPPOSITE 0.01 OPPOSITE 0.05 OPPOSITE

  ENC X M6 < 0.01 ABUT<90 SINGULAR OVERLAP OUTSIDE ALSO

  Y = ENC [X] M6 < 0.05 OPPOSITE
  INT Y < 0.01 ABUT==90 INTERSECTING ONLY
  TV1 NOT M6
}
TV1_5 {
@ Min TM1 enclosure of TV1 (four directions) is 0.02
  ENC TV1 TM1 < 0.02 ABUT < 90 SINGULAR REGION OUTSIDE ALSO
}

//=========================
//  TM1 - Top Metal 1a DRC
//=========================

/*
//--* Find Wide Metal *--//

WIDE_MT1a     = TM1 INTERACT (SIZE TM1 BY -1)   // wide metal

// begin shrink
WDMT1a_45     = ANGLE WIDE_MT1a >0<90
WDMT1a_90     = NOT ANGLE WIDE_MT1a >0<90

WDMT1a_EXP_45 = EXPAND EDGE WDMT1a_45 INSIDE BY 1*1.414213562
WDMT1a_EXP_90 = EXPAND EDGE WDMT1a_90 INSIDE BY 1 EXTEND BY 1

THIN_MT1a_TMP = WIDE_MT1a NOT (WDMT1a_EXP_45 OR WDMT1a_EXP_90)
THIN_MT1a     = SNAP THIN_MT1a_TMP 1            // end of shrink

// begin grow
TNMT1a_45     = ANGLE THIN_MT1a >0<90
TNMT1a_90     = NOT ANGLE THIN_MT1a >0<90

TNMT1a_EXP_45_TMP = EXPAND EDGE TNMT1a_45 OUTSIDE BY 1*1.414213562
TNMT1a_EXP_45 = SNAP TNMT1a_EXP_45_TMP 1
TNMT1a_EXP_90 = EXPAND EDGE TNMT1a_90 OUTSIDE BY 1 EXTEND BY 1

TNMT1a_EXP    = TNMT1a_EXP_45 OR TNMT1a_EXP_90

WDMT1a_PRE    = TNMT1a_EXP OR THIN_MT1a
WDMT1a_PRE_FILL = EXT WDMT1a_PRE < 1 ABUT>0<90 INTERSECTING ONLY REGION

MT1aOVER2    = WDMT1a_PRE OR WDMT1a_PRE_FILL    // end of grow


//--* End of Finding Wide Metal *--//
*/


GROUP GTM1 TM1_?

TM1_1 {
@ Min TM1 width is 0.40
  INT TM1 < 0.40 SINGULAR REGION
  INT TM1DUM < 0.40 REGION
}
TM1_2a{
@ Min Space between two TM1s is 0.40
  EXT TM1 < 0.40 SINGULAR REGION
  EXT TM1 TM1DUM < 0.40 REGION
  EXT TM1DUM < 0.40 REGION
}
TM1_2b {
@ Min Space between two TM1s is 0.5 when one or both TM1 width or length 2um, and the run length of two TM1s is >= 2um
CMACRO Mn_2b TM1ALL 2 2 0.5
}
TM1_3 {
@ Min TM1 area is 0.40
  AREA TM1ALL < 0.40
}
TM1_4 {
@ Min Enclosed dielectic area by TM1 is 0.6
  X = HOLES TM1 INNER EMPTY
  AREA X < 0.6
}
TM1_5 {
@ Min TM1 width is 20
@ (Top metal bond pad application can be waived.)
  X = TM1ALL WITH WIDTH > 20
  X NOT INTERACT PA
}
TM1_6a {
@ TM1 density (including dummy) in 200umX200um window with step size 100um is >= 20% and <= 85%. 
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking. 
@ (Top metal bond pad areas can be waived.)
  X = DENSITY (TM1i OR TM1DUM) < 0.20 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_TM1a_6a.log
  Y = (MARKF OR MARKG) OR PA
  X NOT Y
}
TM1_6a_PA {
@ TM1 density (including dummy) in 200umX200um window with step size 100um is >= 20% and <= 85%. 
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking. 
@ (Top metal bond pad areas can be waived.)
@ This rule checks PA area. It can be waived.
  X = DENSITY (TM1i OR TM1DUM) < 0.20 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_TM1a_6a_PA.log
  X AND PA
}
TM1_6b {
@ TM1 density (including dummy) in 200umX200um window with step size 100um is >= 20% and <= 85%. 
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking. 
@ (Top metal bond pad areas can be waived.)
  X = DENSITY (TM1i OR TM1DUM) > 0.85 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_TM1a_6b.log
  Y = (MARKF OR MARKG) OR PA
  X NOT Y
}
TM1_6b_PA {
@ TM1 density (including dummy) in 200umX200um window with step size 100um is >= 20% and <= 85%. 
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking. 
@ (Top metal bond pad areas can be waived.)
@ This rule checks PA area. It can be waived.
  X = DENSITY (TM1i OR TM1DUM) > 0.85 WINDOW 200 STEP 100 backup INSIDE OF LAYER density_checkarea PRINT density_report_TM1a_6b_PA.log
  X AND PA
}

#ENDIF


#IFDEF TV2_TM2_CHECK YES
 
//=======================
//  TV2 - Top Via 2 DRC
//=======================

GROUP GTV2 TV2_?

TV2_1 {
@ Fixed TV2 size (square shape) is 0.36
  (NOT RECTANGLE (TV2 NOT GTV2) == 0.36 BY == 0.36) NOT MARKG
  NOT RECTANGLE (RECTANGLE (TV2 AND MARKG)) == 0.36 BY == 0.36 
}
TV2_2a {
@ Min Space between two TV2s is 0.34
  EXT TV2 < 0.34 ABUT<90 SINGULAR REGION
}
#IFDEF Recommended_rules_CHECK YES
TV2_2b_R {
@ Min Recommended space between TV2s within array greater or equal to 3x3 (Two via regions whose space is <=0.56um are considered to be in the same array) is 0.5
@NOTICE: It is a recommended rule.
  X = SIZE TV2 BY 0.28 OVERUNDER
  Y = SIZE X BY 0.855 UNDEROVER
  Z = TV2 INSIDE Y
  EXT Z < 0.5 ABUT < 90 SINGULAR REGION
}
#ENDIF

TV2_3a_3b {
@ Min TM1 enclosure of TV2 is 0.01
@ Min TM1 enclosure of TV2 is 0.05 when TM1 enclosure on one or both perpendicular directions < 0.05um

  X = RECTANGLE ENC TV2 TM1 ABUT<90 OUTSIDE ALSO
  GOOD 0.01 OPPOSITE 0.05 OPPOSITE 0.01 OPPOSITE 0.05 OPPOSITE

  ENC X TM1 < 0.01 ABUT<90 SINGULAR OVERLAP OUTSIDE ALSO

  Y = ENC [X] TM1 < 0.05 OPPOSITE
  INT Y < 0.01 ABUT==90 INTERSECTING ONLY
  TV2 NOT TM1
}
TV2_5 {
@ Min TV2 enclosure by TM2 (four directions) is 0.02
  ENC TV2 TM2 < 0.02 ABUT < 90 SINGULAR REGION OUTSIDE ALSO
}

//=========================
//  TM2 - Top Metal 2 DRC
//=========================

/*
//--* Find Wide Metal *--//

WIDE_MT2a     = TM2 INTERACT (SIZE TM2 BY -1)   // wide metal

// begin shrink
WDMT2a_45     = ANGLE WIDE_MT2a >0<90
WDMT2a_90     = NOT ANGLE WIDE_MT2a >0<90

WDMT2a_EXP_45 = EXPAND EDGE WDMT2a_45 INSIDE BY 1*1.414213562
WDMT2a_EXP_90 = EXPAND EDGE WDMT2a_90 INSIDE BY 1 EXTEND BY 1

THIN_MT2a_TMP = WIDE_MT2a NOT (WDMT2a_EXP_45 OR WDMT2a_EXP_90)
THIN_MT2a     = SNAP THIN_MT2a_TMP 1            // end of shrink

// begin grow
TNMT2a_45     = ANGLE THIN_MT2a >0<90
TNMT2a_90     = NOT ANGLE THIN_MT2a >0<90

TNMT2a_EXP_45_TMP = EXPAND EDGE TNMT2a_45 OUTSIDE BY 1*1.414213562
TNMT2a_EXP_45 = SNAP TNMT2a_EXP_45_TMP 1
TNMT2a_EXP_90 = EXPAND EDGE TNMT2a_90 OUTSIDE BY 1 EXTEND BY 1

TNMT2a_EXP    = TNMT2a_EXP_45 OR TNMT2a_EXP_90

WDMT2a_PRE    = TNMT2a_EXP OR THIN_MT2a
WDMT2a_PRE_FILL = EXT WDMT2a_PRE < 1 ABUT>0<90 INTERSECTING ONLY REGION

MT2aOVER2    = WDMT2a_PRE OR WDMT2a_PRE_FILL    // end of grow


//--* End of Finding Wide Metal *--//
*/

GROUP GTM2 TM2_?

TM2_1 {
@ Min TM2 width is 0.40
  INT TM2 < 0.40 SINGULAR REGION
  INT TM2DUM < 0.40 REGION
}
TM2_2a {
@ Min Space between TM2s is 0.40
  EXT TM2 < 0.40 SINGULAR REGION
  EXT TM2 TM2DUM < 0.40 REGION
  EXT TM2DUM < 0.40 REGION
}
TM2_2b {
@ Min Space between two TM2s when one or both TM2 width or length >= 2um, and the run length of two TM2s is >= 2um is 0.5
CMACRO Mn_2b TM2ALL 2 2 0.5
}
TM2_3 {
@ Min TM2 area is 0.40
  AREA TM2ALL < 0.40
}
TM2_4 {
@ Min Enclosed dielectic area by TM2 is 0.6
  X = HOLES TM2 INNER EMPTY
  AREA X < 0.6
}
TM2_5 {
@ Max TM2 width is 30
@ Top metal bondpads can be waived.
  X = TM2ALL WITH WIDTH > 30.00
  X NOT INTERACT PA
}
//Skip TM2a_6 : Device under top metal pad is allowed
TM2_7a {
@ TM2 density (including dummy) in 400umX400um window with step size 200um is >= 20% and <= 85%. 
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking. 
@ Top metal bond pad areas can be waived.
  X = DENSITY (TM2i OR TM2DUM) < 0.20 WINDOW 400 STEP 200 backup INSIDE OF LAYER density_checkarea PRINT density_report_TM2a.log
  Y = (INDMY OR MARKF) OR MARKG
  X NOT Y
}
TM2_7b {
@ TM2 density (including dummy) in 400umX400um window with step size 200um is >= 20% and <= 85%. 
@ INDMY/MARKF/MARKG/MARKS covered areas are excluded for this rule checking. 
@ Top metal bond pad areas can be waived.
  X = DENSITY (TM2i OR TM2DUM) > 0.85 WINDOW 400 STEP 200 backup INSIDE OF LAYER density_checkarea PRINT density_report_TM2b.log
  Y = (INDMY OR MARKF) OR MARKG
  X NOT Y
}
#ENDIF 



#IFDEF UTV2_MTT2_CHECK YES

//=======================================
//  UTV2  -  For RF product application
//=======================================

GROUP GUTV2 UTV2_?

UTV2_1 {
@ Fixed UTV2 size (square shape) is 0.36
  (NOT RECTANGLE (TV2 NOT GTV2) == 0.36 BY == 0.36) NOT MARKG
  NOT RECTANGLE (RECTANGLE (TV2 AND MARKG)) == 0.36 BY == 0.36
}
UTV2_2a {
@ Min Space between two UTV2s is 0.34
  EXT TV2 < 0.34 ABUT<90 SINGULAR REGION
}

#IFDEF Recommended_rules_CHECK YES
UTV2_2b_R {
@ Recommended space between UTV2s is 0.5 when array equal to or greater than 4x4. 
@ (Two via regions whose space is <=0.56um are considered to be in the same array.)
@NOTICE: It is a recommended rule.
  X = SIZE TV2 BY 0.28 OVERUNDER
  Y = SIZE X BY 1.22 UNDEROVER
  Z = TV2 INSIDE Y
  EXT Z < 0.5 ABUT < 90 SINGULAR REGION
}
#ENDIF

UTV2_3_4 {
@ Min TM1 enclosure of UTV2 (TM1 is replaced with STM1 if 2X STM1 is used under UTV2) is 0.01
@ Min TM1enclosure of UTV2 is 0.05 when TM1 enclosure on perpendicular directions < 0.05um (TM1 is replaced with STM1 if 2X STM1 is used under UTV2)

  X = RECTANGLE ENC TV2 TM1 ABUT<90 OUTSIDE ALSO
  GOOD 0.01 OPPOSITE 0.05 OPPOSITE 0.01 OPPOSITE 0.05 OPPOSITE

  ENC X TM1 < 0.01 ABUT<90 SINGULAR OVERLAP OUTSIDE ALSO

  Y = ENC [X] TM1 < 0.05 OPPOSITE
  INT Y < 0.01 ABUT==90 INTERSECTING ONLY
  TV2 NOT TM1
}
UTV2_5 {
@ Min MTT2 enclosure of UTV2 (four directions) is 0.3
  ENC TV2 TM2 < 0.3 ABUT < 90 SINGULAR REGION OUTSIDE ALSO
}

//=======================================
//  MTT2 - For RF product application
//=======================================

/*
//--* Find Wide Metal *--//

WIDE_MTT     = TM2 INTERACT (SIZE TM2 BY -1)   // wide metal

// begin shrink
WDMTT_45     = ANGLE WIDE_MTT >0<90
WDMTT_90     = NOT ANGLE WIDE_MTT >0<90

WDMTT_EXP_45 = EXPAND EDGE WDMTT_45 INSIDE BY 1*1.414213562
WDMTT_EXP_90 = EXPAND EDGE WDMTT_90 INSIDE BY 1 EXTEND BY 1

THIN_MTT_TMP = WIDE_MTT NOT (WDMTT_EXP_45 OR WDMTT_EXP_90)
THIN_MTT     = SNAP THIN_MTT_TMP 1            // end of shrink

// begin grow
TNMTT_45     = ANGLE THIN_MTT >0<90
TNMTT_90     = NOT ANGLE THIN_MTT >0<90

TNMTT_EXP_45_TMP = EXPAND EDGE TNMTT_45 OUTSIDE BY 1*1.414213562
TNMTT_EXP_45 = SNAP TNMTT_EXP_45_TMP 1
TNMTT_EXP_90 = EXPAND EDGE TNMTT_90 OUTSIDE BY 1 EXTEND BY 1

TNMTT_EXP    = TNMTT_EXP_45 OR TNMTT_EXP_90

WDMTT_PRE    = TNMTT_EXP OR THIN_MTT
WDMTT_PRE_FILL = EXT WDMTT_PRE < 1 ABUT>0<90 INTERSECTING ONLY REGION

MTTOVER2    = WDMTT_PRE OR WDMTT_PRE_FILL    // end of grow


//--* End of Finding Wide Metal *--//
*/

GROUP GMTT2 MTT2_?

MTT2_1 {
@ Min MTT2 metal width is 1.50
  INT TM2 < 1.50 SINGULAR REGION
  INT TM2DUM < 1.50 SINGULAR REGION
}
MTT2_2a {
@ Min Space between MTT2s is 1.5
  EXT TM2 < 1.50 SINGULAR REGION
  EXT TM2 TM2DUM < 1.50 SINGULAR REGION
  EXT TM2DUM < 1.50 SINGULAR REGION
}
MTT2_2b {
@ Min Space between two MTT2s  is 2.0 when one or both MTT2 width or length >= 16um, and the run length of two MTT2s >2um
CMACRO Mn_2c TM2ALL 2.001 16 2
}
MTT2_5 {
@ Min Space between an Inductor MTT2 and other MTT2 is 30
  EXT (TM2 AND INDMY) (TM2 NOT INDMY) < 30 OPPOSITE REGION
}
MTT2_6 {
@ Min Metal area (in um2) is 8.00
  AREA TM2ALL < 8.00
}
MTT2_7 {
@ Min Enclosed dielectic area by MTT2s is 6.0
  X = HOLES TM2 INNER EMPTY
  AREA X < 6.0
}
MTT2_8 {
@ Max TTM width is 50
  X = TM2ALL WITH WIDTH > 50
  X NOT INTERACT PA
}
MTT2_9a  {
@ Max. MTT2 density (including dummy) in 400umX400um window with step size 200um is 70%
  DENSITY (TM2i OR TM2DUM) > 0.70 WINDOW 400 STEP 200 backup PRINT density_report_MTT2_9a.log  //; Density check in each 400x400 area
}
MTT2_9b {
@ Max MTT2 pattern density on the whole chip (including dummy patterns) is 55%
  DENSITY (TM2i OR TM2DUM) > 0.55 PRINT density_report_MTT2_9b.log
}

#IFDEF Recommended_rules_CHECK YES
MTT2_9c_R {
@ Recommend the average MTT2 density of whole chip is larger than 20% (including dummy patterns), otherwise SMIC would help to add dummy patterns.
@NOTICE: It is a recommended rule.
  DENSITY (TM2i OR TM2DUM) < 0.2 PRINT density_report_MTT2_9c.log
}
#ENDIF

MTT2_10 {
@ Both active and passive devices inside Inductor region are not allowed
  Metal_res = ((((((M1R OR M2R) OR M3R) OR M4R) OR M5R) OR M6R) OR TM1R) OR TM2R
  X = ((((((DSTR OR DMPNP) OR MOMDMY) OR VARJUN) OR RESP1) OR RESAA) OR RESNW) OR Metal_res
  AND X INDMY
}


MTT2_12 {
@ MTT2 Inductor area must by covered by "INDMY" and the enclosure by "INDMY" is >= 15
  ENC (TM2 INTERACT INDMY) INDMY < 15 OPPOSITE REGION OUTSIDE ALSO
}

 

#ENDIF



//=====================================              
//  PA1 -  Passivation One Rules DRC
//===================================== 

GROUP GPA PA_?

PA_1 {
@ Min PA enclosure by TM2 or other metal layer directly underneath PA is 1.0
  ENC PA TM2 < 1.00 ABUT<90 SINGULAR REGION OUTSIDE ALSO
}
PA_2 {
@ Min PA width and length is 3.0
  INT PA < 3 ABUT<90 SINGULAR REGION
}
PA_3 {
@ Min Space between two PA is 3.0
  EXT PA < 3 ABUT<90 SINGULAR REGION
}

#IFDEF Recommended_rules_CHECK YES
PA_1_R {
@ Min PA enclosure by TM2 or other metal layer directly underneath PA is 1.5
@NOTICE: It is a recommended rule.
  ENC PA TM2 < 1.50 ABUT<90 SINGULAR REGION OUTSIDE ALSO
}
PA_2_R {
@ Min PA width and length (suggest to consult with package vendor) is 55
@NOTICE: It is a recommended rule.
  INT PA < 55.0 OPPOSITE REGION PARA ONLY
}
PA_3_R {
@ Min Space between two PA is 5.0
@NOTICE: It is a recommended rule.
  EXT PA < 5.0 ABUT<90 SINGULAR REGION
}
#ENDIF


//===============================
// RDV -  RDL via design rules
//===============================

GROUP GRDV RDV_?

RDV_Fuse = RDLVF OR GRDLV
RDV_1 {
@ Min RDL via enclosure by RDL (except fuse, seal ring and guard ring design) is 1.5
  X = ENC (RDLVIA NOT RDV_Fuse) RDL < 1.50 ABUT<90 SINGULAR REGION OVERLAP OUTSIDE ALSO
  (X NOT LOGO) NOT MARKG
}
RDV_2 {
@ Min RDL Via width and length (except fuse, seal ring and guard ring design) is 3.0
  INT ((RDLVIA NOT RDV_Fuse) NOT MARKG) < 3 ABUT<90 SINGULAR REGION
}
RDV_3 {
@ Min Space between two RDL vias is 3.0
  EXT (RDLVIA NOT RDV_Fuse) < 3 ABUT<90 SINGULAR REGION
}
RDV_4 {
@ Min RDL via enclosure by TM2 or other metal layer directly underneath PA1 (except seal ring and guard ring design) is 1.0
  X = ENC (RDLVIA NOT RDV_Fuse) TM2 < 1.00 ABUT<90 SINGULAR REGION OVERLAP OUTSIDE ALSO
  (X NOT LOGO) NOT MARKG
}
RDV_5 {
@ Min Space between RDV via and PA is 5.0
  EXT RDLVIA PA < 5 ABUT<90 SINGULAR REGION
}



//==================================================             
//  RDL -  Al RDL (re-distribution layer) Rules DRC
//================================================== 

GROUP GRDL RDL_?

RDL_1 {
@ Min RDL Width (except fuse design) is 3.0
  INT (RDL NOT ALFUSE) < 3.0 ABUT<90 SINGULAR REGION
}
RDL_2a {
@ Min Space between two RDLs is 2.0
  EXT RDL < 2.0 ABUT<90 SINGULAR REGION
}
RDL_2b {
@ Min Space between two RDLs with one or both RDL width larger than 10um is 3.0
  X = RDL WITH WIDTH > 10
  EXT X <3.0 ABUT<90 SINGULAR REGION
}
/*
RDL_2c {
@ RDL space in case RDL width is larger than 35um 5.0
  X = RDL WITH WIDTH >= 35
  EXT X <5.0 ABUT<90 SINGULAR REGION
}*/
RDL_3 {
@ Min Space between RDL and L mark window is 10
  EXT RDL LOGO < 10 ABUT<90 SINGULAR REGION
}
RDL_4 {
@ Minimum space between RDL and Fuse area (marked by MARKF) is 10
  EXT RDL MARKF < 10 ABUT<90 SINGULAR REGION
}


//============================
//  ALPA - ALPA Rules Check 
//============================


/*ALPA patterns include Al pads generated by PA logic generation and RDL patterns. Please check below rules after logic operation*/

GROUP GALPA ALPA_?

ALPA	= (SIZE PA BY PA_su) OR RDL

ALPA_1 {
@ PA opening without ALPA patterns above landed on TM2 is not allowed. Min ALPA patterns enclosure of PA is 1.5
  ENC PA ALPA < 1.5 ABUT<90 SINGULAR REGION OUTSIDE ALSO
}
ALPA_2 {
@ Min Space between ALPA patterns is 2
  EXT ALPA < 2 ABUT<90 SINGULAR REGION
}
ALPA_3 {
@ Min Space between Al patterns of width larger than 35um and Fuse window edge is 50
  X = ALPA WITH WIDTH > 35
  EXT X FUSE < 50 ABUT<90 SINGULAR REGION
}

//=====================================              
//  PA2 -  Passivation Two Rules DRC
//===================================== 

GROUP GRDLPA2 RDLPA2_?

RDLPA2_1 {
@ Min RDL PA2 width is 10 (suggest to consult with package vendor)
  INT RDLPA2 < 10 ABUT<90 SINGULAR REGION
}
RDLPA2_2 {
@ Min Space between two RDL PA2 is 5 (suggest to consult with package vendor)
  EXT RDLPA2 < 5 ABUT<90 SINGULAR REGION
}
RDLPA2_3 {
@ Min RDL enclosure of PA2 is 1.5
  ENC RDLPA2 RDL < 1.5 ABUT<90 SINGULAR REGION
}
RDLPA2_4 {
@ Minimum Space between RDLPA2 and RDL via (except fuse and guard ring/seal ring design) Via is 1um.
  X = EXT RDLPA2 (RDLVIA NOT RDV_Fuse) < 1 ABUT<90 SINGULAR REGION
  X NOT MARKG
}
RDLPA2_5 {
@ RDL Via is not allowed to overlap with RDLPA2.
  X = (RDLVIA NOT RDV_Fuse) NOT MARKG
  X AND RDLPA2
}


#IFDEF BORDER_CHECK YES
//==================
//  Border Rules
//==================

GROUP GBD BD_?

BD_EXTENT = EXTENT DRAWN ORIGINAL
BD_EXTENT_OTHER = EXTENT DRAWN ORIGINAL IGNORE BORDER
BD_OTHER_OUTSIDE = BD_EXTENT_OTHER NOT BORDER

BD_1 {
@ Min Border layer enclosure of layout patterns (all chip design) is 0.37
 ENC BD_EXTENT_OTHER BORDER < 0.37 ABUT<90 SINGULAR
}
BD_2 {
@ Min Border layer enclosure of DNW is 6
 ENC DNW BORDER < 6 ABUT<90 SINGULAR REGION
}
BD_3 {
@ BORDER layer must enclose all chip layout pattern
 COPY BD_OTHER_OUTSIDE
}
#ENDIF




//=================================================
//                   SRAM rules
//=================================================

//===================================
//  SRAM AA -SRAM Active Area DRC
//===================================

GROUP GSRAA SRAA_?

SRAA_2a {
@ Min Channel width for 1.0/1.2V NMOS/PMOS transistors is 0.085
  Y = LENGTH GATE_W < 0.085
  (EXPAND EDGE Y INSIDE BY 0.001) AND INST
}
SRAA_4 {
@ Min N+AA enclosure by NW is 0.055
  X = ENC NTAP (NW NOT INTERACT RESNW) < 0.055 ABUT<90 SINGULAR REGION
  X AND INST
}
SRAA_5 {
@ Min Space between NW and N+AA is 0.06
  X = EXT NW NACT < 0.06 ABUT<90 SINGULAR REGION
  X AND INST
}
SRAA_6 {
@ Min P+AA enclosed by NW is 0.06
  X = ENC PACT (NW NOT NWR) < 0.06 ABUT<90 SINGULAR REGION
  X AND INST
}
SRAA_7 {
@ Min Space between NW and P+AA inside PW is 0.11
  X = EXT NW PTAP < 0.11 ABUT<90 SINGULAR REGION
  X AND INST
}
SRAA_8 {
@ Min AA area is 0.029
  X = AREA AA < 0.029
  X AND INST
}

//======================================
//  SRAM VTNH: SRAM High Vt NMOS Implant
//======================================

GROUP GSRVTNH SRVTNH_?

SRVTNH_4 {
@ Min VTNH extension outside of NMOS AA along gate poly length direction is 0.065
  X = (NACT AND VTNH) TOUCH EDGE GATE 
  Y = ENC X VTNH < 0.065 ABUT<90 REGION OPPOSITE
  Y AND INST
}
SRVTNH_8 {
@ Min VTNH area is 0.11
  X = AREA VTNH < 0.11
  X AND INST
}

//======================================
//  SRAM VTPH: SRAM High Vt PMOS Implant
//======================================

GROUP GSRVTPH SRVTPH_?

SRVTPH_4 {
@ Min VTPH extension outside of PMOS AA along gate poly length direction is 0.065
  X = (PACT AND VTPH) TOUCH EDGE GATE
  Y = ENC X VTPH < 0.065 ABUT<90 REGION OPPOSITE
  Y AND INST
}
SRVTPH_8 {
@ Min VTPH area is 0.11
  X = AREA VTPH < 0.11
  X AND INST
}

//==============================
//   SRAM GT -SRAM Poly Rule DRC
//==============================

GROUP GSRGT SRGT_?


POLYEND = CONVEX EDGE GT ANGLE1 >0 ANGLE2 > 0 LENGTH1 > 0.14 LENGTH2 > 0.14 WITH LENGTH <= 0.14

SRGT_3a1 {
@ Min Space between GTs with the run length >0.12um is 0.12 

   END_END = EXT [POLYEND] < 0.12 OPPOSITE
  
   X = (EXT [GT] < 0.12 OPPOSITE) NOT COIN EDGE END_END
   Y = LENGTH X > 0.12
   Y INSIDE EDGE INST
}
SRGT_3a2 {
@ Min Space between GTs with the run lenght > 0.025 and <= 0.12um is 0.107 

   END_END = EXT [POLYEND] < 0.107 OPPOSITE

   X = (EXT [GT] < 0.107 OPPOSITE) NOT COIN EDGE END_END
   Y = LENGTH X > 0.025 <= 0.12
   Y INSIDE EDGE INST
}
SRGT_3a3 {
@ Min Space between GTs with the run lenght <= 0.025um is 0.06 

   END_END = EXT [POLYEND] < 0.06 OPPOSITE

   X = (EXT [GT] < 0.06 OPPOSITE) NOT COIN EDGE END_END
   Y = LENGTH X <= 0.025
   Y INSIDE EDGE INST
}
SRGT_3c {
@ Min Space between GTs on the same AA is 0.12
  X = EXT GT_EMPTY < 0.12 ABUT < 90 SINGULAR REGION CONNECTED
  X AND INST
}
SRGT_3d {
@ Min Space between poly line end to end is 0.105                            
  X = EXT POLYEND < 0.105 OPPOSITE REGION EXCLUDE SHIELDED
  X AND INST
}
SRGT_4a {
@ Min Space between AA and GT on field oxide with the length > 0.04 is 0.05.
  X = AA INSIDE EDGE GT
  Y = AA NOT COIN EDGE X
  A = EXT [Y] INTERGT < 0.05 OPPOSITE
  B = LENGTH A > 0.04
  B INSIDE EDGE INST
}
SRGT_4b {
@ Min Space between AA and GT on field oxide with the run length <= 0.04 is 0.032.
  X = AA INSIDE EDGE GT
  Y = AA NOT COIN EDGE X
  A = EXT [Y] INTERGT < 0.032 OPPOSITE
  B = LENGTH A <=0.04
  B INSIDE EDGE INST
}
SRGT_5a {
@ Min Extension of AA outside of GT with run length > 0.15 (not include dummy AA and dummy Poly) is 0.095.
   X = ENC [GT] AA < 0.095 OPPOSITE
   Y = LENGTH X > 0.15  
   Y INSIDE EDGE INST
}
SRGT_5b {
@ Min Extension of AA outside of GT with run length >0.015 and <=0.04 (not include dummy AA and dummy Poly) is 0.077.
   X = ENC [GT] AA < 0.077 OPPOSITE
   Y = LENGTH X > 0.015 <=0.04  
   Y INSIDE EDGE INST
}
SRGT_5c {
@ Min Extension of AA outside of GT with run length > 0.04 and <= 0.15 (not include dummy AA and dummy Poly) is 0.077.

   X = ENC [GT] AA < 0.077 OPPOSITE
   Y = LENGTH X > 0.04 <= 0.15
 
   Z = (GT AND AA) NOT GATE
   L = ENC [Z] AA <= 0.01 OPPOSITE
   M = LENGTH L > 0.04 <= 0.15

   (Y NOT COIN EDGE M) INSIDE EDGE INST
}
SRGT_6 {
@ Min Extension of gate poly end-cap outside of AA (not include dummy AA and dummy Poly)  is 0.068
  X = GATE COIN EDGE AA
  Y = ENC X GT < 0.068 ABUT<90 REGION
  Y AND INST
}



//=======================================
// SRAM SN - SRAM N+ S/D Implantation DRC
//=======================================

GROUP GSRSN SRSN_?

SRSN_3a {
@ Min Space between SN and P+AA inside NW with the run length > 0.055 is 0.065
  X = (PACT NOT PTAP) NOT TOUCH EDGE SN
  Y = EXT [SN] X < 0.065 OPPOSITE
  A = LENGTH Y > 0.055
  A INSIDE EDGE INST
}
SRSN_3b {
@ Min Space between SN and P+AA inside NW with the run length <=0.055 is 0.06 
  X = (PACT NOT PTAP) NOT TOUCH EDGE SN
  Y = EXT [SN] X < 0.06 OPPOSITE
  A = LENGTH Y <= 0.055
  A INSIDE EDGE INST
}
SRSN_5 {
@ Min Space between SN and PMOS gate along source/drain direction is 0.219
  X = GATE_W INSIDE EDGE SP
  Y = EXT X SN < 0.219 ABUT<90 REGION OPPOSITE
  Y AND INST
}
SRSN_6 {
@ Min SN extension outside of poly gate along source/drain direction for NMOS is 0.214
  X = GATE_W INSIDE EDGE SN
  Y = ENC X SN < 0.214 ABUT<90 REGION OPPOSITE
  Y AND INST
}
SRSN_7a_8a {
@ Min SN extension outside of NMOS AA along gate poly length direction with the run length >0.055um is 0.065, if the distance to the related poly is > 0.20um
@ Min SN extension outside of NMOS AA along gate poly length direction with the run length >0.055um is 0.065, if the distance to the related poly is <= 0.20um
  AAEIGT  = AA INSIDE EDGE GT
  X = NMOS TOUCH EDGE AAEIGT
  Y = ENC X [SN] < 0.065 OPPOSITE
  A = LENGTH Y > 0.055
  A INSIDE EDGE INST
}

SRSN_7b_8b {
@ Min SN extension outside of NMOS AA along gate poly length direction with the run length <=0.055um is 0.06, if the distance to the related poly is > 0.20um
@ Min SN extension outside of NMOS AA along gate poly length direction with the run length <=0.055um is 0.06, if the distance to the related poly is <= 0.20um
  AAEIGT  = AA INSIDE EDGE GT
  X = NMOS TOUCH EDGE AAEIGT
  Y = ENC X [SN] < 0.06 OPPOSITE
  A = LENGTH Y <= 0.055
  A INSIDE EDGE INST
}

//=======================================
// SRAM SP - SRAM P+ S/D Implantation DRC
//=======================================

GROUP GSRSP SRSP_?

SRSP_3a {
@ Min Space between SP and N+AA inside PW with the run length > 0.055 is 0.065
  X = (NACT NOT NTAP) NOT TOUCH EDGE SP
  Y = EXT [SP] X < 0.065 OPPOSITE
  A = LENGTH Y > 0.055
  A INSIDE EDGE INST
}
SRSP_3b {
@ Min Space between SP and N+AA inside PW with the run length <=0.055 is 0.06 
  X = (NACT NOT NTAP) NOT TOUCH EDGE SP
  Y = EXT [SP] X < 0.06 OPPOSITE
  A = LENGTH Y <= 0.055
  A INSIDE EDGE INST
}
SRSP_5 {
@ Min Space between SP and NMOS gate along source/drain direction is 0.219
  X = GATE_W INSIDE EDGE SN
  Y = EXT X SP < 0.219 ABUT<90 REGION OPPOSITE
  Y AND INST
}
SRSP_6 {
@ Min SP extension outside of PMOS gate along source/drain direction is 0.214
  X = (GT INSIDE EDGE PACT) COIN EDGE GATE
  Y = ENC X SP < 0.214 ABUT<90 REGION OPPOSITE
  Y AND INST
}
SRSP_7a_8a {
@ Min SP extension outside of PMOS AA along gate poly length direction with the run length >0.055m is 0.065, if the distance to the related poly is > 0.20um
@ Min SP extension outside of PMOS AA along gate poly length direction with the run length >0.055m is 0.065, if the distance to the related poly is > 0.20um
  AAEIGT  = AA INSIDE EDGE GT
  X = PMOS TOUCH EDGE AAEIGT
  Y = ENC X [SP] < 0.065 OPPOSITE
  A = LENGTH Y > 0.055
  A INSIDE EDGE INST
}

SRSP_7b_8b {
@ Min SP extension outside of PMOS AA along gate poly length direction with the run length <=0.055um is 0.06, if the distance to the related poly is > 0.20m
@ Min SP extension outside of PMOS AA along gate poly length direction with the run length <=0.055um is 0.06, if the distance to the related poly is <= 0.20um
  AAEIGT  = AA INSIDE EDGE GT
  X = PMOS TOUCH EDGE AAEIGT
  Y = ENC X [SP] < 0.06 OPPOSITE
  A = LENGTH Y <= 0.055
  A INSIDE EDGE INST
}

//============================
//  SRAM CT -SRAM Contact DRC
//============================

GROUP GSRCT SRCT_?

CT_SR = (CTi INSIDE INST) NOT INSIDE EXCLU
SCT_SR = RECTANGLE CT_SR ASPECT == 1
RCT_SR = CT_SR NOT SCT_SR

SRCT_2a1 {
@ Min Space between contacts (runlength > 0.02) is 0.11
  X = EXT [CT] < 0.11 OPPOSITE
  Y = LENGTH X > 0.02
  Y INSIDE EDGE INST
}
SRCT_2a2 {
@ Min Space between contacts (runlength <=0.02) is 0.09
  X = EXT [CT] < 0.09 OPPOSITE
  Y = LENGTH X <= 0.02
  Y INSIDE EDGE INST
}
SRCT_4a {
@ Min Space between poly and contact on AA for 1.0V/1.2V is 0.038
  X = EXT GT ACT_CT < 0.038 ABUT<90 SINGULAR REGION 
  (X NOT DGTG) AND INST
}
//SRCT_5 {
//@ Min Square CT area enclosed by AA for CT landed on AA is 87%
//  X = SCT_SR CUT AA
//  Y = X AND AA
//  Z = DFM PROPERTY X Y OVERLAP ABUT ALSO
//      [- = COUNT(Y)] == 1
//      [- = AREA(Y)/AREA(X)] >= 0.87
//  X NOT Z
//}
SRCT_6 {
@ Min CT enclosure by poly for CT landed on poly (exclude rectangular CT) is 0
  (SCT_SR INTERACT GT) NOT GT
}
SRCT_7 {
@ Min M1 enclosure of CT (four directions, exclude rectangular CT) is 0
  SCT_SR NOT M1
}
SRCT_9 {
@ Square CT is not allowed to land on gate  
  X = AND GATE (RECTANGLE CT ASPECT == 1)
  X AND INST
}
SRCT_101b {
@ Min Rectangular CT width is 0.08
  INT RCT_SR < 0.08 ABUT<90 SINGULAR REGION
}
SRCT_101c {
@ Min Rectangular CT overlap AA area is 0.01
  X = RCT_SR AND AA
  AREA X < 0.01
}
SRCT_101d {
@ Min Rectangular CT overlap poly is 0.073
  INT RCT_SR GT < 0.073 ABUT<90 SINGULAR REGION
}
SRCT_101e {
@ Min Rectangular CT overlap poly area is 0.006
  X = AND RCT_SR GT
  AREA X < 0.006
}
SRCT_101f {
@ Min Rectangular CT overlap M1 area is 0.017
  X = AND RCT_SR M1
  AREA X < 0.017
}
SRCT_101g {
@ Min Poly extension outside of rectangular CT is -0.008
/*  X = GT INSIDE EDGE RCT_SR
  Y = EXPAND EDGE X OUTSIDE BY 0.008
  Z = (GT WITH EDGE X) OR Y
  (RCT_SR INTERACT Z) NOT Z*/

  X = GT AND RCT_SR
  Y = CT ENCLOSE X
  Z = CONVEX EDGE X == 2
  M = Z NOT COIN EDGE Y
  L = CONVEX EDGE M ANGLE1 > 0 ANGLE2 > 0
  ENC (L) Y <= 0.008 OPPOSITE  
}
SRCT_101h {
@ Max Rectangular CT extension outside of poly (without AA overlap) is 0.02 
 /* X = SIZE (GT AND RCT_SR) BY 0.02 
  ((RCT_SR NOT X) NOT AA) TOUCH X*/

  X = GT AND RCT_SR
  Y = CT ENCLOSE X
  Z = CONVEX EDGE X == 2
  M = Z NOT COIN EDGE Y
  L = CONVEX EDGE M ANGLE1 == 0 ANGLE2 >= 0
  H = ENC (L) Y <= 0.02 OPPOSITE
  H NOT INSIDE EDGE AA
}
SRCT_101i {
@ Min M1 enclosure of rectangular CT is -0.032
  X = M1 INSIDE EDGE RCT_SR
  Y = EXPAND EDGE X OUTSIDE BY 0.032
  Z = (M1 WITH EDGE X) OR Y
  (RCT_SR INTERACT Z) NOT Z
}

//===========================
// SRAM M1 - Metal 1 SRAM DRC
//===========================

GROUP GSRM1 SRM1_?

SRM1_2a1 {
@ Min Space between M1s	 with the run length>0.26um is 0.09
  X = EXT [M1] < 0.09 OPPOSITE
  Y = LENGTH X > 0.26
  Y INSIDE EDGE INST 
}
SRM1_2a2 {
@ Min Space between two M1s with the run length >=0.09um and <=0.26um is 0.08
  X = EXT [M1] < 0.08 OPPOSITE
  Y = LENGTH X >= 0.09 <= 0.26
  Y INSIDE EDGE INST
}
SRM1_2a3 {
@ Min Space between two M1s with the run length <0.09um is 0.075
  X = EXT [M1] < 0.075 OPPOSITE
  Y = LENGTH X < 0.09
  Y INSIDE EDGE INST
}
SRM1_4 {
@ Min M1 area is 0.019
 X = AREA M1 < 0.019
 X AND INST
}
M1_SRE = (M1i INTERACT INST) OR EMPTY
CT_SRE = ((SIZE CT_SR BY -0.032) AND M1_SRE) OR EMPTY  //Refer to SRCT.101i
V1_SRE = V1i OR EMPTY
CONNECT M1_SRE CT_SRE
CONNECT M1_SRE V1_SRE

SRM1_101 {
@ Min Space between M1 and adjacent CT with run length >0 is 0.082
//Refer to SRCT.101i
  X = EXT M1_SRE CT_SRE < 0.114 ABUT<90 REGION OPPOSITE EXTENDED 0.032 MEASURE ALL NOT CONNECTED
  X AND INST
}
SRM1_102 {
@ Min Space between M1 and adjacent V1 with run length >0.03 is 0.087
//refer to SRV1_3a
  X = EXT M1_SRE [V1_SRE] < 0.087 ABUT<90 OPPOSITE MEASURE ALL NOT CONNECTED
  Y = LENGTH X > 0.03
  Y INSIDE EDGE INST 
}

//==========================
//  SRAM V1 - Via 1 SRAM DRC
//==========================

GROUP GSRV1 SRV1_?

SRV1_3a {
@ Min M1 enclosure of V1 (four directions) is 0
 (V1 NOT M1) AND INST                              
}
SRV1_5a {
@ Min M2 enclosure of V1 (four directions) is 0
 (V1 NOT M2) AND INST                              
}

//===========================
// SRAM M2 - Metal 2 SRAM DRC
//===========================

GROUP GSRM2 SRM2_?

SRM2_2a1 {
@ Min Space between two M2s with the run length >=0.25um is 0.10
  X = EXT [M2] < 0.10 OPPOSITE
  Y = LENGTH X >= 0.25
  Y INSIDE EDGE INST 
}
SRM2_2a2 {
@ Min Space between two M2s with the run length >=0.02um and <0.25um is 0.095
  X = EXT [M2] < 0.095 OPPOSITE
  Y = LENGTH X >= 0.02 < 0.25
  Y INSIDE EDGE INST 
}
SRM2_2a3 {
@ Min Space between two M2s with the run length <0.02um is 0.09
  X = EXT [M2] < 0.09 OPPOSITE
  Y = LENGTH X < 0.02
  Y INSIDE EDGE INST
}
SRM2_4 {
@ Min M2 area is 0.03
  X = AREA (M2 OR M2DUM) < 0.03
  X NOT OUTSIDE INST
}




#IFDEF Guidelines_rules_CHECK YES

//===========================
//   AAR - AA Resistor DRC
//===========================

GROUP GRESAA RESAA_?

AAR_SA = AAR AND SAB
AAR_NS = NOT INTERACT AAR SAB

//RESAA_1 {
//@ Min Width of AA resistor is 0.4, and is suggested AA resistor square number(length/width ratio) >=1 for stable Rs
//@NOTICE: It is a guidelines rule.
//  X = SAB INTERACT RESAA
//  Y = AA AND (SAB AND RESAA)
//  L = INSIDE EDGE AA X
//  W = INSIDE EDGE X AA
//  DFM PROPERTY Y L W OVERLAP ABUT ALSO MULTI [WIDTH = LENGTH(W)] >= 0.4 [SQUARES = LENGTH(L)/LENGTH(W)] < 1
//  INT L < 0.4 OPPOSITE REGION
//}
RESAA_2 {
@ For AA resistor, make sure the AA be covered by SAB and implanted by either SN or SP.
@NOTICE: It is a guidelines rule.
  X = AAR INTERACT SAB
  X NOT (SN OR SP)
}
RESAA_3 {
@ Dummy layer RESAA is drawn to block LDD implant in the resistor area according to LOTA table.
@NOTICE: It is a guidelines rule.
  X = RESAA INTERACT SAB
  AND NLL X
  AND NLH X
  AND PLL X
  AND PLH X
  AND NLHT X
  AND PLHT X
}
RESAA_4 {
@Dog-bone design at the end of AA resistor for contact pick-up is not suggested
@NOTICE: It is a guidelines rule.
  X = AAR INTERACT SAB
  CONVEX EDGE X ==1
}
RESAA_5a {
@ Min Space between AA resistors area and other implant region is 0.2
@NOTICE: It is a guidelines rule.
  X = SN NOT INTERACT RESAA
  EXT X AAR_SA < 0.2 ABUT<90 REGION
}
RESAA_5b {
@ Min Space between AA resistors area and other implant region is 0.2
@NOTICE: It is a guidelines rule.
  X = SP NOT INTERACT RESAA
  EXT X AAR_SA < 0.2 ABUT<90 REGION
}
RESAA_5c {
@ Min Space between AA resistors area and other implant region is 0.2
@NOTICE: It is a guidelines rule.
  X = NW NOT INTERACT RESAA
  EXT X AAR_SA < 0.2 ABUT<90 REGION
}
RESAA_5d {
@ Min Space between AA resistors area and other implant region is 0.2
@NOTICE: It is a guidelines rule.
  X = VTNH NOT INTERACT RESAA
  EXT X AAR_SA < 0.2 ABUT<90 REGION
}
RESAA_5e {
@ Min Space between AA resistors area and other implant region is 0.2
@NOTICE: It is a guidelines rule.
  X = VTPH NOT INTERACT RESAA
  EXT X AAR_SA < 0.2 ABUT<90 REGION
}
RESAA_5f {
@ Min Space between AA resistors area and other implant region is 0.2
@NOTICE: It is a guidelines rule.
  X = LVN NOT INTERACT RESAA
  EXT X AAR_SA < 0.2 ABUT<90 REGION
}
RESAA_5g {
@ Min Space between AA resistors area and other implant region is 0.2
@NOTICE: It is a guidelines rule.
  X = LVP NOT INTERACT RESAA
  EXT X AAR_SA < 0.2 ABUT<90 REGION
}
RESAA_5h {
@ Min Space between AA resistors area and other implant region is 0.2
@NOTICE: It is a guidelines rule.
  X = NPR1 NOT INTERACT RESAA
  EXT X AAR_SA < 0.2 ABUT<90 REGION
}
RESAA_5i {
@ Min Space between AA resistors area and other implant region is 0.2
@NOTICE: It is a guidelines rule.
  X = ESD1 NOT INTERACT RESAA
  EXT X AAR_SA < 0.2 ABUT<90 REGION
}
RESAA_5j {
@ Min Space between AA resistors area and other implant region is 0.2
@NOTICE: It is a guidelines rule.
  X = HRP NOT INTERACT RESAA
  EXT X AAR_SA < 0.2 ABUT<90 REGION
}

RESAA_6 {
@ Extension of RESAA outside of AA min.distance is 0.2um
@NOTICE: It is a guidelines rule.
  ENC AAR_SA RESAA < 0.2 ABUT<90 SINGULAR REGION
}
RESAA_7 {
@ AA SAB resistors with SP must be inside NW
  ((AAR INTERACT SAB) AND SP) NOT NW
}
RESAA_8 {
@For Non-SAB AA resistor, two sides of RESAA must be along the CT edge
@NOTICE: It is a guidelines rule.
  X = CT AND AAR_NS 
  Y = (RESAA NOT INTERACT SAB) INSIDE EDGE AA
  Y NOT TOUCH EDGE X 
}
RESAA_9 {
@ Fixed Space between SAB and CT is 0.2
@NOTICE: It is a guidelines rule.
  X = AAR INTERACT SAB
  Y = CT AND X
  (SIZE Y BY 0.2) NOT TOUCH AAR_SA
}
RESAA_10 {
@ Min SP/SN enclosure of AA resistor is 0.16um.
@NOTICE: It is a guidelines rule.
  /*X = SP OR SN
  ENC AAR_SA X < 0.16 ABUT<90 SINGULAR REGION*/

  X = SP OR SN
  ENC (AA AND RESAA) X < 0.16 ABUT<90 SINGULAR REGION
}



//====================
//  RESNWAA Rules
//====================

GROUP GRNWA RESNWAA_?

RESNWAA_1 {
@ Minimum NW-Resistor width is 1.6um.
@NOTICE: It is a guidelines rule.
 INT ((NWR NOT ENCLOSE SN) NOT IN EDGE SN) < 1.6 ABUT<90 REGION
}
RESNWAA_2 {
@ Minimum AA enclosure of NW-Resistor is 0.3um.
@NOTICE: It is a guidelines rule.
 ENC (NWR NOT SN) AA < 0.3 ABUT<90 SINGULAR REGION
}
RESNWAA_3 {
@ Minimum SAB enclosure of AA is 0.2um.
@NOTICE: It is a guidelines rule.
 X = AA ENCLOSE NWR
 ENC X SAB < 0.2 ABUT<90 SINGULAR REGION
}
RESNWAA_4 {
@ Minimum NW enclosure of CT is 0.2um.
@NOTICE: It is a guidelines rule.
 ENC (CT AND (HOLES SAB)) (NWR NOT SAB) < 0.2 ABUT<90 SINGULAR REGION
}
RESNWAA_5 {
@ Minimum enclosure of SAB beyond related NW is 0.2um.
@NOTICE: It is a guidelines rule.
 X1 = HOLES SAB
 X2 = SAB TOUCH X1
 ENC NWR X1 < 0.2 ABUT<90 SINGULAR REGION
 ENC NWR X2 < 0.2 ABUT<90 SINGULAR REGION
 ((NWR INTERACT X1) NOT X1) NOT SAB
}

//RESNWAA_6 has been covered by RESNWST_7

RESNWAA_7 {
@ Fixed Space between RESNW and silicided CT area is 0.2um.
@NOTICE: It is a guidelines rule.
  X = HOLES (SAB INTERACT RESNW)
  (SIZE X BY 0.2) NOT TOUCH RESNW
}
RESNWAA_8 {
@ Minimum Space between NW of NW resistors and un-related implant region is 0.6um.
@NOTICE: It is a guidelines rule.
 X = NWR INTERACT (HOLES SAB)
 EXT X (NW NOT INTERACT NWR) < 0.6 ABUT<90 SINGULAR REGION
 EXT X (VTNH NOT INTERACT NWR) < 0.6 ABUT<90 SINGULAR REGION
 EXT X (VTPH NOT INTERACT NWR) < 0.6 ABUT<90 SINGULAR REGION
 EXT X (LVN NOT INTERACT NWR) < 0.6 ABUT<90 SINGULAR REGION
 EXT X (LVP NOT INTERACT NWR) < 0.6 ABUT<90 SINGULAR REGION
 EXT X (SN NOT INTERACT NWR) < 0.6 ABUT<90 SINGULAR REGION
 EXT X (SP NOT INTERACT NWR) < 0.6 ABUT<90 SINGULAR REGION
 EXT X (NPR1 NOT INTERACT NWR) < 0.6 ABUT<90 SINGULAR REGION
 EXT X (ESD1 NOT INTERACT NWR) < 0.6 ABUT<90 SINGULAR REGION
 EXT X (HRP NOT INTERACT NWR) < 0.6 ABUT<90 SINGULAR REGION
}
RESNWAA_9 {
@ Minimum extension of RESNW outside of AA is 0.2um.
@NOTICE: It is a guidelines rule.
  ENC AA (RESNW INTERACT SAB) < 0.2 ABUT<90 SINGULAR REGION
}
RESNWAA_10 {
@ SAB must cover NW resistor except CT area
@NOTICE: It is a guidelines rule.
  X = RESNW ENCLOSE (RESNW AND AA)
  Y = (SAB OR (HOLES SAB)) INTERACT X
  Y NOT ENCLOSE (RESNW AND NW)
}
RESNWAA_11 {
@ Fixed Space between RESNW and CT is 0.4
@NOTICE: It is a guidelines rule.
  X = RESNW ENCLOSE (RESNW AND AA)
  Y = CT AND (AA INTERACT X)
  (SIZE Y BY 0.4) NOT TOUCH X
}
  

//=======================
//  RESNWSTI Rules
//=======================

GROUP GRNWS RESNWST_?

NWRSTI = NWR NOT INTERACT SAB

RESNWST_1 {
@ Minimum NWSTI resitor width is 1.6um.
@NOTICE: It is a guidelines rule.
 INT NWRSTI < 1.6 ABUT<90 SINGULAR REGION
}
RESNWST_2 {
@ Minimum space between NWSTI resistor and adjacent AA is 0.5um.
@NOTICE: It is a guidelines rule.
 EXT NWRSTI AA < 0.5 ABUT<90 SINGULAR REGION
}
RESNWST_3 {
@ Minimum CT enclosed by silicided AA is 0.2um.
@NOTICE: It is a guidelines rule.
 X = CT AND NWRSTI
 Y = AA INTERACT X
 ENC X Y < 0.2 ABUT<90 SINGULAR REGION
}
RESNWST_4 {
@ Minimum SN implant area enclosure of silicided AA is 0.15um.
@NOTICE: It is a guidelines rule.
 X = AA AND NWRSTI
 Y = SN INTERACT NWRSTI
 ENC X Y < 0.15 ABUT<90 SINGULAR REGION
}
RESNWST_5 {
@ Minimum enclosure of NW to silicided AA area is 0.2um.
@NOTICE: It is a guidelines rule.
 X = AA AND NWRSTI
 Y = NW INTERACT NWRSTI
 ENC X Y < 0.2 ABUT<90 SINGULAR REGION
}
RESNWST_6 {
@ Minimum space of RESNW to silicided AA area is 0.
@NOTICE: It is a guidelines rule.
 X = RESNW INTERACT NWRSTI
 AND X AA
}
RESNWST_7 {
@ RESNW must not overlap with dummy pattern and other implant layers(except NW) in the resistor area
@ RESNWAA_6 has been covered by these codes
@NOTICE: It is a guidelines rule.
 (RESNW INTERACT SN) AND AADUM
 (RESNW INTERACT SN) AND GTDUM
 RESNW AND VTNH
 RESNW AND VTPH
 RESNW AND LVN
 RESNW AND LVP
 RESNW AND SP
 RESNW AND NPR1
 RESNW AND ESD1
 RESNW AND HRP
}
RESNWST_8 {
@ Min Extension of RESNW outside of NW is 0.2
@NOTICE: It is a guidelines rule.
  ENC NW RESNW < 0.2 ABUT < 90 SINGULAR REGION
}
RESNWST_9 {
@ No silicide is allowed on NWSTI resistor except for CT area.
@NOTICE: It is a guidelines rule.
 X = SIZE (NWR AND AA) BY -0.01
 (RESNW NOT INTERACT X) AND SAB
}



//==========================
//  GR - Poly Resistor DRC
//==========================

GROUP GRESP1 RESP1_?

GTR_SA = GTR AND SAB
GTR_NS = GTR NOT INTERACT SAB

RESP1_1 {
@ Min Width of poly resistor is 0.4, and is suggested poly resistor square number(length/width ratio) >=1 for stable Rs.
@NOTICE: It is a guidelines rule.
  X = SAB INTERACT RESP1
  Y = GT AND (SAB AND RESP1)
  L = INSIDE EDGE GT X
  W = INSIDE EDGE X GT
//  DFM PROPERTY Y L W OVERLAP ABUT ALSO MULTI [WIDTH = LENGTH(W)] >= 0.4 [SQUARES = LENGTH(L)/LENGTH(W)] < 1
  INT L < 0.4 OPPOSITE REGION
}
RESP1_2 {
@ For poly resistor, make sure the poly be covered by SAB and implanted by either SN or SP
@NOTICE: It is a guidelines rule.
  X = GTR INTERACT SAB
  X NOT (SN OR SP)
}
RESP1_3 {
@ Dummy layer RESP1 is drawn to block LDD implant in the resistor area according to LOTA table.
@NOTICE: It is a guidelines rule.
  X = RESP1 INTERACT GTR_SA
  AND NLL X
  AND NLH X
  AND PLL X
  AND PLH X
  AND PLHT X
  AND NLHT X
}
RESP1_4 {
@Dog-bone design at the end of poly resistor for contact pick-up is not suggested
@NOTICE: It is a guidelines rule.
  X = GTR INTERACT SAB
  CONVEX EDGE X ==1
}
RESP1_5a {
@ Min Space between poly resistors and un-related implant region (follow GT.10 rule) is 0.16um
@NOTICE: It is a guidelines rule.
  X = SP NOT INTERACT RESP1
  EXT X GTR_SA < 0.16 ABUT<90 SINGULAR REGION
}
RESP1_5b {
@ Min Space between poly resistors and un-related implant region (follow GT.10 rule) is 0.16um
@NOTICE: It is a guidelines rule.
  X = SN NOT INTERACT RESP1
  EXT X GTR_SA < 0.16 ABUT<90 SINGULAR REGION
}
RESP1_5c {
@ Min Space between poly resistors and un-related implant region (follow GT.10 rule) is 0.16um
@NOTICE: It is a guidelines rule.
  X = ESD1 NOT INTERACT RESP1
  EXT X GTR_SA < 0.16 ABUT<90 SINGULAR REGION
}
RESP1_5d {
@ Min Space between poly resistors and un-related implant region (follow GT.10 rule) is 0.16um
@NOTICE: It is a guidelines rule.
  X = HRP NOT INTERACT RESP1
  EXT X GTR_SA < 0.16 ABUT<90 SINGULAR REGION
}
RESP1_5e {
@ Min Space between poly resistors and un-related implant region (follow GT.10 rule) is 0.16um
@NOTICE: It is a guidelines rule.
  X = NPR1 NOT INTERACT RESP1
  EXT X GTR_SA < 0.16 ABUT<90 SINGULAR REGION
}
RESP1_6 {
@ Extension of RESP1 outside of Poly min.distance is 0.2
@NOTICE: It is a guidelines rule.
  ENC GTR_SA RESP1 < 0.2 ABUT >0 <90 SINGULAR REGION
}
RESP1_7 {
@For Non-SAB Poly resistor, two sides of RESP1 must be along the CT edge
@NOTICE: It is a guidelines rule.
  X = CT AND GTR_NS
  Y = (RESP1 NOT INTERACT SAB) INSIDE EDGE GT
  Y NOT TOUCH EDGE X
}
RESP1_8 {
@ Min Extension of SAB outside of poly resistor area(follow SAB.6 rule) is 0.2
@NOTICE: It is a guidelines rule.
  ENC GTR SAB < 0.2 ABUT < 90 SINGULAR REGION
}
RESP1_9 {
@ Fixed Space between SAB and CT is 0.2
@NOTICE: It is a guidelines rule.
  X = GTR INTERACT SAB
  Y = CT AND X
  (SIZE Y BY 0.2) NOT TOUCH GTR_SA
}
RESP1_10 {
@ Min Enclosure of SP/SN outside of a Poly resistor area (following GT.9 rule) is 0.16
@NOTICE: It is a guidelines rule.
  X = RESP1 AND GT
  ENC X SN < 0.16 ABUT < 90 SINGULAR REGION
  ENC X SP < 0.16 ABUT < 90 SINGULAR REGION
}



//=======================
//    POly E-Fuse DRC 
//=======================

GROUP GEFU EFU_?

EFU_1_2 {
@ Width of E-Fuse function area fixed size is 0.06
@ Length of E-Fuse function area fixed size is 0.24
@NOTICE: It is a guidelines rule.
 X = COIN EDGE EFU_BO GTFUSE
 INT X < 0.24 ABUT<90 REGION
 NOT RECTANGLE EFU_BO == 0.06 BY == 0.24
}
EFU_3 {
@ CT enclosure by poly in E-fuse area is fixed size 0.05um, except in the 45 degree link.
@NOTICE: It is a guidelines rule.
 X1 = GTFUSE TOUCH EDGE EFU_BO
 X2 = EXPAND EDGE X1 OUTSIDE BY 0.4 EXTEND BY 0.4
 X3 = SIZE RCT BY 0.1 OVERUNDER
 X4 = (EFU NOT X2) NOT X3
 X_WIDE = SIZE X4 BY 0.025 UNDEROVER
 X_NARROW = INT X4 < 0.05 ABUT<90 SINGULAR REGION
 (X_WIDE OR X_NARROW) NOT GTFUSE
}
EFU_4 {
@ Space between two rectangular contacts (RCT) is exactly 0.16um.
@NOTICE: It is a guidelines rule.
 X = SIZE RCT BY 0.1 OVERUNDER
 Y = X NOT RCT
 Y WITH WIDTH > 0.16
 EXT RCT < 0.16 ABUT<90 SINGULAR REGION
}
EFU_5_6 {
@ Length of RCT is 0.30
@ Width of RCT is 0.09
@NOTICE: It is a guidelines rule.
  NOT RECTANGLE RCT == 0.30 BY == 0.09
}
EFU_7 {
@ Use 2x2 RCT array for E-Fuse poly contact.
@ If RCT size or space is wrong, then it would also cause this kind of violation.
@NOTICE: It is a guidelines rule.
 X = SIZE RCT BY 0.1 OVERUNDER
 NOT RECTANGLE X == 0.34 BY == 0.76
}
EFU_8 {
@ Angle of poly taper head (degree) is 45 degree
@NOTICE: It is a guidelines rule.
 ANGLE EFU > 0 < 45
 ANGLE EFU > 45 < 90
}
EFU_10 {
@ GTFUSE is needed to identify E-Fuse function area.
@NOTICE: It is a guidelines rule.
 EFU NOT INTERACT GTFUSE
}
EFU_11 {
@ EFUSE is needed to identify E-Fuse area.
@NOTICE: It is a guidelines rule.
 GTFUSE NOT EFUSE
}


//==================================
//  HRP - High Resistance Poly DRC
//==================================

GROUP GHRP HRP_?

HRP_1 {
@ Min Width of HRP is 0.21
@NOTICE: It is a guidelines rule.
  INT HRP < 0.21 ABUT < 90 SINGULAR REGION
}
HRP_2 {
@Min Space between two HRP is 0.21
@NOTICE: It is a guidelines rule.
  EXT HRP < 0.21 ABUT < 90 SINGULAR REGION
}
HRP_4 {
@ Min HRP enclosure of high resistance poly is 0.2
@NOTICE: It is a guidelines rule.
  ENC GT_HRP HRP < 0.20 ABUT SINGULAR REGION
}
HRP_5_6 {
@ Minimum clearance from HRP region to Polygate of NMOS/PMOS is 0.16
@NOTICE: It is a guidelines rule.
  GT_MOS = GT INTERACT GATE
  EXT HRP GT_MOS < 0.16 ABUT SINGULAR REGION
}
HRP_7 {
@ Minimum and maximum P+ implant for pickup overlap with SAB is 0.30
@NOTICE: It is a guidelines rule.
  SP_HRP = SP INTERACT HRP
  SAB_HRP = SAB INTERACT HRP
  X = SP_HRP AND SAB_HRP
  INT X < 0.30 ABUT<90 SINGULAR REGION
  SIZE X BY 0.15 UNDEROVER
}
HRP_8 {
@ Minimum extension from SAB region beyond a poly resistor region is 0.22
@NOTICE: It is a guidelines rule.
  ENC GT_HRP SAB < 0.22 ABUT<90 SINGULAR REGION
}
HRP_9 {
@ Minimum width of Poly region for high resistance poly resistor is 2.00
@NOTICE: It is a guidelines rule.
  X = HR_GT NOT COIN EDGE SP
  INT X < 2.0 OPPOSITE REGION
}
HRP_10 {
@ Dummy layer "HRPDMY" is needed for DRC for high resistance Poly region
@NOTICE: It is a guidelines rule.
  SAB_HRP = SAB INTERACT HRP
  SAB_HRP NOT INTERACT HRPDMY
}
HRP_11 {
@ (SN, SP) layers are not allowed in the HRPDMY region (when checking the rule, size down the HRPDMY by 0.3um along the current direction)
@NOTICE: It is a guidelines rule.
 HRPR    = GT INTERACT HRP
 HRP_END = SIZE (HRPR NOT HRPDMY) BY 0.3
 HRP_MID = HRPR NOT HRP_END
 (SN OR SP) AND HRP_MID
}
HRP_12 {
@ HRPDMY edge should align with SAB edge.
@NOTICE: It is a guidelines rule.
 SAB_AND_HRP = (SAB INTERACT HRP) AND GT
 DMY_AND_HRP = HRPDMY AND GT
 SAB_AND_HRP XOR DMY_AND_HRP
}
HRP_14 {
@ Fixed Space between SAB and CT in HRP region is 0.2
@NOTICE: It is a guidelines rule.
  X = HRP INTERACT SAB
  Y = CT AND X
  (SIZE Y BY 0.2) NOT TOUCH (SAB INTERACT HRP)
}



//============================
//  LDAA - LDMOS layout DRC
//============================

GROUP GLDAA LD_?

LDAA = AA AND LDBK
LDPAA = LDAA AND SP
LDNAA = LDAA AND SN
//LDPAAOD = LDPAA AND OVERPL
//LDNAAOD = LDNAA AND OVERPL
LDPGATE = LDPAA AND GT
LDNGATE = LDNAA AND GT
//LDPGATEOD = LDPGATE AND OVERPL
//LDNGATEOD = LDNGATE AND OVERPL
LDPD = (LDPAA NOT INTERACT GT) TOUCH STIDMY
LDND = (LDNAA NOT INTERACT GT) TOUCH STIDMY
LDPS = (LDPAA INTERACT GT) NOT LDPGATE
LDNS = (LDNAA INTERACT GT) NOT LDNGATE

LD_1a {
@ Min. LDMOS gate length is 0.48
@NOTICE: It is a guidelines rule.
  INT LDNGATE < 0.48 ABUT<90 SINGULAR REGION
  INT LDPGATE < 0.48 ABUT<90 SINGULAR REGION
}
LD_2 {
@ Dummy layer STIDMY is required for LDMOS transistor field plate area.
@ Fixed STI width for LDMOS transistor drain side field plate is 0.11
@NOTICE: It is a guidelines rule.
  INT STIDMY < 0.11 ABUT<90 SINGULAR REGION
  STIDMY ENCLOSE (SIZE STIDMY BY -0.11/2)
}
LD_3 {
@ Fixed Overlap of NW and LDNMOS gate is 0.20
@NOTICE: It is a guidelines rule.
  INT NW LDNGATE < 0.20 ABUT<90 SINGULAR REGION
  (LDNGATE AND NW) ENCLOSE (SIZE (LDNGATE AND NW) BY -0.10)
}
LD_4 {
@ Fixed Overlap of PW and LDPMOS gate is 0.20
@NOTICE: It is a guidelines rule.
  ENC NW LDPGATE < 0.20 ABUT<90 SINGULAR REGION
  (LDPGATE NOT NW) ENCLOSE (SIZE (LDPGATE NOT NW) BY -0.10)
}
LD_5a {
@ Min. channel width for LDMOS transistors is 2
@NOTICE: It is a guidelines rule.
  INT (LDAA IN EDGE GT) < 2 ABUT<90 REGION
}
LD_6 {
@ Min Space between one LDMOS gate poly to another LDMOS gate poly on source side is 0.27
@NOTICE: It is a guidelines rule.
  X = GT INSIDE EDGE LDAA
  EXT X < 0.27 REGION
}
LD_7 {
@ Min NW or PW extension outside of LDMOS AA along gate poly length direction is 0.25
@NOTICE: It is a guidelines rule.
  X1 = LDAA TOUCH EDGE STIDMY
  X2 = INT X1 LDAA < 0.005 ABUT REGION INTERSECTING ONLY
  X3 = (LDAA TOUCH EDGE X2) NOT COIN EDGE X1
  ENC X3 NW < 0.25 ABUT < 90 REGION
  EXT X3 NW < 0.25 ABUT < 90 REGION
}
LD_8a {
@ Min Space between LDMOS source side AA and pickup AA along source/drain direction is 0.6
@NOTICE: It is a guidelines rule.
  X1 = LDAA TOUCH EDGE GT
  X2 = INT X1 LDAA < 0.005 ABUT REGION INTERSECTING ONLY
  X3 = (LDAA TOUCH EDGE X2) OR EDGE X1
  X4 = (LDAA WITH EDGE X3) NOT COIN EDGE X3
  EXT X4 (PTAP OR NTAP) < 0.6 ABUT < 90 REGION 
}
LD_8b {
@ Min Space between LDMOS source side AA and pickup AA along gate poly direction is 0.9
@NOTICE: It is a guidelines rule.
  X1 = LDAA TOUCH EDGE GT
  X2 = INT X1 LDAA < 0.005 ABUT REGION INTERSECTING ONLY
  X3 = (LDAA TOUCH EDGE X2) NOT TOUCH EDGE X1
  EXT X3 (PTAP OR NTAP) < 0.9 ABUT < 90 REGION
}
LD_9 {
@ GT to STI drain side field plate overlap is 0
@NOTICE: It is a guidelines rule.
  GT AND STIDMY
  (STIDMY AND LDBK) NOT TOUCH GT
}
LD_10 {
@ LDMOS block layer (LDBK) is used to identify LDMOS function area.
@ Min LDBK extension outside of MOSAA is 0.4.
@NOTICE: It is a guidelines rule.
  X1 = LDAA TOUCH STIDMY
  ENC X1 LDBK < 0.4 ABUT < 90 SINGULAR REGION
}
LD_11 {
@ STIDMY enclosure LDMOS drain side field plate is 0
@NOTICE: It is a guidelines rule.
  X = STIDMY AND LDAA
  Y = STIDMY NOT TOUCH (LDAA NOT GT)
  X OR Y
}
LD_12 {
@ Min CT to GT space on LDMOS at source side is 0.11
@NOTICE: It is a guidelines rule.
  X =  CT AND (LDAA INTERACT GT)
  EXT X GT < 0.11 ABUT < 90 SINGULAR REGION
}  



//====================
//  Seal Ring Rules
//====================

GROUP GSRCK SRCK_?


//Contact, via and TV slots are not permitted for main chip design except guard ring/seal ring applications.
//(CT/via patterns, with the width/length ratio larger than 3, should be taken as Contact/via slots.)

CTS = CTi AND MARKS
CTS_SL = CTi AND (ENCLOSE RECTANGLE CTS 0.09 0.27)
CTS_SQ = CTS NOT CTS_SL

AAS = AAi AND (AAi ENCLOSE CTS)

M1S = M1i AND MARKS
M1S_INNER = M1S TOUCH (HOLES M1S INNER) == 1
M1S_OUTER = HOLES M1S
M1S_RING = M1i AND (M1S INTERACT M1S_OUTER)
V1S = V1 AND MARKS
V1S_SL = V1 AND (ENCLOSE RECTANGLE V1S 0.09 0.27)
V1S_SQ = V1S NOT V1S_SL

M2S = M2i AND MARKS
M2S_INNER = M2S TOUCH (HOLES M2S INNER) == 1
M2S_OUTER = HOLES M2S
M2S_RING = M2i AND (M2S INTERACT M2S_OUTER)
V2S = V2 AND MARKS
V2S_SL = V2 AND (ENCLOSE RECTANGLE V2S 0.09 0.27)
V2S_SQ = V2S NOT V2S_SL

M3S = M3i AND MARKS
M3S_INNER = M3S TOUCH (HOLES M3S INNER) == 1
M3S_OUTER = HOLES M3S
M3S_RING = M3i AND (M3S INTERACT M3S_OUTER)
V3S = V3 AND MARKS
V3S_SL = V3 AND (ENCLOSE RECTANGLE V3S 0.09 0.27)
V3S_SQ = V3S NOT V3S_SL

M4S = M4i AND MARKS
M4S_INNER = M4S TOUCH (HOLES M4S INNER) == 1
M4S_OUTER = HOLES M4S
M4S_RING = M4i AND (M4S INTERACT M4S_OUTER)
V4S = V4 AND MARKS
V4S_SL = V4 AND (ENCLOSE RECTANGLE V4S 0.09 0.27)
V4S_SQ = V4S NOT V4S_SL

M5S = M5i AND MARKS
M5S_INNER = M5S TOUCH (HOLES M5S INNER) == 1
M5S_OUTER = HOLES M5S
M5S_RING = M5i AND (M5S INTERACT M5S_OUTER)
V5S = V5 AND MARKS
V5S_SL = V5 AND (ENCLOSE RECTANGLE V5S 0.09 0.27)
V5S_SQ = V5S NOT V5S_SL

M6S = M6i AND MARKS
M6S_INNER = M6S TOUCH (HOLES M6S INNER) == 1
M6S_OUTER = HOLES M6S
M6S_RING = M6i AND (M6S INTERACT M6S_OUTER)
TV1S = TV1i AND MARKS
#IFDEF Type_a
TV1S_SL = TV1i AND (ENCLOSE RECTANGLE TV1S 0.25 0.75)
#ENDIF
#IFDEF Type_T
TV1S_SL = TV1i AND (ENCLOSE RECTANGLE TV1S 0.25 0.75)
#ENDIF
#IFDEF Type_b
TV1S_SL = TV1i AND (ENCLOSE RECTANGLE TV1S 0.19 0.57)
#ENDIF
TV1S_SQ = TV1S NOT TV1S_SL

TM1S = TM1i AND MARKS
TM1S_INNER = TM1S TOUCH (HOLES TM1S INNER) == 1
TM1S_OUTER = HOLES TM1S
TM1S_RING = TM1i AND (TM1S INTERACT TM1S_OUTER)
TV2S = TV2i AND MARKS
#IFDEF Type_a
TV2S_SL = TV2i AND (ENCLOSE RECTANGLE TV2S 0.25 0.75)
#ENDIF
#IFDEF Type_T
TV2S_SL = TV2i AND (ENCLOSE RECTANGLE TV2S 0.25 0.75)
#ENDIF
#IFDEF Type_b
TV2S_SL = TV2i AND (ENCLOSE RECTANGLE TV2S 0.19 0.57)
#ENDIF
TV2S_SQ = TV2S NOT TV2S_SL

TM2S = TM2i AND MARKS
TM2S_INNER = TM2S TOUCH (HOLES TM2S INNER) == 1
TM2S_OUTER = HOLES TM2S
TM2S_RING = TM2i AND (TM2S INTERACT TM2S_OUTER)

RDLVIAS = RDLVIAi AND MARKS
RDLS = RDLi AND MARKS
RDLS_INNER = RDLS TOUCH (HOLES RDLS INNER) == 1
RDLS_OUTER = HOLES RDLS
RDLS_RING = RDLi AND (RDLS INTERACT RDLS_OUTER)

MS_RING_INNER = M1S_INNER OR ((M2S_INNER OR (M3S_INNER OR (M4S_INNER OR (M5S_INNER OR (M6S_INNER OR (TM1S_INNER OR TM2S_INNER)))))) OR RDLS_INNER)
M_ALL = M1i OR (M2i OR (M3i OR (M4i OR (M5i OR (M6i OR (TM1i OR TM2i))))))
MDUM_ALL = M1DUM OR (M2DUM OR (M3DUM OR (M4DUM OR (M5DUM OR (M6DUM OR (TM1DUM OR TM2DUM))))))
MA_ALL = M_ALL NOT INSIDE MARKS

ISOLATION_1 = MARKS AND (HOLES M1S_INNER INNER)
ISOLATION_2 = MARKS AND (HOLES M2S_INNER INNER)
ISOLATION_3 = MARKS AND (HOLES M3S_INNER INNER)
ISOLATION_4 = MARKS AND (HOLES M4S_INNER INNER)
ISOLATION_5 = MARKS AND (HOLES M5S_INNER INNER)
ISOLATION_6 = MARKS AND (HOLES M6S_INNER INNER)
ISOLATION_9 = MARKS AND (HOLES TM1S_INNER INNER)
ISOLATION_10 = MARKS AND (HOLES TM2S_INNER INNER)

ISOLATION = ISOLATION_1 AND (ISOLATION_2 AND (ISOLATION_3 AND (ISOLATION_4 AND (ISOLATION_5 AND (ISOLATION_6 AND (ISOLATION_9 AND ISOLATION_10))))))

CONNECT AAS M1S_RING BY CTS
CONNECT M2S_RING M1S_RING BY V1S
CONNECT M3S_RING M2S_RING BY V2S
CONNECT M4S_RING M3S_RING BY V3S
CONNECT M5S_RING M4S_RING BY V4S
CONNECT M6S_RING M5S_RING BY V5S
CONNECT TM1S_RING M6S_RING BY TV1S
CONNECT TM2S_RING TM1S_RING BY TV2S
CONNECT MARKS TM2S_RING
CONNECT TM2S_RING RDLS_RING BY RDLVIAS


SRCK_1 {
@ Fixed CT slot width is 0.09
@NOTICE: It is a guidelines rule.
 X = INT CTS < 0.089 ABUT<90 SINGULAR REGION
 Y = CTS WITH WIDTH > 0.091
 X OR Y
}

SRCK_2 {
@ Fixed Vn slot width (n=1~7) is 0.09
@NOTICE: It is a guidelines rule.
 V1_NARROW = INT V1S < 0.089 ABUT<90 SINGULAR REGION
 V2_NARROW = INT V2S < 0.089 ABUT<90 SINGULAR REGION
 V3_NARROW = INT V3S < 0.089 ABUT<90 SINGULAR REGION
 V4_NARROW = INT V4S < 0.089 ABUT<90 SINGULAR REGION
 V5_NARROW = INT V5S < 0.089 ABUT<90 SINGULAR REGION
 V1_WIDE = V1S WITH WIDTH > 0.091
 V2_WIDE = V2S WITH WIDTH > 0.091
 V3_WIDE = V3S WITH WIDTH > 0.091
 V4_WIDE = V4S WITH WIDTH > 0.091
 V5_WIDE = V5S WITH WIDTH > 0.091
 VN_NARROW = ((V1_NARROW OR V2_NARROW) OR (V3_NARROW OR V4_NARROW)) OR V5_NARROW
 VN_WIDE = ((V1_WIDE OR V2_WIDE) OR (V3_WIDE OR V4_WIDE)) OR V5_WIDE
 VN_NARROW OR VN_WIDE
}

#IFDEF Type_a
SRCK_3 {
@ TV slot (option a) width is >= 0.25 and <= 0.36
@NOTICE: It is a guidelines rule.
  TV1S NOT WITH WIDTH >= 0.25 <= 0.36
  TV2S NOT WITH WIDTH >= 0.25 <= 0.36
}
#ENDIF
#IFDEF Type_T
SRCK_3 {
@ TV slot (option a) width is >= 0.25 and <= 0.36
@NOTICE: It is a guidelines rule.
  TV1S NOT WITH WIDTH >= 0.25 <= 0.36
  TV2S NOT WITH WIDTH >= 0.25 <= 0.36
}
#ENDIF

#IFDEF Type_b
SRCK_4 {
@ TV slot (option b) width is >= 0.19 and <= 0.20
@NOTICE: It is a guidelines rule.
  TV1S NOT WITH WIDTH >= 0.19 <= 0.2
  TV2S NOT WITH WIDTH >= 0.19 <= 0.2
}
#ENDIF

SRCK_5 {
@ Minimum space between contact slots is 1.2
@NOTICE: It is a guidelines rule.
  EXT CTS_SL < 1.2 ABUT < 90 SINGULAR REGION
}

SRCK_6 {
@ Minimum space between via slots is 1.2
@NOTICE: It is a guidelines rule.
  EXT V1S_SL < 1.2 ABUT < 90 SINGULAR REGION
  EXT V2S_SL < 1.2 ABUT < 90 SINGULAR REGION
  EXT V3S_SL < 1.2 ABUT < 90 SINGULAR REGION
  EXT V4S_SL < 1.2 ABUT < 90 SINGULAR REGION
  EXT V5S_SL < 1.2 ABUT < 90 SINGULAR REGION
}

SRCK_7 {
@ Minimum space between TV slots is 1.2
@NOTICE: It is a guidelines rule.
  EXT TV1S_SL < 1.2 ABUT < 90 SINGULAR REGION
  EXT TV2S_SL < 1.2 ABUT < 90 SINGULAR REGION
}

SRCK_8 {
@ Minimum space between square contact and contact slot is 0.4
@NOTICE: It is a guidelines rule.
  EXT CTS_SL CTS_SQ < 0.4 ABUT < 90 SINGULAR REGION
}

SRCK_9 {
@ Minimum space between square via and via slot is 0.4
@NOTICE: It is a guidelines rule.
  EXT V1S_SL V1S_SQ < 0.4 ABUT < 90 SINGULAR REGION
  EXT V2S_SL V2S_SQ < 0.4 ABUT < 90 SINGULAR REGION
  EXT V3S_SL V3S_SQ < 0.4 ABUT < 90 SINGULAR REGION
  EXT V4S_SL V4S_SQ < 0.4 ABUT < 90 SINGULAR REGION
  EXT V5S_SL V5S_SQ < 0.4 ABUT < 90 SINGULAR REGION
}

SRCK_10 {
@ Minimum space between square TV and TV slot is 0.38
@NOTICE: It is a guidelines rule.
  EXT TV1S_SL TV1S_SQ < 0.38 ABUT < 90 SINGULAR REGION
  EXT TV2S_SL TV2S_SQ < 0.38 ABUT < 90 SINGULAR REGION
}

SRCK_11 {
@ V1 (both square via and slot patterns) enclosure by M1 in MARKS covered areas is 0.09
@NOTICE: It is a guidelines rule.
  ENC V1S M1S < 0.09 ABUT < 90 SINGULAR REGION
}

SRCK_12 {
@ Vn (both square via and slot patterns) enclosure by Mn in MARKS covered areas (n=2~7) is 0.09
@NOTICE: It is a guidelines rule.
  ENC V2S M2S < 0.09 ABUT < 90 SINGULAR REGION
  ENC V3S M3S < 0.09 ABUT < 90 SINGULAR REGION
  ENC V4S M4S < 0.09 ABUT < 90 SINGULAR REGION
  ENC V5S M5S < 0.09 ABUT < 90 SINGULAR REGION
}

SRCK_13 {
@ Vn (both square via and slot patterns)enclosure by Mn+1 in MARKS covered areas (n=2~7) is 0.09
@NOTICE: It is a guidelines rule.
  ENC V1S M2S < 0.09 ABUT < 90 SINGULAR REGION
  ENC V2S M3S < 0.09 ABUT < 90 SINGULAR REGION
  ENC V3S M4S < 0.09 ABUT < 90 SINGULAR REGION
  ENC V4S M5S < 0.09 ABUT < 90 SINGULAR REGION
  ENC V5S M6S < 0.09 ABUT < 90 SINGULAR REGION
}

SRCK_14 {
@ TV1/TV2 (both square via and slot patterns) enclosure by TM1/TM2 in MARKS covered areas is 0.09
@NOTICE: It is a guidelines rule.
  ENC TV1S TM1S < 0.09 ABUT < 90 SINGULAR REGION
  ENC TV2S TM2S < 0.09 ABUT < 90 SINGULAR REGION
}

SRCK_15 {
@ TV1/TV2 (both square via and slot patterns) enclosure by Mn in MARKS covered areas (Mn presents metal layer right beneath TV1/TV2) is 0.09
@NOTICE: It is a guidelines rule.
  ENC TV1S M6S < 0.09 ABUT < 90 SINGULAR REGION
  ENC TV2S TM1S < 0.09 ABUT < 90 SINGULAR REGION
}

/* Skip SRCK_16 rules
SRCK_16 {
@ Seal ring areas (including metal rings, die corner stress relief areas and assembly isolation areas) should be covered 
@ by MARKS layer for DRC and dummy automatic filling blockage (refer to Fig.5)
}
*/

SRCK_17 {
@ Min Isolation distance between active patterns (AA/GT/METAL/RDL) and internal metal ring edge is 10
@NOTICE: It is a guidelines rule.
  EXT (AA NOT INSIDE MARKS) MS_RING_INNER < 10 ABUT < 90 SINGULAR REGION
  EXT (GT NOT INSIDE MARKS) MS_RING_INNER < 10 ABUT < 90 SINGULAR REGION
  EXT MA_ALL MS_RING_INNER < 10 ABUT < 90 SINGULAR REGION
  EXT (RDL NOT INSIDE MARKS) MS_RING_INNER < 10 ABUT < 90 SINGULAR REGION
}

SRCK_18 {
@ No patterns (AA/GT/METAL/RDL) are allowed inside isolation areas
@NOTICE: It is a guidelines rule.
  AND ISOLATION AA
  AND ISOLATION GT
  AND ISOLATION M_ALL
  AND ISOLATION RDL
}

SRCK_19 {
@ No AA/GT/Metal dummy patterns are allowed MARKS covered areas.
@NOTICE: It is a guidelines rule.
  AND MARKS AADUM
  AND MARKS GTDUM
  AND MARKS MDUM_ALL
}

SRCK_20 {
@ Metal ring structures must be comprised of AA, CT and all metal layers and all via layers up to the last copper metal.
@ The structures must be continuous and connected to ground bus.
@NOTICE: It is a guidelines rule.
  X = NET AREA RATIO MARKS TM2S_RING TV2S TM1S_RING TV1S M6S_RING V5S M5S_RING V4S M4S_RING V3S M3S_RING V2S M2S_RING V1S M1S_RING CTS AAS > 0
  [!!(AREA(TM2S_RING))* !!(AREA(TV2S))*!!(AREA(TM1S_RING))*!!(AREA(TV1S))*!!(AREA(M6S_RING))*!!(AREA(V5S))
   *!!(AREA(M5S_RING))*!!(AREA(V4S))*!!(AREA(M4S_RING))*!!(AREA(V3S))*!!(AREA(M3S_RING))*!!(AREA(V2S))*!!(AREA(M2S_RING))*!!(AREA(V1S))*!!(AREA(M1S_RING))*!!(AREA(CTS))
   *!!(AREA(AAS))]
  MARKS NOT X

  Y = NET AREA RATIO RDLS_RING RDLVIAS TM2S_RING > 0 [!!(AREA(TM2S_RING))* !!(AREA(RDLVIAS))*!!(AREA(RDLS_RING))]
  (MARKS ENCLOSE RDLS_RING) NOT ENCLOSE Y

  Z = NET AREA RATIO  RDLVIAS RDLS_RING TM2S_RING > 0 [!!(AREA(TM2S_RING))* !!(AREA(RDLVIAS))*!!(AREA(RDLS_RING))]
  (MARKS ENCLOSE RDLVIAS) NOT ENCLOSE Z
}

SRCK_21 {
@ Min Passivation slot width ("RDL via" is recommended as drawing layer) in MARKS covered areas is 2
@NOTICE: It is a guidelines rule.
  INT RDLVIAS < 2 ABUT < 90 SINGULAR REGION 
}

SRCK_22 {
@ Min Passivation slot  (RDL via) enclosure by Al pattern (RDL) in MARKS covered areas is 1
@NOTICE: It is a guidelines rule.
  ENC RDLVIAS RDL < 1 ABUT < 90 SINGULAR REGION
}

SRCK_23 {
@ Min Passivation slot (RDL via) enclosure by TM2 in MARKS covered areas is 0.5
@NOTICE: It is a guidelines rule.
  ENC RDLVIAS TM2 < 0.5 ABUT < 90 SINGULAR REGION
}








//====================
//  Guard Ring Rules
//====================

GROUP GGR GR_?

//Contact, via and TV slots are not permitted for main chip design except guard ring/seal ring applications.
//(CT/via patterns, with the width/length ratio larger than 3, should be taken as Contact/via slots.)


CTG = CTi AND MARKGi
CTG_SL = CTi AND (ENCLOSE RECTANGLE CTG 0.09 0.27)
CTG_SQ = CTG NOT CTG_SL

AAG = AAi AND (AAi ENCLOSE CTG)

M1G = M1i AND MARKGi
M1G_INNER = M1G TOUCH (HOLES M1G INNER) == 1
M1G_OUTER = HOLES M1G
M1G_RING = M1i AND (M1G INTERACT M1G_OUTER)
V1G = V1 AND MARKGi
V1G_SL = V1 AND (ENCLOSE RECTANGLE V1G 0.09 0.27)
V1G_SQ = V1G NOT V1G_SL

M2G = M2i AND MARKGi
M2G_INNER = M2G TOUCH (HOLES M2G INNER) == 1
M2G_OUTER = HOLES M2G
M2G_RING = M2i AND (M2G INTERACT M2G_OUTER)
V2G = V2 AND MARKGi
V2G_SL = V2 AND (ENCLOSE RECTANGLE V2G 0.09 0.27)
V2G_SQ = V2G NOT V2G_SL

M3G = M3i AND MARKGi
M3G_INNER = M3G TOUCH (HOLES M3G INNER) == 1
M3G_OUTER = HOLES M3G
M3G_RING = M3i AND (M3G INTERACT M3G_OUTER)
V3G = V3 AND MARKGi
V3G_SL = V3 AND (ENCLOSE RECTANGLE V3G 0.09 0.27)
V3G_SQ = V3G NOT V3G_SL

M4G = M4i AND MARKGi
M4G_INNER = M4G TOUCH (HOLES M4G INNER) == 1
M4G_OUTER = HOLES M4G
M4G_RING = M4i AND (M4G INTERACT M4G_OUTER)
V4G = V4 AND MARKGi
V4G_SL = V4 AND (ENCLOSE RECTANGLE V4G 0.09 0.27)
V4G_SQ = V4G NOT V4G_SL

M5G = M5i AND MARKGi
M5G_INNER = M5G TOUCH (HOLES M5G INNER) == 1
M5G_OUTER = HOLES M5G
M5G_RING = M5i AND (M5G INTERACT M5G_OUTER)
V5G = V5 AND MARKGi
V5G_SL = V5 AND (ENCLOSE RECTANGLE V5G 0.09 0.27)
V5G_SQ = V5G NOT V5G_SL

M6G = M6i AND MARKGi
M6G_INNER = M6G TOUCH (HOLES M6G INNER) == 1
M6G_OUTER = HOLES M6G
M6G_RING = M6i AND (M6G INTERACT M6G_OUTER)
TV1G = TV1i AND MARKGi
#IFDEF Type_a
TV1G_SL = TV1i AND (ENCLOSE RECTANGLE TV1G 0.25 0.75)
#ENDIF
#IFDEF Type_T
TV1G_SL = TV1i AND (ENCLOSE RECTANGLE TV1G 0.25 0.75)
#ENDIF
#IFDEF Type_b
TV1G_SL = TV1i AND (ENCLOSE RECTANGLE TV1G 0.19 0.57)
#ENDIF
TV1G_SQ = TV1G NOT TV1G_SL

TM1G = TM1i AND MARKGi
TM1G_INNER = TM1G TOUCH (HOLES TM1G INNER) == 1
TM1G_OUTER = HOLES TM1G
TM1G_RING = TM1i AND (TM1G INTERACT TM1G_OUTER)
TV2G = TV2i AND MARKGi
#IFDEF Type_a
TV2G_SL = TV2i AND (ENCLOSE RECTANGLE TV2G 0.25 0.75)
#ENDIF
#IFDEF Type_T
TV2G_SL = TV2i AND (ENCLOSE RECTANGLE TV2G 0.25 0.75)
#ENDIF
#IFDEF Type_b
TV2G_SL = TV2i AND (ENCLOSE RECTANGLE TV2G 0.19 0.57)
#ENDIF
TV2G_SQ = TV2G NOT TV2G_SL

TM2G = TM2i AND MARKGi
TM2G_INNER = TM2G TOUCH (HOLES TM2G INNER) == 1
TM2G_OUTER = HOLES TM2G
TM2G_RING = TM2i AND (TM2G INTERACT TM2G_OUTER)


RDLVIAG = RDLVIAi AND MARKGi
RDLG = RDLi AND MARKGi
RDLG_INNER = RDLG TOUCH (HOLES RDLG INNER) == 1
RDLG_OUTER = HOLES RDLG
RDLG_RING = RDLi AND (RDLG INTERACT RDLG_OUTER)


MG_RING_INNER = M1G_INNER OR ((M2G_INNER OR (M3G_INNER OR (M4G_INNER OR (M5G_INNER OR (M6G_INNER OR (TM1G_INNER OR TM2G_INNER)))))) OR RDLG_INNER)
MA_ALL_G = M_ALL NOT INSIDE MARKGi



GR_1 {
@ Fixed CT slot width in guard ring is 0.09
@NOTICE: It is a guidelines rule.
 X = INT CTG < 0.089 ABUT<90 SINGULAR REGION
 Y = CTG WITH WIDTH > 0.091
 X OR Y
}

GR_2 {
@ Fixed Vn slot width (n=1~7) in guard ring is 0.09
@NOTICE: It is a guidelines rule.
 V1_NARROW = INT V1G < 0.089 ABUT<90 SINGULAR REGION
 V2_NARROW = INT V2G < 0.089 ABUT<90 SINGULAR REGION
 V3_NARROW = INT V3G < 0.089 ABUT<90 SINGULAR REGION
 V4_NARROW = INT V4G < 0.089 ABUT<90 SINGULAR REGION
 V5_NARROW = INT V5G < 0.089 ABUT<90 SINGULAR REGION
 V1_WIDE = V1G WITH WIDTH > 0.091
 V2_WIDE = V2G WITH WIDTH > 0.091
 V3_WIDE = V3G WITH WIDTH > 0.091
 V4_WIDE = V4G WITH WIDTH > 0.091
 V5_WIDE = V5G WITH WIDTH > 0.091
 VN_NARROW = ((V1_NARROW OR V2_NARROW) OR (V3_NARROW OR V4_NARROW)) OR V5_NARROW
 VN_WIDE = ((V1_WIDE OR V2_WIDE) OR (V3_WIDE OR V4_WIDE)) OR V5_WIDE
 VN_NARROW OR VN_WIDE
}

#IFDEF Type_a
GR_3a {
@ TV slot (option a) width in guard ring is >= 0.25 and <= 0.36
@NOTICE: It is a guidelines rule.
  TV1G NOT WITH WIDTH >= 0.25 <= 0.36
  TV2G NOT WITH WIDTH >= 0.25 <= 0.36
}
#ENDIF
#IFDEF Type_T
GR_3a {
@ TV slot (option a) width in guard ring is >= 0.25 and <= 0.36
@NOTICE: It is a guidelines rule.
  TV1G NOT WITH WIDTH >= 0.25 <= 0.36
  TV2G NOT WITH WIDTH >= 0.25 <= 0.36
}
#ENDIF

#IFDEF Type_b
GR_3b {
@ TV slot (option b) width in guard ring is >= 0.19 and <= 0.20
@NOTICE: It is a guidelines rule.
  TV1G NOT WITH WIDTH >= 0.19 <= 0.2
  TV2G NOT WITH WIDTH >= 0.19 <= 0.2
}
#ENDIF

GR_4 {
@ Minimum space between contact slots in guard ring is 1.2
@NOTICE: It is a guidelines rule.
  EXT CTG_SL < 1.2 ABUT < 90 SINGULAR REGION
}

GR_5 {
@ Minimum space between via slots in guard ring is 1.2
@NOTICE: It is a guidelines rule.
  EXT V1G_SL < 1.2 ABUT < 90 SINGULAR REGION
  EXT V2G_SL < 1.2 ABUT < 90 SINGULAR REGION
  EXT V3G_SL < 1.2 ABUT < 90 SINGULAR REGION
  EXT V4G_SL < 1.2 ABUT < 90 SINGULAR REGION
  EXT V5G_SL < 1.2 ABUT < 90 SINGULAR REGION
}

GR_6 {
@ Minimum space between TV slots in guard ring is 1.2
@NOTICE: It is a guidelines rule.
  EXT TV1G_SL < 1.2 ABUT < 90 SINGULAR REGION
  EXT TV2G_SL < 1.2 ABUT < 90 SINGULAR REGION
}

GR_7 {
@ Minimum space between square contact and contact slot in guard ring is 0.4
@NOTICE: It is a guidelines rule.
  EXT CTG_SL CTG_SQ < 0.4 ABUT < 90 SINGULAR REGION
}

GR_8 {
@ Minimum space between square via and via slot in guard ring is 0.4
@NOTICE: It is a guidelines rule.
  EXT V1G_SL V1G_SQ < 0.4 ABUT < 90 SINGULAR REGION
  EXT V2G_SL V2G_SQ < 0.4 ABUT < 90 SINGULAR REGION
  EXT V3G_SL V3G_SQ < 0.4 ABUT < 90 SINGULAR REGION
  EXT V4G_SL V4G_SQ < 0.4 ABUT < 90 SINGULAR REGION
  EXT V5G_SL V5G_SQ < 0.4 ABUT < 90 SINGULAR REGION
}

GR_9 {
@ Minimum space between square TV and TV slot in guard ring is 0.38
@NOTICE: It is a guidelines rule.
  EXT TV1G_SL TV1G_SQ < 0.38 ABUT < 90 SINGULAR REGION
  EXT TV2G_SL TV2G_SQ < 0.38 ABUT < 90 SINGULAR REGION
}

GR_10 {
@ Min V1 (both square via and slot patterns) enclosure by M1 in guard ring is 0.09
@NOTICE: It is a guidelines rule.
 ENC V1G M1G < 0.09 ABUT < 90 SINGULAR REGION
}

GR_11 {
@ Min Vn (both square via and slot patterns) enclosure by Mn in guard ring (n=2~7) is 0.09
@NOTICE: It is a guidelines rule.
  ENC V2G M2G < 0.09 ABUT < 90 SINGULAR REGION
  ENC V3G M3G < 0.09 ABUT < 90 SINGULAR REGION
  ENC V4G M4G < 0.09 ABUT < 90 SINGULAR REGION
  ENC V5G M5G < 0.09 ABUT < 90 SINGULAR REGION
}

GR_12 {
@ Min Vn (both square via and slot patterns) enclosure by Mn+1 in guard ring (n=2~7) is 0.09
@NOTICE: It is a guidelines rule.
  ENC V1G M2G < 0.09 ABUT < 90 SINGULAR REGION
  ENC V2G M3G < 0.09 ABUT < 90 SINGULAR REGION
  ENC V3G M4G < 0.09 ABUT < 90 SINGULAR REGION
  ENC V4G M5G < 0.09 ABUT < 90 SINGULAR REGION
  ENC V5G M6G < 0.09 ABUT < 90 SINGULAR REGION
}

GR_13 {
@ Min TV1/TV2 (both square via and slot patterns) enclosure by TM1/TM2 in guard ring is 0.09
@NOTICE: It is a guidelines rule.
  ENC TV1G TM1G < 0.09 ABUT < 90 SINGULAR REGION
  ENC TV2G TM2G < 0.09 ABUT < 90 SINGULAR REGION
}

GR_14 {
@ Min TV1/TV2 (both square via and slot patterns) enclosure by Mn in guard ring (Mn presents metal layer right beneath TV1/TV2) is 0.09
@NOTICE: It is a guidelines rule.
  ENC TV1G M6G < 0.09 ABUT < 90 SINGULAR REGION
  ENC TV2G TM1G < 0.09 ABUT < 90 SINGULAR REGION
}

/* Skip GR_15 rules
GR_15 {
@ Guard ring areas (including metal rings, and isolation areas from active areas) should be covered by MARKG layer for DRC and dummy automatic filling blockage

}
*/

GR_16 {
@ Min Isolation space between active patterns (AA/GT/METAL/RDL) and internal metal ring edge is 1
@NOTICE: It is a guidelines rule.
  EXT (AA NOT INSIDE MARKGi) MG_RING_INNER < 1 ABUT < 90 SINGULAR REGION
  EXT (GT NOT INSIDE MARKGi) MG_RING_INNER < 1 ABUT < 90 SINGULAR REGION
  EXT MA_ALL_G MG_RING_INNER < 1 ABUT < 90 SINGULAR REGION
  EXT (RDL NOT INSIDE MARKGi) MG_RING_INNER < 1 ABUT < 90 SINGULAR REGION
}

GR_17 {
@ No dummy patterns (AA/GT/METAL/RDL) are allowed inside isolation areas
@NOTICE: It is a guidelines rule.
  AND MARKGi AADUM
  AND MARKGi GTDUM
  AND MARKGi MDUM_ALL
}

GR_18 {
@ Min Passivation slot width ("RDL via" is recommended as drawing layer) in guard ring is 2
@NOTICE: It is a guidelines rule.
  INT RDLVIAG < 2 ABUT < 90 SINGULAR REGION
}

GR_19 {
@ Min Passivation slot  (RDL via) enclosure by Al pattern (RDL) in guard ring is 1
@NOTICE: It is a guidelines rule.
  ENC RDLVIAG RDL < 1 ABUT < 90 SINGULAR REGION
}

GR_20 {
@ Min Passivation slot (RDL via) enclosure by TM2 in guard ring is 0.5
@NOTICE: It is a guidelines rule.
  ENC RDLVIAG TM2 < 0.5 ABUT < 90 SINGULAR REGION
}




//==========================
//   Al Fuse Rules Check
//==========================

GROUP GALF ALF_?

//AL fuse element rule (to use RDL as drawing layer)

ALF_1 {
@ AL fuse element width is 0.8
@NOTICE: It is a guidelines rule.
  NOT ENCLOSE RECTANGLE ALFUSE 0.8 4
}
ALF_2 {
@ AL fuse element length is 4.0
@NOTICE: It is a guidelines rule.
  ALFUSE NOT WITH EDGE Al_fuse_1 >= 2
  RDLVIA_1 = RDLVIA INTERACT ALFUSE
  X = EXT RDLVIA_1 < 5.2 ABUT<90 SINGULAR REGION OPPOSITE
  (X INTERACT ALFUSE == 1) NOT TM2
}
ALF_3 {
@ Space between AL fuse elements is 4.0
@NOTICE: It is a guidelines rule.
  EXT Alfuse_edge < 4.0 ABUT<90 REGION
  EXT Alfuse_edge_1 < 4.0 ABUT<90 REGION
}
ALF_4 {
@ Space between fuse edge and p-well edge is 8.0
@NOTICE: It is a guidelines rule.
  EXT ALFUSE NW < 8.0 ABUT<90 REGION
}
ALF_5 {
@ AL fuse must be connected to GT through stacked via/contact
@NOTICE: It is a guidelines rule.
  GT_FUSE = GT INTERACT Stack_Vn
  X = ALFUSE INTERACT GT_FUSE == 2
  ALFUSE NOT X
}
//Skip ALF_6 : MARKF layer is needed for Fuse DRC check, recommended size is same as the protection ring
ALF_7 {
@ No AA/Poly/Metal dummy patterns are allowed in Fuse area covered by MARKF
@NOTICE: It is a guidelines rule.
 AADUM AND MARKF
 GTDUM AND MARKF
 M1DUM AND MARKF
 M2DUM AND MARKF
 M3DUM AND MARKF
 M4DUM AND MARKF
 M5DUM AND MARKF
 M6DUM AND MARKF
 TM1DUM AND MARKF
 TM2DUM AND MARKF
}

//Stack via/CT connection to ALfuse rules

GROUP GSV SV_?

SV_1 {
@ CT enclosure by GT is 0.145
@NOTICE: It is a guidelines rule.
  ENC CTFUSE GT < 0.145 ABUT<90 SINGULAR OUTSIDE ALSO
}
SV_2 {
@ CT enclosure by M1 is 0.145
@NOTICE: It is a guidelines rule.
  ENC CTFUSE M1 < 0.145 ABUT<90 SINGULAR OUTSIDE ALSO
}
SV_3 {
@ Vn enclosure by Mn or Mn+1 for stacked via is 0.145
@NOTICE: It is a guidelines rule.
  ENC V1FUSE M1 < 0.145 ABUT<90 SINGULAR OUTSIDE ALSO
  ENC V1FUSE M2 < 0.145 ABUT<90 SINGULAR OUTSIDE ALSO

  ENC V2FUSE M2 < 0.145 ABUT<90 SINGULAR OUTSIDE ALSO
  ENC V2FUSE M3 < 0.145 ABUT<90 SINGULAR OUTSIDE ALSO
 
  ENC V3FUSE M3 < 0.145 ABUT<90 SINGULAR OUTSIDE ALSO
  ENC V3FUSE M4 < 0.145 ABUT<90 SINGULAR OUTSIDE ALSO

  ENC V4FUSE M4 < 0.145 ABUT<90 SINGULAR OUTSIDE ALSO
  ENC V4FUSE M5 < 0.145 ABUT<90 SINGULAR OUTSIDE ALSO

  ENC V5FUSE M5 < 0.145 ABUT<90 SINGULAR OUTSIDE ALSO
  ENC V5FUSE M6 < 0.145 ABUT<90 SINGULAR OUTSIDE ALSO
}
SV_4 {
@ TV1/TV2 enclosure by TM1/TM2 for stacked via is 0.10
@NOTICE: It is a guidelines rule.
  ENC TV1FUSE TM1 < 0.10 ABUT<90 SINGULAR OUTSIDE ALSO
  ENC TV2FUSE TM1 < 0.10 ABUT<90 SINGULAR OUTSIDE ALSO
  ENC TV2FUSE TM2 < 0.10 ABUT<90 SINGULAR OUTSIDE ALSO
}
SV_5 {
@ TV1 enclosure by Mn for stack via is 0.10
@NOTICE: It is a guidelines rule.
  ENC TV1FUSE M6 < 0.10 ABUT<90 SINGULAR OUTSIDE ALSO
}
SV_6 {
@ RDL via enclosure by TM for stack via is 0.60
@NOTICE: It is a guidelines rule.
  ENC RDLVF TM2 < 0.60 ABUT<90 SINGULAR OUTSIDE ALSO
}
SV_7 {
@ RDL via enclosure by RDL for stacked via is 0.60
@NOTICE: It is a guidelines rule.
  ENC RDLVF RDL < 0.60 ABUT<90 SINGULAR OUTSIDE ALSO
}
SV_8 {
@ RDL via width and length is 1.5
@NOTICE: It is a guidelines rule.
  INT RDLVF < 1.5 ABUT<90 SINGULAR REGION
}




//Fuse window rules

GROUP GFUSE FUSE_?

Fuse_1_2 {
@ Fuse window width is 5.0, length is 20.0
@NOTICE: It is a guidelines rule.
  NOT ENCLOSE RECTANGLE (FUSE AND MARKF) 5 20
}
Fuse_3 {
@ Space between fuse window and protection ring is 1.50
@NOTICE: It is a guidelines rule.
  EXT FUSE GM1 < 1.50 ABUT<90 SINGULAR REGION
  EXT FUSE GM2 < 1.50 ABUT<90 SINGULAR REGION
  EXT FUSE GM3 < 1.50 ABUT<90 SINGULAR REGION
  EXT FUSE GM4 < 1.50 ABUT<90 SINGULAR REGION
  EXT FUSE GM5 < 1.50 ABUT<90 SINGULAR REGION
  EXT FUSE GM6 < 1.50 ABUT<90 SINGULAR REGION
  EXT FUSE GTM1 < 1.50 ABUT<90 SINGULAR REGION
  EXT FUSE GTM2 < 1.50 ABUT<90 SINGULAR REGION
  EXT FUSE GRDL < 1.50 ABUT<90 SINGULAR REGION
}
Fuse_4 {
@ Space between fuse edge and fuse window is 3.5
@NOTICE: It is a guidelines rule.
  ENC Alfuse_edge FUSE < 3.5 ABUT<90 REGION
  ENC Alfuse_edge_1 FUSE < 3.5 ABUT<90 REGION
}



//============================================================
//   Guideline for Fuse Repairing Alignment Mark Rule Check 
//============================================================   

GROUP GMark Mark_?

Mark_1 {
@ L mark minimum width is 10.0
@NOTICE: It is a guidelines rule.
  INT LMARK < 10.0 ABUT<90 SINGULAR REGION
}
Mark_2 {
@ L mark maximum width is 20.0
@NOTICE: It is a guidelines rule.
  LMARK WITH WIDTH > 20.0
}
// Skip Mark.3 L mark min length is 30
Mark_4 {
@ L mark maximum length is 50.0
@NOTICE: It is a guidelines rule.
  LENGTH LMARK >50
}
Mark_5 {
@ Minimum space between L mark and FUSE window is 10.0
@NOTICE: It is a guidelines rule.
  ENC LMARK FUSE < 10.0 ABUT<90 SINGULAR REGION
}
Mark_6 {
@ Minimum space between FUSE window and protection ring is 1.5
@NOTICE: It is a guidelines rule.
  EXT FUSE Stack_MR < 1.50 ABUT<90 SINGULAR REGION
}
#ENDIF






//======================================
//  Dummy Pattern check DRC
//======================================

AADUMCK_1 {
@ AADUM width for interconnect is 0.08 (AA.1) 
@ Space between AADUM that are on the same well is 0.10 (AA.3a)
@ Space between AADUM with one or both AA width greater than 0.15um that are on the same well is 0.11(AA.3b)
@ AADUM area is 0.038 (AA.8)
@ Minimum space between dummy AA2 and NW edge (DUMNW) is 0.3um.(AADUM.19)
@ Minimum space between dummy AA2 and GTFUSE is 3.2um.(AADUM.21)
@ AADUM cross NW is not allow.(AADUM.26) 

  INT AADUM < 0.08 REGION

  EXT AADUM < 0.10 REGION

  Y = AADUM WITH WIDTH > 0.15
  EXT Y AADUM < 0.11 SINGULAR REGION

  AREA AADUM < 0.038

  EXT AADUM NWi < 0.3 ABUT < 90 REGION
  ENC AADUM NWi < 0.3 ABUT < 90 REGION

  EXT AADUM GTFUSE < 3.2 ABUT < 90 REGION INSIDE ALSO

  AADUM CUT NWi
}
AADUMCK_2 {
@ Space between AADUM and AA that are on the same well is 0.10 (AA.3a)
@ Space between AADUM and AA with one or both AA width greater than 0.15um that are on the same well is 0.11(AA.3b)

  Y = EXT AADUM AAi < 0.10 REGION INSIDE ALSO
  Y NOT INSIDE INST

  C = AA WITH WIDTH > 0.15
  Z = AADUM WITH WIDTH > 0.15
  B = EXT C AADUM < 0.11 SINGULAR REGION
  B NOT INSIDE INST
  EXT Z AAi < 0.11 SINGULAR REGION
}

AADUMCK_3 {
@ Space between AADUM and GT on field oxide is 0.05 (GT.4)
  EXT AADUM (GTi NOT AAi) < 0.05 REGION INSIDE ALSO
}

AADUMCK_4 {
@ AA dummy patterns cannot touch AA main patterns  
  AADUM INTERACT AAi                                
}

AADUMCK_5_6 {
@ No AA dummy pattern is allowed to inside RESAA/RESNW/RESP1/VARMOS/MARKG/MARKF/MARKS covered areas.
@ Space between dummy AA and RESAA/RESNW/RESP1/VARMOS/MARKG/MARKF/MARKS layers is 0.4.
  EXT AADUM RESAA < 0.4 REGION INSIDE ALSO
  EXT AADUM RESNW < 0.4 REGION INSIDE ALSO
  EXT AADUM RESP1 < 0.4 REGION INSIDE ALSO
  EXT AADUM MARKF < 0.4 REGION INSIDE ALSO
  EXT AADUM MARKG < 0.4 REGION INSIDE ALSO
  EXT AADUM MARKS < 0.4 REGION INSIDE ALSO
  EXT AADUM VARMOS < 0.4 REGION INSIDE ALSO
}

GTDUMCK_1 {
@ Interconnect GTDUM width is 0.06um.(GT.2)
@ Space between two GTDUMs is 0.12.(GT.3a)
@ Space between two parallel GTDUMs(parallel area length is >=0.5um)with one or both line parallel area width is >= 0.4, min. space is 0.16(GT.3b) 
@ Minimum space between dummy poly2 and GTFUSE is 3.24um.(PODUM.21) 
@ No dummy poly pattern is allowed to exist above AA circuit pattern (not including dummy AA).(PODUM.24)
@ Poly dummy is either adding overlap with AA dummy or on STI.(PODUM.25)

  INT GTDUM < 0.06 REGION

  EXT GTDUM < 0.12 REGION

  GTDUM_W = WITH WIDTH GTDUM >= 0.4
  GTDUM_S = EXT GTDUM_W GTDUM < 0.16 OPPOSITE REGION PARA ONLY
  GTDUM_LS = LENGTH GTDUM_S >= 0.5
  GTDUM_S WITH EDGE GTDUM_LS

  EXT GTDUM GTFUSE < 3.24 REGION INSIDE ALSO

  GTDUM AND AA

  (GTDUM INTERACT AADUM) NOT AADUM
}

GTDUMCK_2 {
@ Space between GTDUM and GT is 0.12.(GT.3a)
@ Space between two parallel GTDUM and GT (parallel area length is >=0.5um)with one or both line parallel area width is >= 0.4, min. space is 0.16(GT.3b) 

  EXT GTDUM GTi < 0.12 REGION INSIDE ALSO

  GT_W = WITH WIDTH GT >= 0.4
  GT_S = EXT GT_W GTDUM < 0.16 OPPOSITE REGION PARA ONLY
  GT_LS = LENGTH GT_S >= 0.5
  (GT_S WITH EDGE GT_LS) NOT INSIDE INST
  GTDUM_W = WITH WIDTH GTDUM >= 0.4
  GTDUM_S = EXT GTDUM_W GTi < 0.16 OPPOSITE REGION PARA ONLY
  GTDUM_LS = LENGTH GTDUM_S >= 0.5
  GTDUM_S WITH EDGE GTDUM_LS

}

GTDUMCK_3 {
@ Space between AA and GTDUM on field oxide is 0.05.(GT.4)
  EXT AAi GTDUM < 0.05 REGION INSIDE ALSO
}

GTDUMCK_4 {
@ GT dummy patterns cannot touch GT main patterns  
  GTDUM TOUCH EDGE GTi                                
}

GTDUMCK_5_6 {
@ No dummy pattern is allowed to inside RESAA/RESNW/RESP1/MARKF/MARKG/MARKS/VARMOS covered areas.
@ Space between dummy poly2 and RESAA/RESNW/RESP1/MARKF/MARKG/MARKS/VARMOS layers is 0.44.
  EXT GTDUM RESAA < 0.44 REGION INSIDE ALSO
  EXT GTDUM RESNW < 0.44 REGION INSIDE ALSO
  EXT GTDUM RESP1 < 0.44 REGION INSIDE ALSO
  EXT GTDUM MARKF < 0.44 REGION INSIDE ALSO
  EXT GTDUM MARKG < 0.44 REGION INSIDE ALSO
  EXT GTDUM MARKS < 0.44 REGION INSIDE ALSO
  EXT GTDUM VARMOS < 0.44 REGION INSIDE ALSO
}

MnDUMCK_1_2 {
@ M1DUM width is 0.09(M1.1)
@ Space between two M1DUM is 0.09(M1.2a)
@ Space between two (M1DUM or M1i) having run length >=2um with one or both M1DUM width orlength >=1um is 0.16(M1.2b)
@ Space between two (M1DUM or M1i) having run length >=2um with one or both M1DUM width orlength >=5um is 0.50(M1.2c)
@ Max M1DUM line width allowed is 12(M1.3)
@ M1DUM area is 0.027(M1.4)
@ Dielectric area enclosure by M1DUM is 0.13.(M1.5)

  INT M1DUM < 0.09 REGION

  EXT M1DUM < 0.09 SINGULAR REGION

  CMACRO Mn_2b_DUM M1ALL M1DUM 2 1 0.16

  CMACRO Mn_2c_DUM M1ALL M1DUM 2 5 0.5

  M1DUM WITH WIDTH > 12

  AREA M1DUM < 0.027

  X = HOLES M1DUM 
  AREA X < 0.13
}

MnDUMCK_3_4 {
@ MnDUM (n=2~8) width is 0.10(Mn.1)
@ Space between two MnDUM (n=2~8) is 0.10(Mn.2a)
@ Space between two (MnDUM (n=2~8) or Mni) having run length >=2um with one or both MnDUM width orlength >=1um is 0.16(Mn.2b)
@ Space between two (MnDUM (n=2~8) or Mni) having run length >=2um with one or both MnDUM width orlength >=5um is 0.50(M1.2c)
@ Max MnDUM (n=2~8) line width allowed is 12(Mn.3)
@ MnDUM (n=2~8) area is 0.035(Mn.4)
@ Dielectric area enclosure by MnDUM (n=2~8) is 0.12.(Mn.5)

  INT M2DUM < 0.10 REGION
  INT M3DUM < 0.10 REGION
  INT M4DUM < 0.10 REGION
  INT M5DUM < 0.10 REGION
  INT M6DUM < 0.10 REGION
  INT M7DUM < 0.10 REGION
  INT M8DUM < 0.10 REGION

  EXT M2DUM < 0.10 SINGULAR REGION
  EXT M3DUM < 0.10 SINGULAR REGION
  EXT M4DUM < 0.10 SINGULAR REGION
  EXT M5DUM < 0.10 SINGULAR REGION
  EXT M6DUM < 0.10 SINGULAR REGION
  EXT M7DUM < 0.10 SINGULAR REGION
  EXT M8DUM < 0.10 SINGULAR REGION

  CMACRO Mn_2b_DUM M2ALL M2DUM 2 1 0.16
  CMACRO Mn_2c_DUM M2ALL M2DUM 2 5 0.5
  CMACRO Mn_2b_DUM M3ALL M3DUM 2 1 0.16
  CMACRO Mn_2c_DUM M3ALL M3DUM 2 5 0.5
  CMACRO Mn_2b_DUM M4ALL M4DUM 2 1 0.16
  CMACRO Mn_2c_DUM M4ALL M4DUM 2 5 0.5
  CMACRO Mn_2b_DUM M5ALL M5DUM 2 1 0.16
  CMACRO Mn_2c_DUM M5ALL M5DUM 2 5 0.5
  CMACRO Mn_2b_DUM M6ALL M6DUM 2 1 0.16
  CMACRO Mn_2c_DUM M6ALL M6DUM 2 5 0.5
  M7ALL = M7i OR M7DUM
  CMACRO Mn_2b_DUM M7ALL M7DUM 2 1 0.16
  CMACRO Mn_2c_DUM M7ALL M7DUM 2 5 0.5
  M8ALL = M8i OR M8DUM
  CMACRO Mn_2b_DUM M8ALL M8DUM 2 1 0.16
  CMACRO Mn_2c_DUM M8ALL M8DUM 2 5 0.5


  M2DUM WITH WIDTH > 12
  M3DUM WITH WIDTH > 12
  M4DUM WITH WIDTH > 12
  M5DUM WITH WIDTH > 12
  M6DUM WITH WIDTH > 12
  M7DUM WITH WIDTH > 12
  M8DUM WITH WIDTH > 12

  AREA M2DUM < 0.035
  AREA M3DUM < 0.035
  AREA M4DUM < 0.035
  AREA M5DUM < 0.035
  AREA M6DUM < 0.035
  AREA M7DUM < 0.035
  AREA M8DUM < 0.035

  A = HOLES M2DUM 
  AREA A < 0.12
  B = HOLES M3DUM 
  AREA B < 0.12
  C = HOLES M4DUM 
  AREA C < 0.12
  D = HOLES M5DUM 
  AREA D < 0.12
  E = HOLES M6DUM 
  AREA E < 0.12
  F = HOLES M7DUM 
  AREA F < 0.12
  G = HOLES M8DUM 
  AREA G < 0.12
}

MnDUMCK_5 {
@ MnDUM (n=1~8) metal can not be interacted with Mn metal design patterns.
  M1DUM INTERACT M1
  M2DUM INTERACT M2
  M3DUM INTERACT M3
  M4DUM INTERACT M4
  M5DUM INTERACT M5
  M6DUM INTERACT M6
  M7DUM INTERACT M7
  M8DUM INTERACT M8
}

MnDUMCK_6 {
@ MnDUM (n=1~8) patterns are not allowed inside MARKF, MARKG and MARKS covered areas.
  M1DUM AND ((MARKF OR MARKG) OR MARKS)
  M2DUM AND ((MARKF OR MARKG) OR MARKS)
  M3DUM AND ((MARKF OR MARKG) OR MARKS)
  M4DUM AND ((MARKF OR MARKG) OR MARKS)
  M5DUM AND ((MARKF OR MARKG) OR MARKS)  
  M6DUM AND ((MARKF OR MARKG) OR MARKS)
  M7DUM AND ((MARKF OR MARKG) OR MARKS)
  M8DUM AND ((MARKF OR MARKG) OR MARKS)
}

TM1DUMCK_1_2 {
@ TM1DUM width is 0.40(TM1.1)
@ Space between two TM1s or TM1DUMs  is 0.40.(TM1.2a)
@ Space between two TM1s or TM1DUMs having parallel segment >=2um with one or both width >=2um is 0.50um (TM1.2b)
@ TM1DUM area is 0.40.(TM1.3) 
@ Dielectric area enclosed by TM1DUM is 0.6 (TM1.4)

  INT TM1DUM < 0.40 REGION

  EXT TM1DUM < 0.40 REGION
  EXT TM1 TM1DUM < 0.40 REGION

  CMACRO Mn_2b_DUM TM1ALL TM1DUM 2 2 0.5

  AREA TM1DUM < 0.40

  X = HOLES TM1DUM 
  AREA X < 0.6
}

TM1DUMCK_3 {
@ TM1DUM  metal can not be interacted with TM1 metal design patterns.
  TM1DUM INTERACT TM1
}

TM1DUMCK_4 {
@ TM1DUM  patterns are not allowed inside MARKF, MARKG and MARKS covered areas.
  TM1DUM AND ((MARKF OR MARKG) OR MARKS)
}

STM1DUMCK_1_2 {
@ STM1DM width is 0.20 (STM1.1)
@ Space between two STM1DMs or STM1 is 0.20 (STM1.2a)
@ Space between two TM1s having parallel segment >=0.4um with one or both width >=0.4um is 0.25um (STM1.2b)
@ Space between two TM1s having parallel segment >=2um with one or both width >=2um is 0.40um (STM1.2c)
@ Space between two TM1s having parallel segment >=2um with one or both width >=10um is 0.50um (STM1.2d) 
@ STM1DM area is 0.12(STM1.3)
@ Dielectric area enclosed by STM1DM is 0.26 (STM1.4)
@ STM1DM Max. width allowed is 20 (STM1.5)
@ Space between STM1DM metal line with one or both are 45 degree bent metal line is 0.22 (STM1.7)

  INT STM1DM < 0.20 SINGULAR REGION

  EXT STM1DM < 0.20 SINGULAR REGION
  EXT STM1DM STM1 < 0.20 SINGULAR REGION

  STM1ALL = STM1 OR STM1DM
  CMACRO Mn_2b_DUM STM1ALL STM1DM 0.4 0.4 0.25 

  CMACRO Mn_2b_DUM STM1ALL STM1DM 2 2 0.4

  CMACRO Mn_2c_DUM STM1ALL STM1DM 2 10 0.5

  AREA STM1DM < 0.12

  X = HOLES STM1DM 
  AREA X < 0.26

  Y = STM1DM WITH WIDTH > 20.00
  Y NOT INTERACT PA

  Z = ANGLE STM1DM == 45
  EXT Z STM1DM < 0.22 REGION
  EXT Z STM1DM < 0.22 CORNER TO EDGE
  A = ANGLE STM1DM == 45
  EXT A STM1 < 0.22 REGION
  EXT A STM1 < 0.22 CORNER TO EDGE
  B = ANGLE STM1 == 45
  EXT B STM1DM < 0.22 REGION
  EXT B STM1DM < 0.22 CORNER TO EDGE
}

STM1DUMCK_3 {
@ STM1DM  metal can not be interacted with STM1 metal design patterns.
  STM1DM INTERACT STM1
}

STM1DUMCK_4 {
@ STM1DM  patterns are not allowed inside MARKF, MARKG and MARKS covered areas.
  STM1DM AND ((MARKF OR MARKG) OR MARKS)
}

#IFDEF Type_a

TM2DUMCK_1_2 {
@ TM2DUM  width is 0.40 (TM2.1)
@ Space between two TM2DUMs or TM2s is 0.40 (TM2.2a)
@ Space between two TM2s having parallel segment >=2um with one or both width >=2um is 0.50um (TM2.2b)
@ TM2DUM area is 0.40 (TM2.3)
@ Dielectric area enclosed by TM2DUM  is 0.6 (TM2.4)
@ Max TM2DUM width allowed is 30,Top metal bondpads can be waived.(TM2.5)
       

  INT TM2DUM < 0.40 REGION

  EXT TM2 TM2DUM < 0.40 REGION
  EXT TM2DUM < 0.40 REGION

  CMACRO Mn_2b_DUM TM2ALL TM2DUM 2 2 0.5

  AREA TM2DUM < 0.40

  X = HOLES TM2DUM 
  AREA X < 0.6

  Y = TM2DUM WITH WIDTH > 30.00
  Y NOT INTERACT PA
}

TM2DUMCK_3 {
@ TM2DUM  metal can not be interacted with TM2 metal design patterns.
  TM2DUM INTERACT TM2
}

TM2DUMCK_4 {
@ TM2DUM  patterns are not allowed inside MARKF, MARKG and MARKS covered areas.
  TM2DUM AND ((MARKF OR MARKG) OR MARKS)
}

#ENDIF

#IFDEF Type_T

TM2DUMCK_1_2 {
@ TM2DUM width  is 1.50 (MTT2.1)
@ Min space between TM2DUM is 1.50 (MTT2.2a)
@ Space between two TM2s or TM2DUMs having parallel segment larger than 2um with one or both width >=16um is 2.0 (MTT2.2b)
@ Space between an inductor TM2DUM and other TM2DUM is 30 (MTT2.5)
@ Min Metal area TM2DUM is 8.00 (MTT2.6)
@ Dielectric area enclosed by TM2DUM is 6.0 (MTT2.7)

  INT TM2DUM < 1.50 SINGULAR REGION

  EXT TM2 TM2DUM < 1.50 SINGULAR REGION
  EXT TM2DUM < 1.50 SINGULAR REGION

  CMACRO Mn_2c_DUM TM2ALL TM2DUM 2.001 16 2

  EXT (TM2DUM AND INDMY) (TM2DUM NOT INDMY) < 30 OPPOSITE REGION

  AREA TM2DUM < 8.00

  X = HOLES TM2DUM          
  AREA X < 6.0
}

TM2DUMCK_3 {
@ TM2DUM  metal can not be interacted with TM2 metal design patterns.
  TM2DUM INTERACT TM2
}

TM2DUMCK_4 {
@ TM2DUM  patterns are not allowed inside MARKF, MARKG and MARKS covered areas.
  TM2DUM AND ((MARKF OR MARKG) OR MARKS)
}

#ENDIF

STM2DUMCK_1_2 {
@ STM2DM width is 0.20 (STM2.1)
@ Space between two STM2s or STM2DM is 0.20 (STM2.2a)
@ Space between two STM2s or STM2DM having parallel segment >=0.4um with one or both width >=0.4um is 0.25um (STM2.2b)
@ Space between two STM2s or STM2DM having parallel segment >=2um with one or both width >=2um is 0.40um (STM2.2c)
@ Space between two STM2s or STM2DM having parallel segment >=2um with one or both width >=10um is 0.50um (STM2.2d)
@ STM2DM area is 0.12 (STM2.3)
@ Dielectric area enclosed by STM2DM is 0.26 (STM2.4)
@ STM2DM Max. width allowed is 30. Top metal bondpads can be waived(STM2.5)
@ Space between STM2DM metal line with one or both are 45 degree bent metal line is 0.22 (STM2.6)

  INT STM2DM < 0.20 SINGULAR REGION

  EXT STM2 STM2DM < 0.20 SINGULAR REGION
  EXT STM2DM < 0.20 SINGULAR REGION

  STM2ALL = STM2 OR STM2DM
  CMACRO Mn_2b_DUM STM2ALL STM2DM 0.4 0.4 0.25

  CMACRO Mn_2b_DUM STM2ALL STM2DM 2 2 0.4

  CMACRO Mn_2c_DUM STM2ALL STM2DM 2 10 0.5

  AREA STM2DM < 0.12

  X = HOLES STM2DM 
  AREA X < 0.26

  Y = STM2DM WITH WIDTH > 30.00
  Y NOT INTERACT PA

  Z = ANGLE STM2DM == 45
  EXT Z STM2DM < 0.22 REGION
  EXT Z STM2DM < 0.22 CORNER TO EDGE
}

STM2DUMCK_3 {
@ STM2DM  metal can not be interacted with STM2 metal design patterns.
  STM2DM INTERACT STM2
}

STM2DUMCK_4 {
@ STM2DM  patterns are not allowed inside MARKF, MARKG and MARKS covered areas.
  STM2DM AND ((MARKF OR MARKG) OR MARKS)
}







M1M2 = M1 AND M2
SV1_metal = M1M2 INTERACT V1 == 1
M2M3 = M2 AND M3
SV2_metal = M2M3 INTERACT V2 == 1
M3M4 = M3 AND M4
SV3_metal = M3M4 INTERACT V3 == 1
M4M5 = M4 AND M5
SV4_metal = M4M5 INTERACT V4 == 1
M5M6 = M5 AND M6
SV5_metal = M5M6 INTERACT V5 == 1


//============================
//  Conventional Check
//============================

GROUP GConvention Convention_?

PMOS1 = (PMOSi NOT INTERACT CAPBP) NOT INTERACT RESP1

Convention_latchup.a {
  @Latchup.Guidance.3_a : Maximum space from any point within Source/Drain region to the nearest pickup AA region inside the same well for I/O and internal circuits.
  A = INT NTAPi < 0.005 ABUT INTERSECTING ONLY REGION
  B = (NTAPi INTERACT A) NOT A
  C = INT B < 0.001 ABUT INTERSECTING ONLY REGION
  D = (B INTERACT C) NOT C
  NW_MINUS_NTAP = SIZE D BY 30 INSIDE OF NWi STEP 0.38
  X = PMOS1 AND NWi
  OUTSIDE EDGE X NW_MINUS_NTAP
}

NMOS1 = (NMOSi NOT INTERACT CAPBP) NOT INTERACT RESP1

Convention_latchup.b {
  @Latchup.Guidance.3_b : Maximum space from any point within Source/Drain region to the nearest pickup AA region inside the same well for I/O and internal circuits
  A = INT PTAPi < 0.005 ABUT INTERSECTING ONLY REGION
  B = (PTAPi INTERACT A) NOT A
  C = INT B < 0.001 ABUT INTERSECTING ONLY REGION
  D = (B INTERACT C) NOT C
  PW_MINUS_PTAP = SIZE D BY 30 INSIDE OF PW STEP 0.38
  X = NMOS1 AND PW
  OUTSIDE EDGE X PW_MINUS_PTAP
}


